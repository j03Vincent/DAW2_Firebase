"use strict";(self.webpackChunkcrud_angular=self.webpackChunkcrud_angular||[]).push([[179],{2011:(nt,Ce,k)=>{k.d(Ce,{Dh:()=>ce,GT:()=>pe,cc:()=>Te,hO:()=>$e,on:()=>B,pX:()=>J,xv:()=>ue});var g=k(5e3),K=k(127),O=k(5813);nt=k.hmd(nt);const oe=["ngOnDestroy"],J=(Ee,Ke,Ge,De={})=>new Proxy(Ee,{get:(_e,ve)=>Ge.runOutsideAngular(()=>{var je;if(Ee[ve])return(null===(je=null==De?void 0:De.spy)||void 0===je?void 0:je.get)&&De.spy.get(ve,Ee[ve]),Ee[ve];if(oe.indexOf(ve)>-1)return()=>{};const Be=Ke.toPromise().then(te=>{const z=te&&te[ve];return"function"==typeof z?z.bind(te):z&&z.then?z.then(ne=>Ge.run(()=>ne)):Ge.run(()=>z)});return new Proxy(()=>{},{get:(te,z)=>Be[z],apply:(te,z,ne)=>Be.then(ge=>{var re;const xe=ge&&ge(...ne);return(null===(re=null==De?void 0:De.spy)||void 0===re?void 0:re.apply)&&De.spy.apply(ve,ne,xe),xe})})})}),pe=(Ee,Ke)=>{Ke.forEach(Ge=>{Object.getOwnPropertyNames(Ge.prototype||Ge).forEach(De=>{Object.defineProperty(Ee.prototype,De,Object.getOwnPropertyDescriptor(Ge.prototype||Ge,De))})})};class ie{constructor(Ke){return Ke}}const ce=new g.OlP("angularfire2.app.options"),ue=new g.OlP("angularfire2.app.name");function B(Ee,Ke,Ge){const _e="object"==typeof Ge&&Ge||{};_e.name=_e.name||"string"==typeof Ge&&Ge||"[DEFAULT]";const je=K.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||Ke.runOutsideAngular(()=>K.Z.initializeApp(Ee,_e));try{JSON.stringify(Ee)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${nt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ie(je)}const j=(Ee,...Ke)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ke)},Q={provide:ie,useFactory:B,deps:[ce,g.R0b,[new g.FiY,ue]]};let $e=(()=>{class Ee{constructor(Ge){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",g.q4F.full,Ge.toString())}static initializeApp(Ge,De){return{ngModule:Ee,providers:[{provide:ce,useValue:Ge},{provide:ue,useValue:De}]}}}return Ee.\u0275fac=function(Ge){return new(Ge||Ee)(g.LFG(g.Lbi))},Ee.\u0275mod=g.oAB({type:Ee}),Ee.\u0275inj=g.cJS({providers:[Q]}),Ee})();function Te(Ee,Ke,Ge,De,_e){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ee)||[];if(ve)return function Me(Ee,Ke){try{return Ee.toString()===Ke.toString()}catch(Ge){return Ee===Ke}}(_e,je)||(de("error",`${Ke} was already initialized on the ${Ge} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:_e,was:je})),ve;{const Be=De();return globalThis.\u0275AngularfireInstanceCache.push([Ee,Be,_e]),Be}}const Pe=!!nt.hot,de=(Ee,...Ke)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Ee](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(nt,Ce,k)=>{k.d(Ce,{q4:()=>Kc,iC:()=>wl,HU:()=>_l,vb:()=>Qc,JM:()=>Fs});var g=k(5e3),K=k(5867),O=k(5861),oe=k(9681),J=k(2090),pe=k(4859),ie=k(1877);const ce="@firebase/installations",j="w:0.5.7",Q="FIS_v2",Ee=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ke(D){return D instanceof J.ZR&&D.code.includes("request-failed")}function Ge({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function De(D){return{token:D.token,requestStatus:2,expiresIn:ne(D.expiresIn),creationTime:Date.now()}}function _e(D,b){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ee.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Be(D,{refreshToken:b}){const x=je(D);return x.append("Authorization",function ge(D){return`${Q} ${D}`}(b)),x}function te(D){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function ne(D){return Number(D.replace("s","000"))}function re(D,b){return xe.apply(this,arguments)}function xe(){return(xe=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:x}){const F=Ge(D),q=je(D),ee=b.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&q.append("x-firebase-client",mt)}const ze={method:"POST",headers:q,body:JSON.stringify({fid:x,authVersion:Q,appId:D.appId,sdkVersion:j})},Je=yield te(()=>fetch(F,ze));if(Je.ok){const mt=yield Je.json();return{fid:mt.fid||x,registrationStatus:2,refreshToken:mt.refreshToken,authToken:De(mt.authToken)}}throw yield _e("Create Installation",Je)})).apply(this,arguments)}function se(D){return new Promise(b=>{setTimeout(b,D)})}const Kt=/^[cdef][\w-]{21}$/;function rt(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function ft(D){return function wt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Kt.test(x)?x:""}catch(D){return""}}function ln(D){return`${D.appName}!${D.appId}`}const cn=new Map;function _i(D,b){const x=ln(D);Yt(x,b),function Ut(D,b){const x=function si(){return!ir&&"BroadcastChannel"in self&&(ir=new BroadcastChannel("[Firebase] FID Change"),ir.onmessage=D=>{Yt(D.data.key,D.data.fid)}),ir}();x&&x.postMessage({key:D,fid:b}),function ds(){0===cn.size&&ir&&(ir.close(),ir=null)}()}(x,b)}function Yt(D,b){const x=cn.get(D);if(x)for(const F of x)F(b)}let ir=null;const Rr="firebase-installations-store";let Gi=null;function qi(){return Gi||(Gi=(0,J.X3)("firebase-installations-database",1,(D,b)=>{0===b&&D.createObjectStore(Rr)})),Gi}function st(D,b){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(D,b){const x=ln(D),q=(yield qi()).transaction(Rr,"readwrite"),ee=q.objectStore(Rr),Se=yield ee.get(x);return yield ee.put(b,x),yield q.complete,(!Se||Se.fid!==b.fid)&&_i(D,b.fid),b})).apply(this,arguments)}function zn(D){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(D){const b=ln(D),F=(yield qi()).transaction(Rr,"readwrite");yield F.objectStore(Rr).delete(b),yield F.complete})).apply(this,arguments)}function oi(D,b){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,O.Z)(function*(D,b){const x=ln(D),q=(yield qi()).transaction(Rr,"readwrite"),ee=q.objectStore(Rr),Se=yield ee.get(x),ze=b(Se);return void 0===ze?yield ee.delete(x):yield ee.put(ze,x),yield q.complete,ze&&(!Se||Se.fid!==ze.fid)&&_i(D,ze.fid),ze})).apply(this,arguments)}function gn(D){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(D){let b;const x=yield oi(D.appConfig,F=>{const q=hs(F),ee=Xo(D,q);return b=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield b}:{installationEntry:x,registrationPromise:b}})).apply(this,arguments)}function hs(D){return Ft(D||{fid:rt(),registrationStatus:0})}function Xo(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ee.create("app-offline"))};const x={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Bt(D,b){return et.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:_t(D)}:{installationEntry:b}}function et(){return(et=(0,O.Z)(function*(D,b){try{const x=yield re(D,b);return st(D.appConfig,x)}catch(x){throw Ke(x)&&409===x.customData.serverCode?yield zn(D.appConfig):yield st(D.appConfig,{fid:b.fid,registrationStatus:0}),x}})).apply(this,arguments)}function _t(D){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(D){let b=yield Oi(D.appConfig);for(;1===b.registrationStatus;)yield se(100),b=yield Oi(D.appConfig);if(0===b.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield gn(D);return F||x}return b})).apply(this,arguments)}function Oi(D){return oi(D,b=>{if(!b)throw Ee.create("installation-not-found");return Ft(b)})}function Ft(D){return function Gs(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function vr(D,b){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},x){const F=at(D,x),q=Be(D,x),ee=b.getImmediate({optional:!0});if(ee){const mt=yield ee.getHeartbeatsHeader();mt&&q.append("x-firebase-client",mt)}const ze={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:j,appId:D.appId}})},Je=yield te(()=>fetch(F,ze));if(Je.ok)return De(yield Je.json());throw yield _e("Generate Auth Token",Je)})).apply(this,arguments)}function at(D,{fid:b}){return`${Ge(D)}/${b}/authTokens:generate`}function Er(D){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,O.Z)(function*(D,b=!1){let x;const F=yield oi(D.appConfig,ee=>{if(!Rt(ee))throw Ee.create("not-registered");const Se=ee.authToken;if(!b&&U(Se))return ee;if(1===Se.requestStatus)return x=qe(D,b),ee;{if(!navigator.onLine)throw Ee.create("app-offline");const ze=$(ee);return x=ut(D,ze),ze}});return x?yield x:F.authToken})).apply(this,arguments)}function qe(D,b){return be.apply(this,arguments)}function be(){return(be=(0,O.Z)(function*(D,b){let x=yield Ze(D.appConfig);for(;1===x.authToken.requestStatus;)yield se(100),x=yield Ze(D.appConfig);const F=x.authToken;return 0===F.requestStatus?Er(D,b):F})).apply(this,arguments)}function Ze(D){return oi(D,b=>{if(!Rt(b))throw Ee.create("not-registered");return function le(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function ut(D,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(D,b){try{const x=yield vr(D,b),F=Object.assign(Object.assign({},b),{authToken:x});return yield st(D.appConfig,F),x}catch(x){if(!Ke(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield st(D.appConfig,F)}else yield zn(D.appConfig);throw x}})).apply(this,arguments)}function Rt(D){return void 0!==D&&2===D.registrationStatus}function U(D){return 2===D.requestStatus&&!function L(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function $(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function Le(){return(Le=(0,O.Z)(function*(D){const b=D,{installationEntry:x,registrationPromise:F}=yield gn(b);return F?F.catch(console.error):Er(b).catch(console.error),x.fid})).apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(D,b=!1){const x=D;return yield wr(x),(yield Er(x,b)).token})).apply(this,arguments)}function wr(D){return jt.apply(this,arguments)}function jt(){return(jt=(0,O.Z)(function*(D){const{registrationPromise:b}=yield gn(D);b&&(yield b)})).apply(this,arguments)}function jn(D){return Ee.create("missing-app-config-values",{valueName:D})}const ta="installations",Re=D=>{const b=D.getProvider("app").getImmediate(),x=function zi(D){if(!D||!D.options)throw jn("App Configuration");if(!D.name)throw jn("App Name");const b=["projectId","apiKey","appId"];for(const x of b)if(!D.options[x])throw jn(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},St=D=>{const b=D.getProvider("app").getImmediate(),x=(0,oe._getProvider)(b,ta).getImmediate();return{getId:()=>function Y(D){return Le.apply(this,arguments)}(x),getToken:q=>function pt(D){return qt.apply(this,arguments)}(x,q)}};(function hn(){(0,oe._registerComponent)(new pe.wA(ta,Re,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",St,"PRIVATE"))})(),(0,oe.registerVersion)(ce,"0.5.7"),(0,oe.registerVersion)(ce,"0.5.7","esm2017");const ar="@firebase/remote-config",An=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Th{constructor(b,x,F,q){this.client=b,this.storage=x,this.storageCache=F,this.logger=q}isCachedDataFresh(b,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,q=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${q}.`),q}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(q&&x.isCachedDataFresh(b.cacheMaxAgeMillis,F))return q;b.eTag=q&&q.eTag;const ee=yield x.client.fetch(b),Se=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&Se.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(Se),ee})()}}function xc(D=navigator){return D.languages&&D.languages[0]||D.language}class Va{constructor(b,x,F,q,ee,Se){this.firebaseInstallations=b,this.sdkVersion=x,this.namespace=F,this.projectId=q,this.apiKey=ee,this.appId=Se}fetch(b){var x=this;return(0,O.Z)(function*(){const[F,q]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},Je={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:q,app_id:x.appId,language_code:xc()},mt={method:"POST",headers:ze,body:JSON.stringify(Je)},Lt=fetch(Se,mt),Dt=new Promise((Jr,Li)=>{b.signal.addEventListener(()=>{const rs=new Error("The operation was aborted.");rs.name="AbortError",Li(rs)})});let xn;try{yield Promise.race([Lt,Dt]),xn=yield Lt}catch(Jr){let Li="fetch-client-network";throw"AbortError"===Jr.name&&(Li="fetch-timeout"),An.create(Li,{originalErrorMessage:Jr.message})}let Mn=xn.status;const Ro=xn.headers.get("ETag")||void 0;let ou,Qr;if(200===xn.status){let Jr;try{Jr=yield xn.json()}catch(Li){throw An.create("fetch-client-parse",{originalErrorMessage:Li.message})}ou=Jr.entries,Qr=Jr.state}if("INSTANCE_STATE_UNSPECIFIED"===Qr?Mn=500:"NO_CHANGE"===Qr?Mn=304:("NO_TEMPLATE"===Qr||"EMPTY_CONFIG"===Qr)&&(ou={}),304!==Mn&&200!==Mn)throw An.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:Ro,config:ou}})()}}class vp{constructor(b,x){this.client=b,this.storage=x}fetch(b){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:x,backoffCount:F}){var q=this;return(0,O.Z)(function*(){yield function kn(D,b){return new Promise((x,F)=>{const q=Math.max(b-Date.now(),0),ee=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(ee),F(An.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,x);try{const ee=yield q.client.fetch(b);return yield q.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Mc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(ee))throw ee;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield q.storage.setThrottleMetadata(Se),q.attemptFetch(b,Se)}})()}}class Rc{constructor(b,x,F,q,ee){this.app=b,this._client=x,this._storageCache=F,this._storage=q,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wu(D,b){const x=D.target.error||void 0;return An.create(b,{originalErrorMessage:x&&x.message})}const ys="app_namespace_store";class Dp{constructor(b,x,F,q=function Ip(){return new Promise((D,b)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{b(Wu(F,"storage-open"))},x.onsuccess=F=>{D(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ys,{keyPath:"compositeKey"})}}catch(x){b(An.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=b,this.appName=x,this.namespace=F,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,ee)=>{const ze=F.transaction([ys],"readonly").objectStore(ys),Je=x.createCompositeKey(b);try{const mt=ze.get(Je);mt.onerror=Lt=>{ee(Wu(Lt,"storage-get"))},mt.onsuccess=Lt=>{const Dt=Lt.target.result;q(Dt?Dt.value:void 0)}}catch(mt){ee(An.create("storage-get",{originalErrorMessage:mt&&mt.message}))}})})()}set(b,x){var F=this;return(0,O.Z)(function*(){const q=yield F.openDbPromise;return new Promise((ee,Se)=>{const Je=q.transaction([ys],"readwrite").objectStore(ys),mt=F.createCompositeKey(b);try{const Lt=Je.put({compositeKey:mt,value:x});Lt.onerror=Dt=>{Se(Wu(Dt,"storage-set"))},Lt.onsuccess=()=>{ee()}}catch(Lt){Se(An.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(b){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((q,ee)=>{const ze=F.transaction([ys],"readwrite").objectStore(ys),Je=x.createCompositeKey(b);try{const mt=ze.delete(Je);mt.onerror=Lt=>{ee(Wu(Lt,"storage-delete"))},mt.onsuccess=()=>{q()}}catch(mt){ee(An.create("storage-delete",{originalErrorMessage:mt&&mt.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Oc{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const x=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),q=b.storage.getActiveConfig(),ee=yield x;ee&&(b.lastFetchStatus=ee);const Se=yield F;Se&&(b.lastSuccessfulFetchTimestampMillis=Se);const ze=yield q;ze&&(b.activeConfig=ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Ws(){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,O.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Eo(){(0,oe._registerComponent)(new pe.wA("remote-config",function D(b,{instanceIdentifier:x}){const F=b.getProvider("app").getImmediate(),q=b.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,J.hl)())throw An.create("indexed-db-unavailable");const{projectId:ee,apiKey:Se,appId:ze}=F.options;if(!ee)throw An.create("registration-project-id");if(!Se)throw An.create("registration-api-key");if(!ze)throw An.create("registration-app-id");const Je=new Dp(ze,F.name,x=x||"firebase"),mt=new Oc(Je),Lt=new ie.Yd(ar);Lt.logLevel=ie.in.ERROR;const Dt=new Va(q,oe.SDK_VERSION,x,ee,Se,ze),xn=new vp(Dt,Je),Mn=new Th(xn,Je,mt,Lt),Ro=new Rc(F,Mn,mt,Je,Lt);return function vi(D){const b=(0,J.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ar,"0.3.6"),(0,oe.registerVersion)(ar,"0.3.6","esm2017")}();const Zu="/firebase-messaging-sw.js",_s="/firebase-cloud-messaging-push-scope",jr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zs="google.c.a.c_id",ra="google.c.a.c_l",Pc="google.c.a.ts",bp="google.c.a.e";var vs=(()=>{return(D=vs||(vs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",vs;var D})();function li(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ba(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),q=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)q[ee]=F.charCodeAt(ee);return q}const ja="fcm_token_details_db",lr="fcm_token_object_Store";function Sh(D){return $a.apply(this,arguments)}function $a(){return $a=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(ja))return null;let b=null;return(yield(0,J.X3)(ja,5,function(){var F=(0,O.Z)(function*(q,ee,Se,ze){var Je;if(ee<2||!q.objectStoreNames.contains(lr))return;const mt=ze.objectStore(lr),Lt=yield mt.index("fcmSenderId").get(D);if(yield mt.clear(),Lt)if(2===ee){const Dt=Lt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;b={token:Dt.fcmToken,createTime:null!==(Je=Dt.createTime)&&void 0!==Je?Je:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:li(Dt.vapidKey)}}}else if(3===ee){const Dt=Lt;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:li(Dt.auth),p256dh:li(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:li(Dt.vapidKey)}}}else if(4===ee){const Dt=Lt;b={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:li(Dt.auth),p256dh:li(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:li(Dt.vapidKey)}}}});return function(q,ee,Se,ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(ja),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),kc(b)?b:null}),$a.apply(this,arguments)}function kc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Yi="firebase-messaging-store";let ia=null;function Ku(){return ia||(ia=(0,J.X3)("firebase-messaging-database",1,(D,b)=>{0===b&&D.createObjectStore(Yi)})),ia}function pn(D){return Do.apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D){const b=Ys(D),F=yield(yield Ku()).transaction(Yi).objectStore(Yi).get(b);if(F)return F;{const q=yield Sh(D.appConfig.senderId);if(q)return yield Es(D,q),q}})).apply(this,arguments)}function Es(D,b){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(D,b){const x=Ys(D),q=(yield Ku()).transaction(Yi,"readwrite");return yield q.objectStore(Yi).put(b,x),yield q.complete,b})).apply(this,arguments)}function Fc(D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,O.Z)(function*(D){const b=Ys(D),F=(yield Ku()).transaction(Yi,"readwrite");yield F.objectStore(Yi).delete(b),yield F.complete})).apply(this,arguments)}function Ys({appConfig:D}){return D.appId}const Sn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function sa(D,b){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*(D,b){const x=yield Is(D),F=lt(b),q={method:"POST",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Hr(D.appConfig),q)).json()}catch(Se){throw Sn.create("token-subscribe-failed",{errorInfo:Se})}if(ee.error)throw Sn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Sn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Dr(D,b){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(D,b){const x=yield Is(D),F=lt(b.subscriptionOptions),q={method:"PATCH",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Hr(D.appConfig)}/${b.token}`,q)).json()}catch(Se){throw Sn.create("token-update-failed",{errorInfo:Se})}if(ee.error)throw Sn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Sn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function Qi(D,b){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Is(D)};try{const ee=yield(yield fetch(`${Hr(D.appConfig)}/${b}`,F)).json();if(ee.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(q){throw Sn.create("token-unsubscribe-failed",{errorInfo:q})}})).apply(this,arguments)}function Hr({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Is(D){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*({appConfig:D,installations:b}){const x=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function lt({p256dh:D,auth:b,endpoint:x,vapidKey:F}){const q={web:{endpoint:x,auth:b,p256dh:D}};return F!==jr&&(q.web.applicationPubKey=F),q}const za=6048e5;function oa(D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*(D){const b=yield Ju(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:li(b.getKey("auth")),p256dh:li(b.getKey("p256dh"))},F=yield pn(D.firebaseDependencies);if(F){if(bo(F.subscriptionOptions,x))return Date.now()>=F.createTime+za?Yu(D,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Qi(D.firebaseDependencies,F.token)}catch(q){console.warn(q)}return we(D.firebaseDependencies,x)}return we(D.firebaseDependencies,x)})).apply(this,arguments)}function Za(D){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,O.Z)(function*(D){const b=yield pn(D.firebaseDependencies);b&&(yield Qi(D.firebaseDependencies,b.token),yield Fc(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Yu(D,b){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(D,b){try{const x=yield Dr(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:x,createTime:Date.now()});return yield Es(D.firebaseDependencies,F),x}catch(x){throw yield Za(D),x}})).apply(this,arguments)}function we(D,b){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,O.Z)(function*(D,b){const F={token:yield sa(D,b),createTime:Date.now(),subscriptionOptions:b};return yield Es(D,F),F.token})).apply(this,arguments)}function Ju(D,b){return mn.apply(this,arguments)}function mn(){return(mn=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ba(b)})})).apply(this,arguments)}function bo(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Co(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Gr(D,b){if(!b.notification)return;D.notification={};const x=b.notification.title;x&&(D.notification.title=x);const F=b.notification.body;F&&(D.notification.body=F);const q=b.notification.image;q&&(D.notification.image=q)}(b,D),function Xu(D,b){!b.data||(D.data=b.data)}(b,D),function el(D,b){if(!b.fcmOptions)return;D.fcmOptions={};const x=b.fcmOptions.link;x&&(D.fcmOptions.link=x);const F=b.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(b,D),b}function Lc(D){return"object"==typeof D&&!!D&&Zs in D}function tl(D,b){const x=[];for(let F=0;F<D.length;F++)x.push(D.charAt(F)),F<b.length&&x.push(b.charAt(F));return x.join("")}function bs(D){return Sn.create("missing-app-config-values",{valueName:D})}tl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),tl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cr{constructor(b,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function Ya(D){if(!D||!D.options)throw bs("App Configuration Object");if(!D.name)throw bs("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const F of b)if(!x[F])throw bs(F);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:q,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ci(D){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Zu,{scope:_s}),D.swRegistration.update().catch(()=>{})}catch(b){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:b.message})}})).apply(this,arguments)}function Cs(D,b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield ci(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function nl(D,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=jr)})).apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(D,b){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield nl(D,null==b?void 0:b.vapidKey),yield Cs(D,null==b?void 0:b.serviceWorkerRegistration),oa(D)})).apply(this,arguments)}function aa(D,b,x){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b,x){const F=il(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Zs],message_name:x[ra],message_time:x[Pc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function il(D){switch(D){case vs.NOTIFICATION_CLICKED:return"notification_open";case vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Vc(){return(Vc=(0,O.Z)(function*(D,b){const x=b.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===vs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Co(x)):D.onMessageHandler.next(Co(x)));const F=x.data;Lc(F)&&"1"===F[bp]&&(yield aa(D,x.messageType,F))})).apply(this,arguments)}const ol="@firebase/messaging",Uc=D=>{const b=new cr(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function sl(D,b){return Vc.apply(this,arguments)}(b,x)),b},Js=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function Xa(D,b){return rl.apply(this,arguments)}(b,F)}};function jc(){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,O.Z)(function*(){try{yield(0,J.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bc(){(0,oe._registerComponent)(new pe.wA("messaging",Uc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",Js,"PRIVATE")),(0,oe.registerVersion)(ol,"0.9.11"),(0,oe.registerVersion)(ol,"0.9.11","esm2017")}();const ul="analytics",Km="firebase_id",la="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",eu="https://www.googletagmanager.com/gtag/js",Fn=new ie.Yd("@firebase/analytics");function $c(D){return Promise.all(D.map(b=>b.catch(x=>x)))}function Cp(D,b){const x=document.createElement("script");x.src=`${eu}?l=${D}&id=${b}`,x.async=!0,document.head.appendChild(x)}function To(D,b,x,F,q,ee){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,O.Z)(function*(D,b,x,F,q,ee){const Se=F[q];try{if(Se)yield b[Se];else{const Je=(yield $c(x)).find(mt=>mt.measurementId===q);Je&&(yield b[Je.appId])}}catch(ze){Fn.error(ze)}D("config",q,ee)})).apply(this,arguments)}function cl(D,b,x,F,q){return eo.apply(this,arguments)}function eo(){return(eo=(0,O.Z)(function*(D,b,x,F,q){try{let ee=[];if(q&&q.send_to){let Se=q.send_to;Array.isArray(Se)||(Se=[Se]);const ze=yield $c(x);for(const Je of Se){const mt=ze.find(Dt=>Dt.measurementId===Je),Lt=mt&&b[mt.appId];if(!Lt){ee=[];break}ee.push(Lt)}}0===ee.length&&(ee=Object.values(b)),yield Promise.all(ee),D("event",F,q||{})}catch(ee){Fn.error(ee)}})).apply(this,arguments)}function Tp(){const D=window.document.getElementsByTagName("script");for(const b of Object.values(D))if(b.src&&b.src.includes(eu))return b;return null}const vn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qr=new class gt{constructor(b={},x=1e3){this.throttleMetadata=b,this.intervalMillis=x}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,x){this.throttleMetadata[b]=x}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function Ao(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ca(D){return nn.apply(this,arguments)}function nn(){return(nn=(0,O.Z)(function*(D){var b;const{appId:x,apiKey:F}=D,q={method:"GET",headers:Ao(F)},ee=la.replace("{app-id}",x),Se=yield fetch(ee,q);if(200!==Se.status&&304!==Se.status){let ze="";try{const Je=yield Se.json();(null===(b=Je.error)||void 0===b?void 0:b.message)&&(ze=Je.error.message)}catch(Je){}throw vn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:ze})}return Se.json()})).apply(this,arguments)}function zr(D){return yn.apply(this,arguments)}function yn(){return(yn=(0,O.Z)(function*(D,b=qr,x){const{appId:F,apiKey:q,measurementId:ee}=D.options;if(!F)throw vn.create("no-app-id");if(!q){if(ee)return{measurementId:ee,appId:F};throw vn.create("no-api-key")}const Se=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new dl;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==x?x:6e4),$n({appId:F,apiKey:q,measurementId:ee},Se,ze,b)})).apply(this,arguments)}function $n(D,b,x){return It.apply(this,arguments)}function It(){return(It=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:x},F,q=qr){const{appId:ee,measurementId:Se}=D;try{yield Ap(F,b)}catch(ze){if(Se)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ee,measurementId:Se};throw ze}try{const ze=yield ca(D);return q.deleteThrottleMetadata(ee),ze}catch(ze){if(!qc(ze)){if(q.deleteThrottleMetadata(ee),Se)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${ze.message}]`),{appId:ee,measurementId:Se};throw ze}const Je=503===Number(ze.customData.httpStatus)?(0,J.$s)(x,q.intervalMillis,30):(0,J.$s)(x,q.intervalMillis),mt={throttleEndTimeMillis:Date.now()+Je,backoffCount:x+1};return q.setThrottleMetadata(ee,mt),Fn.debug(`Calling attemptFetch again in ${Je} millis`),$n(D,mt,F,q)}})).apply(this,arguments)}function Ap(D,b){return new Promise((x,F)=>{const q=Math.max(b-Date.now(),0),ee=setTimeout(x,q);D.addEventListener(()=>{clearTimeout(ee),F(vn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function qc(D){if(!(D instanceof J.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class dl{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}function zc(){return So.apply(this,arguments)}function So(){return(So=(0,O.Z)(function*(){if(!(0,J.hl)())return Fn.warn(vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(D){return Fn.warn(vn.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Kn(){return(Kn=(0,O.Z)(function*(D,b,x,F,q,ee,Se){var ze;const Je=zr(D);Je.then(Mn=>{x[Mn.measurementId]=Mn.appId,D.options.measurementId&&Mn.measurementId!==D.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Fn.error(Mn)),b.push(Je);const mt=zc().then(Mn=>{if(Mn)return F.getId()}),[Lt,Dt]=yield Promise.all([Je,mt]);Tp()||Cp(ee,Lt.measurementId),q("js",new Date);const xn=null!==(ze=null==Se?void 0:Se.config)&&void 0!==ze?ze:{};return xn.origin="firebase",xn.update=!0,null!=Dt&&(xn[Km]=Dt),q("config",Lt.measurementId,xn),Lt.measurementId})).apply(this,arguments)}class xs{constructor(b){this.app=b}_delete(){return delete Wr[this.app.options.appId],Promise.resolve()}}let Wr={},Ms=[];const hl={};let to,Rs,Di="dataLayer",da=!1;function Zr(D,b,x){!function tu(){const D=[];if((0,J.ru)()&&D.push("This is a browser extension environment."),(0,J.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,q)=>`(${q+1}) ${F}`).join(" "),x=vn.create("invalid-analytics-context",{errorInfo:b});Fn.warn(x.message)}}();const F=D.options.appId;if(!F)throw vn.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw vn.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wr[F])throw vn.create("already-exists",{id:F});if(!da){!function Xi(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Di);const{wrappedGtag:ee,gtagCore:Se}=function Mh(D,b,x,F,q){let ee=function(...Se){window[F].push(arguments)};return window[q]&&"function"==typeof window[q]&&(ee=window[q]),window[q]=function Gc(D,b,x,F){function ee(){return(ee=(0,O.Z)(function*(Se,ze,Je){try{"event"===Se?yield cl(D,b,x,ze,Je):"config"===Se?yield To(D,b,x,F,ze,Je):D("set",ze)}catch(mt){Fn.error(mt)}})).apply(this,arguments)}return function q(Se,ze,Je){return ee.apply(this,arguments)}}(ee,D,b,x),{gtagCore:ee,wrappedGtag:window[q]}}(Wr,Ms,hl,Di,"gtag");Rs=ee,to=Se,da=!0}return Wr[F]=function ts(D,b,x,F,q,ee,Se){return Kn.apply(this,arguments)}(D,Ms,hl,b,to,Di,x),new xs(D)}function fl(){return(fl=(0,O.Z)(function*(D,b,x,F,q){if(q&&q.global)D("event",x,F);else{const ee=yield b;D("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function pa(){return pl.apply(this,arguments)}function pl(){return(pl=(0,O.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(D){return!1}})).apply(this,arguments)}const xt="@firebase/analytics";!function Oh(){(0,oe._registerComponent)(new pe.wA(ul,(b,{options:x})=>Zr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function D(b){try{const x=b.getProvider(ul).getImmediate();return{logEvent:(F,q,ee)=>function gl(D,b,x,F){D=(0,J.m9)(D),function Rh(D,b,x,F,q){return fl.apply(this,arguments)}(Rs,Wr[D.app.options.appId],b,x,F).catch(q=>Fn.error(q))}(x,F,q,ee)}}catch(x){throw vn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(xt,"0.7.7"),(0,oe.registerVersion)(xt,"0.7.7","esm2017")}();var xp=k(4408),Qn=k(7565);const xo=new class Wt extends Qn.v{}(class no extends xp.o{constructor(b,x){super(b,x),this.scheduler=b,this.work=x}schedule(b,x=0){return x>0?super.schedule(b,x):(this.delay=x,this.state=b,this.scheduler.flush(this),this)}execute(b,x){return x>0||this.closed?super.execute(b,x):this._execute(b,x)}requestAsyncId(b,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,x,F):b.flush(this)}});var Mp=k(4986),ml=k(8505),Cr=k(9468),Kr=k(5363);const Kc=new g.GfV("7.3.0"),ks="__angularfire_symbol__analyticsIsSupportedValue",bi="__angularfire_symbol__analyticsIsSupported",Fi="__angularfire_symbol__remoteConfigIsSupportedValue",Vn="__angularfire_symbol__remoteConfigIsSupported",Mo="__angularfire_symbol__messagingIsSupportedValue",yl="__angularfire_symbol__messagingIsSupported";function Fs(D,b,x){if(b){if(1===b.length)return b[0];const ee=b.filter(Se=>Se.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[bi]||(globalThis[bi]=pa().then(D=>globalThis[ks]=D).catch(()=>globalThis[ks]=!1)),globalThis[yl]||(globalThis[yl]=jc().then(D=>globalThis[Mo]=D).catch(()=>globalThis[Mo]=!1)),globalThis[Vn]||(globalThis[Vn]=Ws().then(D=>globalThis[Fi]=D).catch(()=>globalThis[Fi]=!1));const Qc=(D,b)=>{const x=b?[b]:(0,K.C6)(),F=[];return x.forEach(q=>{q.container.getProvider(D).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ro(){}class iu{constructor(b,x=xo){this.zone=b,this.delegate=x}now(){return this.delegate.now()}schedule(b,x,F){const q=this.zone;return this.delegate.schedule(function(Se){q.runGuarded(()=>{b.apply(this,[Se])})},x,F)}}class Ph{constructor(b){this.zone=b,this.task=null}call(b,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),x.pipe((0,ml.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _l=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new iu(Zone.current)),this.insideAngular=x.run(()=>new iu(Zone.current,Mp.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Yr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function wl(D){return Yr(),function io(D){return function(x){return(x=x.lift(new Ph(D.ngZone))).pipe((0,Cr.R)(D.outsideAngular),(0,Kr.Q)(D.insideAngular))}}(Yr())(D)}},2090:(nt,Ce,k)=>{k.d(Ce,{$s:()=>Gs,BH:()=>Te,G6:()=>te,L:()=>ue,LL:()=>wt,Lj:()=>kt,Mn:()=>je,Sg:()=>Me,UG:()=>Ee,US:()=>ie,X3:()=>ut,ZB:()=>Q,ZR:()=>se,b$:()=>De,d:()=>_e,eu:()=>ne,hl:()=>z,jU:()=>Ke,m9:()=>at,ne:()=>st,pd:()=>Gi,r3:()=>Yt,ru:()=>Ge,tV:()=>B,uI:()=>de,vZ:()=>ds,w1:()=>ve,xO:()=>Ni,xb:()=>ir,z$:()=>Pe,zI:()=>ge,zd:()=>Rr});var g=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let Y=U.charCodeAt(le);Y<128?L[$++]=Y:Y<2048?(L[$++]=Y>>6|192,L[$++]=63&Y|128):55296==(64512&Y)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(Y=65536+((1023&Y)<<10)+(1023&U.charCodeAt(++le)),L[$++]=Y>>18|240,L[$++]=Y>>12&63|128,L[$++]=Y>>6&63|128,L[$++]=63&Y|128):(L[$++]=Y>>12|224,L[$++]=Y>>6&63|128,L[$++]=63&Y|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let Y=0;Y<U.length;Y+=3){const Le=U[Y],pt=Y+1<U.length,qt=pt?U[Y+1]:0,wr=Y+2<U.length,jt=wr?U[Y+2]:0;let dn=(15&qt)<<2|jt>>6,Zn=63&jt;wr||(Zn=64,pt||(dn=64)),le.push($[Le>>2],$[(3&Le)<<4|qt>>4],$[dn],$[Zn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const Y=U[$++];if(Y<128)L[le++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const Le=U[$++];L[le++]=String.fromCharCode((31&Y)<<6|63&Le)}else if(Y>239&&Y<365){const wr=((7&Y)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(wr>>10)),L[le++]=String.fromCharCode(56320+(1023&wr))}else{const Le=U[$++],pt=U[$++];L[le++]=String.fromCharCode((15&Y)<<12|(63&Le)<<6|63&pt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let Y=0;Y<U.length;){const Le=$[U.charAt(Y++)],qt=Y<U.length?$[U.charAt(Y)]:0;++Y;const jt=Y<U.length?$[U.charAt(Y)]:64;++Y;const At=Y<U.length?$[U.charAt(Y)]:64;if(++Y,null==Le||null==qt||null==jt||null==At)throw Error();le.push(Le<<2|qt>>4),64!==jt&&(le.push(qt<<4&240|jt>>2),64!==At&&le.push(jt<<6&192|At))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!$e($)||(U[$]=Q(U[$],L[$]));return U}function $e(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function Me(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",Y=U.iat||0,Le=U.sub||U.user_id;if(!Le)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:Y,exp:Y+3600,auth_time:Y,sub:Le,user_id:Le,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(pt)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ke(){return"object"==typeof self&&self.self===self}function Ge(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return Pe().indexOf("MSAppHost/")>=0}function te(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){return"object"==typeof indexedDB}function ne(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(le);Y.onsuccess=()=>{Y.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},Y.onupgradeneeded=()=>{$=!1},Y.onerror=()=>{var Le;L((null===(Le=Y.error)||void 0===Le?void 0:Le.message)||"")}}catch($){L($)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wt.prototype.create)}}class wt{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},Y=`${this.service}/${L}`,Le=this.errors[L],pt=Le?function Kt(U,L){return U.replace(Tn,($,le)=>{const Y=L[le];return null!=Y?String(Y):`<${le}?>`})}(Le,le):"Error";return new se(Y,`${this.serviceName}: ${pt} (${Y}).`,le)}}const Tn=/\{\$([^}]+)}/g;function Yt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function ir(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ds(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const Y of $){if(!le.includes(Y))return!1;const Le=U[Y],pt=L[Y];if(Mr(Le)&&Mr(pt)){if(!ds(Le,pt))return!1}else if(Le!==pt)return!1}for(const Y of le)if(!$.includes(Y))return!1;return!0}function Mr(U){return null!==U&&"object"==typeof U}function Ni(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(Y=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(Y))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Rr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[Y,Le]=le.split("=");L[decodeURIComponent(Y)]=decodeURIComponent(Le)}}),L}function Gi(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function st(U,L){const $=new Ur(U,L);return $.subscribe.bind($)}class Ur{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let Y;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");Y=function Bn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===Y.next&&(Y.next=oi),void 0===Y.error&&(Y.error=oi),void 0===Y.complete&&(Y.complete=oi);const Le=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(pt){}}),this.observers.push(Y),Le}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oi(){}function Gs(U,L=1e3,$=2){const le=L*Math.pow($,U),Y=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+Y)}function at(U){return U&&U._delegate?U._delegate:U}function Er(U,L){return new Promise(($,le)=>{U.onsuccess=Y=>{$(Y.target.result)},U.onerror=Y=>{var Le;le(`${L}: ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}})}class Ot{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$){return new qe(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new be(this._db.createObjectStore(L,$))}close(){this._db.close()}}class qe{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new be(this._transaction.objectStore(L))}}class be{constructor(L){this._store=L}index(L){return new Ze(this._store.index(L))}createIndex(L,$,le){return new Ze(this._store.createIndex(L,$,le))}get(L){return Er(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return Er(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return Er(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return Er(this._store.clear(),"Error clearing IndexedDB object store")}}class Ze{constructor(L){this._index=L}get(L){return Er(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,$){return new Promise((le,Y)=>{try{const Le=indexedDB.open(U,L);Le.onsuccess=pt=>{le(new Ot(pt.target.result))},Le.onerror=pt=>{var qt;Y(`Error opening indexedDB: ${null===(qt=pt.target.error)||void 0===qt?void 0:qt.message}`)},Le.onupgradeneeded=pt=>{$(new Ot(Le.result),pt.oldVersion,pt.newVersion,new qe(Le.transaction))}}catch(Le){Y(`Error opening indexedDB: ${Le.message}`)}})}function kt(U){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,g.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=Y=>{var Le;$(`Error deleting indexedDB database "${U}": ${null===(Le=Y.target.error)||void 0===Le?void 0:Le.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},6884:(nt,Ce,k)=>{var g=k(5e3);let K=null;function O(){return K}const ie=new g.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const B=new g.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function $e(){return new j((0,g.LFG)(ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(n){const e=(0,g.LFG)(ie).location;return new Ge((0,g.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new g.OlP("appBaseHref");let Ge=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const h=this.prepareExternalUrl(o+Pe(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){const h=this.prepareExternalUrl(o+Pe(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Ke,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let h=this.prepareExternalUrl(o+Pe(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){let h=this.prepareExternalUrl(o+Pe(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ce),g.LFG(Ke,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Me(Be(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Te,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(ce))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ve(){return new _e((0,g.LFG)(de),(0,g.LFG)(ce))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class gs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ur=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,l,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new gs(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===l?void 0:l);else if(null!==l){const m=r.get(l);r.move(m,h),Wi(m,o)}});for(let o=0,l=r.length;o<l;o++){const m=r.get(o).context;m.index=o,m.count=l,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Wi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Wi(n,e){n.context.$implicit=e.item}let Io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function lr(n){return"server"===n}let Ha=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new Ga((0,g.LFG)(ie),window)}),n})();class Ga{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ia(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Yi(this.window.history)||Yi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Yi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Es extends class Do extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){K||(K=n)}(new Es)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fc(){return an=an||document.querySelector("base"),an?an.getAttribute("href"):null}();return null==t?null:function Ys(n){Ks=Ks||document.createElement("a"),Ks.setAttribute("href",n);const e=Ks.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){an=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function vo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Ks,an=null;const Ir=new g.OlP("TRANSITION_ID"),sa=[{provide:g.ip1,useFactory:function Sn(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[Ir,ie,g.zs3],multi:!0}];class wi{static init(){(0,g.VLi)(new wi)}addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const m=function(w){h=h||w,l--,0==l&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Dr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ws=new g.OlP("EventManagerPlugins");let Qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ws),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Hr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Is=(()=>{class n extends Hr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ds),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ds))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ds(n){O().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},za=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(za,n),t.push(o))}return t}function Nt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new bo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Xu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new el(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Qi),g.LFG(Is),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class bo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=lt[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Nt(r)):this.eventManager.addEventListener(e,t,Nt(r))}}class Xu extends bo{constructor(e,t,r,o){super(e),this.component=r;const l=we(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function Yu(n){return"_ngcontent-%COMP%".replace(za,n)}(o+"-"+r.id),this.hostAttr=function Qu(n){return"_nghost-%COMP%".replace(za,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class el extends bo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=we(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const m=document.createElement("style");m.textContent=l[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lc=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const tl=["alt","control","meta","shift"],bs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ci={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qa=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(tl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),h+=w+".")}),h+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Cs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&cr.hasOwnProperty(e)&&(e=cr[e]))}return bs[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),tl.forEach(l=>{l!=o&&ci[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ie))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const rl=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Ii(){Es.makeCurrent(),wi.init()},multi:!0},{provide:ie,useFactory:function Ja(){return(0,g.RDi)(document),document},deps:[]}]),aa=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function nl(){return new g.qLn},deps:[]},{provide:ws,useClass:Lc,multi:!0,deps:[ie,g.R0b,g.Lbi]},{provide:ws,useClass:Qa,multi:!0,deps:[ie]},{provide:mn,useClass:mn,deps:[Qi,Is,g.AFp]},{provide:g.FYo,useExisting:mn},{provide:Hr,useExisting:Is},{provide:Is,useClass:Is,deps:[ie]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b]},{provide:Qi,useClass:Qi,deps:[ws,g.R0b]},{provide:class pn{},useClass:Dr,deps:[]}];let ua=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Ir,useExisting:g.AFp},sa]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(n,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:aa,imports:[Io,g.hGG]}),n})();"undefined"!=typeof window&&window;var es=k(2011),vn=k(7579),Ss=k(7669),Qt=k(8996);function gt(...n){const e=(0,Ss.yG)(n);return(0,Qt.D)(n,e)}var qr=k(8306),Ao=k(6451),ca=k(5363),nn=k(8421),zr=k(4482),yn=k(5403);function $n(n,e){return(0,zr.e)((t,r)=>{let o=null,l=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,yn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const M=l++;(0,nn.Xf)(n(w,M)).subscribe(o=(0,yn.x)(r,N=>r.next(e?e(w,N,M,C++):N),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var It=k(4004),Ap=k(6063);class qc extends vn.x{constructor(e=1/0,t=1/0,r=Ap.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:h}=this;t||(r.push(e),!o&&r.push(l.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let h=0;h<l.length&&!e.closed;h+=r?1:2)e.next(l[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var dl=k(3099);function zc(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,dl.B)({connector:()=>new qc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const ts=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Kn(n,e){return(0,zr.e)((t,r)=>{let o=0;t.subscribe((0,yn.x)(r,l=>n.call(e,l,o++)&&r.next(l)))})}var xs=k(5698);function Wr(n){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Ms(n=hl){return(0,zr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function hl(){return new ts}var Di=k(4671);function ns(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kn((o,l)=>n(o,l,r)):Di.y,(0,xs.q)(1),t?Wr(e):Ms(()=>new ts))}var to=k(576);function Rs(n,e){return(0,to.m)(e)?$n(()=>n,e):$n(()=>n)}var da=k(9468),Yn=k(5813);k(5867);var ye=k(5861),ga=k(9681),gl=k(4859),xt=k(2090),Os=k(1877);const Oh=new Map,xp={activated:!1,tokenObservers:[]},no={initialized:!1,enabled:!1};function Qn(n){return Oh.get(n)||xp}function Wt(n,e){Oh.set(n,e)}function xo(){return no}class ks{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new xt.BH,yield function bi(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vn=new xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yl(n){if(!Qn(n).activated)throw Vn.create("use-before-activation",{appName:n.name})}function ru(n,e){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const l={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,l)}catch(N){throw Vn.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw Vn.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw Vn.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Vn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+C,issuedAtTimeMillis:M}})).apply(this,arguments)}function iu(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Yr="firebase-app-check-store";let Nr=null;function vl(){return Nr||(Nr=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Vn.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Yr,{keyPath:"compositeKey"})}}catch(t){e(Vn.create("storage-open",{originalErrorMessage:t.message}))}}),Nr)}function D(){return(D=(0,ye.Z)(function*(n,e){const r=(yield vl()).transaction(Yr,"readwrite"),l=r.objectStore(Yr).put({compositeKey:n,value:e});return new Promise((h,m)=>{l.onsuccess=w=>{h()},r.onerror=w=>{var C;m(Vn.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const q=new Os.Yd("@firebase/app-check");function ze(n,e){return(0,xt.hl)()?function wl(n,e){return function su(n,e){return D.apply(this,arguments)}(function F(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{q.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lt(){return xo().enabled}function Dt(){return xn.apply(this,arguments)}function xn(){return(xn=(0,ye.Z)(function*(){const n=xo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ro={error:"UNKNOWN_ERROR"};function ou(n){return xt.US.encodeString(JSON.stringify(n),!1)}function Qr(n){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,ye.Z)(function*(n,e=!1){const t=n.app;yl(t);const r=Qn(t);let l,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&so(w)&&(o=w)}if(!e&&o&&so(o))return{token:o.token};let m,h=!1;if(Lt()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ru(iu(t,yield Dt()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const w=yield r.exchangeTokenPromise;return yield ze(t,w),Wt(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?q.warn(w.message):q.error(w),l=w}return o?(m={token:o.token},Wt(t,Object.assign(Object.assign({},r),{token:o})),yield ze(t,o)):m=Np(l),h&&Il(t,m),m})).apply(this,arguments)}function rs(n,e){const t=Qn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Wt(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function kh(n){const{app:e}=n,t=Qn(e);let r=t.tokenRefresher;r||(r=function Rp(n){const{app:e}=n;return new ks((0,ye.Z)(function*(){let r;if(r=Qn(e).token?yield Qr(n,!0):yield Qr(n),r.error)throw r.error}),()=>!0,()=>{const t=Qn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Wt(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Il(n,e){const t=Qn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function so(n){return n.expireTimeMillis-Date.now()>0}function Np(n){return{token:ou(Ro),error:n}}class Qm{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qn(this.app);for(const t of e)rs(this.app,t.next);return Promise.resolve()}}const Fp="app-check-internal";!function Ls(){(0,ga._registerComponent)(new gl.wA("app-check",n=>function Jm(n,e){return new Qm(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Fp).initialize()})),(0,ga._registerComponent)(new gl.wA(Fp,n=>function No(n){return{getToken:e=>Qr(n,e),addTokenListener:e=>function Li(n,e,t,r){const{app:o}=n,l=Qn(o),h={next:t,error:r,type:e};if(Wt(o,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]})),l.token&&so(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),kh(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>kh(n))}(n,"INTERNAL",e),removeTokenListener:e=>rs(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ga.registerVersion)("@firebase/app-check","0.5.5")}();class Lp{constructor(){return(0,Yn.vb)("app-check")}}"undefined"!=typeof window&&window;var jh=k(127);const $h=new g.OlP("angularfire2.auth.use-emulator"),dy=new g.OlP("angularfire2.auth.settings"),Hh=new g.OlP("angularfire2.auth.tenant-id"),hy=new g.OlP("angularfire2.auth.langugage-code"),od=new g.OlP("angularfire2.auth.use-device-language"),ad=new g.OlP("angularfire.auth.persistence"),ud=(n,e,t,r,o,l,h,m)=>(0,es.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,l&&w.useDeviceLanguage(),h)for(const[C,M]of Object.entries(h))w.settings[C]=M;return m&&w.setPersistence(m),w},[t,r,o,l,h,m]);let Up=(()=>{class n{constructor(t,r,o,l,h,m,w,C,M,N,H,Z){const fe=new vn.x,Fe=gt(void 0).pipe((0,ca.Q)(h.outsideAngular),$n(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,4087)))),(0,It.U)(()=>(0,es.on)(t,l,r)),(0,It.U)(tt=>ud(tt,l,m,C,M,N,w,H)),zc({bufferSize:1,refCount:!1}));if(lr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{Fe.pipe(ns()).subscribe();const Zt=Fe.pipe($n(bt=>bt.getRedirectResult().then(Ht=>Ht,()=>null)),Yn.iC,zc({bufferSize:1,refCount:!1})),ht=Fe.pipe($n(bt=>new qr.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>bt.onAuthStateChanged(Gt=>Ht.next(Gt),Gt=>Ht.error(Gt),()=>Ht.complete()))})))),wn=Fe.pipe($n(bt=>new qr.y(Ht=>({unsubscribe:l.runOutsideAngular(()=>bt.onIdTokenChanged(Gt=>Ht.next(Gt),Gt=>Ht.error(Gt),()=>Ht.complete()))}))));this.authState=Zt.pipe(Rs(ht),(0,da.R)(h.outsideAngular),(0,ca.Q)(h.insideAngular)),this.user=Zt.pipe(Rs(wn),(0,da.R)(h.outsideAngular),(0,ca.Q)(h.insideAngular)),this.idToken=this.user.pipe($n(bt=>bt?(0,Qt.D)(bt.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe($n(bt=>bt?(0,Qt.D)(bt.getIdTokenResult()):gt(null))),this.credential=(0,Ao.T)(Zt,fe,this.authState.pipe(Kn(bt=>!bt))).pipe((0,It.U)(bt=>(null==bt?void 0:bt.user)?bt:null),(0,da.R)(h.outsideAngular),(0,ca.Q)(h.insideAngular))}return(0,es.pX)(this,Fe,l,{spy:{apply:(tt,Zt,ht)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&ht.then(wn=>fe.next(wn))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(es.Dh),g.LFG(es.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Yn.HU),g.LFG($h,8),g.LFG(dy,8),g.LFG(Hh,8),g.LFG(hy,8),g.LFG(od,8),g.LFG(ad,8),g.LFG(Lp,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fy=(()=>{class n{constructor(){jh.Z.registerVersion("angularfire",Yn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[Up]}),n})();var ld=k(4986),cd=k(8189);function Tl(...n){return function py(){return(0,cd.J)(1)}()((0,Qt.D)(n,(0,Ss.yG)(n)))}function du(...n){const e=(0,Ss.yG)(n);return(0,zr.e)((t,r)=>{(e?Tl(n,t,e):Tl(n,t)).subscribe(r)})}function dd(){return(0,zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}function hd(n,e,t,r,o){return(l,h)=>{let m=t,w=e,C=0;l.subscribe((0,yn.x)(h,M=>{const N=C++;w=m?n(w,M,N):(m=!0,M),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Oo(n,e){return(0,zr.e)(hd(n,e,arguments.length>=2,!0))}function gy(n,e){return n===e}k(4087);var We,Bp=k(3942),my="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ss={},qh=qh||{},vt=my||self;function fd(){}function pd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Al(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jp="closure_uid_"+(1e9*Math.random()>>>0),Sl=0;function Or(n,e,t){return n.call.apply(n.bind,arguments)}function xl(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Hn(n,e,t){return(Hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Or:xl).apply(null,arguments)}function hu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jt(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function hi(){this.s=this.s,this.o=this.o}var Ci={};hi.prototype.s=!1,hi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function z0(n){return Object.prototype.hasOwnProperty.call(n,jp)&&n[jp]||(n[jp]=++Sl)}(this);delete Ci[n]}},hi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fu=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},gd=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function Ml(n){return Array.prototype.concat.apply([],arguments)}function Rl(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Nl(n){return/^[\s\xa0]*$/.test(n)}var Pr,Wh=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xr(n,e){return-1!=n.indexOf(e)}function Vi(n,e){return n<e?-1:n>e?1:0}e:{var $p=vt.navigator;if($p){var md=$p.userAgent;if(md){Pr=md;break e}}Pr=""}function Zh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Kh(n){const e={};for(const t in n)e[t]=n[t];return e}var hr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yd(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<hr.length;l++)t=hr[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ol(n){return Ol[" "](n),n}Ol[" "]=fd;var Ed,n,oo=Xr(Pr,"Opera"),Vs=Xr(Pr,"Trident")||Xr(Pr,"MSIE"),_d=Xr(Pr,"Edge"),vd=_d||Vs,Hp=Xr(Pr,"Gecko")&&!(Xr(Pr.toLowerCase(),"webkit")&&!Xr(Pr,"Edge"))&&!(Xr(Pr,"Trident")||Xr(Pr,"MSIE"))&&!Xr(Pr,"Edge"),Yh=Xr(Pr.toLowerCase(),"webkit")&&!Xr(Pr,"Edge");function Gp(){var n=vt.document;return n?n.documentMode:void 0}e:{var Qh="",Jh=(n=Pr,Hp?/rv:([^\);]+)(\)|;)/.exec(n):_d?/Edge\/([\d\.]+)/.exec(n):Vs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Yh?/WebKit\/(\S+)/.exec(n):oo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Jh&&(Qh=Jh?Jh[1]:""),Vs){var y=Gp();if(null!=y&&y>parseFloat(Qh)){Ed=String(y);break e}}Ed=Qh}var d={};var R=vt.document&&Vs&&(Gp()||parseInt(Ed,10))||void 0,G=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",fd,e),vt.removeEventListener("test",fd,e)}catch(t){}return n}();function X(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function ke(n,e){if(X.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Hp){e:{try{Ol(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ye[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ke.Z.h.call(this)}}X.prototype.h=function(){this.defaultPrevented=!0},Jt(ke,X);var Ye={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),it=0;function bn(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++it,this.ca=this.fa=!1}function ei(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Po(n){this.src=n,this.g={},this.h=0}function pu(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=fu(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(ei(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function _a(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}Po.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=_a(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new bn(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var Pl="closure_lm_"+(1e6*Math.random()|0),Xh={};function ao(n,e,t,r,o){if(r&&r.once)return wd(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)ao(n,e[l],t,r,o);return null}return t=Iy(t),n&&n[ot]?n.N(e,t,Al(r)?!!r.capture:!!r,o):kl(n,e,t,!1,r,o)}function kl(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=Al(o)?!!o.capture:!!o,m=Ey(n);if(m||(n[Pl]=m=new Po(n)),(t=m.add(e,t,r,h,l)).proxy)return t;if(r=function ef(){var e=vy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)G||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Id(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wd(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)wd(n,e[l],t,r,o);return null}return t=Iy(t),n&&n[ot]?n.O(e,t,Al(r)?!!r.capture:!!r,o):kl(n,e,t,!0,r,o)}function Fl(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)Fl(n,e[l],t,r,o);else r=Al(r)?!!r.capture:!!r,t=Iy(t),n&&n[ot]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=_a(l=n.g[e],t,r,o))&&(ei(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Ey(n))&&(e=n.g[e.toString()],n=-1,e&&(n=_a(e,t,r,o)),(t=-1<n?e[n]:null)&&tf(t))}function tf(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ot])pu(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Id(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ey(e))?(pu(t,n),0==t.h&&(t.src=null,e[Pl]=null)):ei(n)}}}function Id(n){return n in Xh?Xh[n]:Xh[n]="on"+n}function vy(n,e){if(n.ca)n=!0;else{e=new ke(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&tf(n),n=t.call(r,e)}return n}function Ey(n){return(n=n[Pl])instanceof Po?n:null}var wy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iy(n){return"function"==typeof n?n:(n[wy]||(n[wy]=function(e){return n.handleEvent(e)}),n[wy])}function Tr(){hi.call(this),this.i=new Po(this),this.P=this,this.I=null}function Ar(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new X(e,n);else if(e instanceof X)e.target=e.target||n;else{var o=e;yd(e=new X(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=nf(h,r,!0,e)&&o}if(o=nf(h=e.g=n,r,!0,e)&&o,o=nf(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=nf(h=e.g=t[l],r,!1,e)&&o}function nf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&pu(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Jt(Tr,hi),Tr.prototype[ot]=!0,Tr.prototype.removeEventListener=function(n,e,t,r){Fl(this,n,e,t,r)},Tr.prototype.M=function(){if(Tr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)ei(t[r]);delete n.g[e],n.h--}}this.I=null},Tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rf=vt.JSON.stringify;function ED(){var n=Z0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zp,Dy=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new W0,n=>n.reset());class W0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ll(n){vt.setTimeout(()=>{throw n},0)}function qp(n,e){zp||function ID(){var n=vt.Promise.resolve(void 0);zp=function(){n.then(K0)}}(),Dd||(zp(),Dd=!0),Z0.add(n,e)}var Dd=!1,Z0=new class wD{constructor(){this.h=this.g=null}add(e,t){const r=Dy.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function K0(){for(var n;n=ED();){try{n.h.call(n.g)}catch(t){Ll(t)}var e=Dy;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dd=!1}function sf(n,e){Tr.call(this),this.h=n||1,this.g=e||vt,this.j=Hn(this.kb,this),this.l=Date.now()}function Wp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function of(n,e,t){if("function"==typeof n)t&&(n=Hn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hn(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function by(n){n.g=of(()=>{n.g=null,n.i&&(n.i=!1,by(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jt(sf,Tr),(We=sf.prototype).da=!1,We.S=null,We.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ar(this,"tick"),this.da&&(Wp(this),this.start()))}},We.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.M=function(){sf.Z.M.call(this),Wp(this),delete this.g};class Zp extends hi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:by(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gu(n){hi.call(this),this.h=n,this.g={}}Jt(gu,hi);var Cy=[];function Kp(n,e,t,r){Array.isArray(t)||(t&&(Cy[0]=t.toString()),t=Cy);for(var o=0;o<t.length;o++){var l=ao(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Ty(n){Zh(n.g,function(e,t){this.g.hasOwnProperty(t)&&tf(e)},n),n.g={}}function bd(){this.g=!0}function Vl(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function CD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return rf(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}gu.prototype.M=function(){gu.Z.M.call(this),Ty(this)},gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bd.prototype.Aa=function(){this.g=!1},bd.prototype.info=function(){};var mu={},Yp=null;function uf(){return Yp=Yp||new Tr}function TD(n){X.call(this,mu.Ma,n)}function Cd(n){const e=uf();Ar(e,new TD(e,n))}function Y0(n,e){X.call(this,mu.STAT_EVENT,n),this.stat=e}function fi(n){const e=uf();Ar(e,new Y0(e,n))}function Q0(n,e){X.call(this,mu.Na,n),this.size=e}function lf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}mu.Ma="serverreachability",Jt(TD,X),mu.STAT_EVENT="statevent",Jt(Y0,X),mu.Na="timingevent",Jt(Q0,X);var Ui={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},J0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qp(){}function eE(){}Qp.prototype.h=null;var Sy,cf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ay(){X.call(this,"d")}function Jp(){X.call(this,"c")}function Xp(){}function df(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new gu(this),this.P=tE,this.W=new sf(n=vd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}Jt(Ay,X),Jt(Jp,X),Jt(Xp,Qp),Xp.prototype.g=function(){return new XMLHttpRequest},Xp.prototype.i=function(){return{}},Sy=new Xp;var tE=45e3,eg={},hf={};function Td(n,e,t){n.K=1,n.v=Ry(wa(e)),n.s=t,n.U=!0,Us(n,null)}function Us(n,e){n.F=Date.now(),os(n),n.A=wa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ia(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Tt,n.g=mg(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Zp(Hn(n.Ia,n,n.g),n.O)),Kp(n.V,n.g,"readystatechange",n.gb),e=n.H?Kh(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Cd(1),function af(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",m=l.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");h=2<=N.length&&"type"==N[1]?h+(M+"=")+C+"&":h+(M+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function xy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function nE(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=My(n,t),o==hf){4==e&&(n.o=4,fi(14),r=!1),Vl(n.j,n.m,null,"[Incomplete Response]");break}if(o==eg){n.o=4,fi(15),Vl(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vl(n.j,n.m,o,null),ng(n,o)}xy(n)&&o!=hf&&o!=eg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),By(e),e.L=!0,fi(11))):(Vl(n.j,n.m,t,"[Invalid Chunked Response]"),Ad(n),Ul(n))}function My(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?hf:(t=Number(e.substring(t,r)),isNaN(t)?eg:(r+=1)+t>e.length?hf:(e=e.substr(r,t),n.C=r+t,e))}function os(n){n.Y=Date.now()+n.P,tg(n,n.P)}function tg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lf(Hn(n.eb,n),e)}function ff(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function Ul(n){0==n.l.G||n.I||vE(n.l,n)}function Ad(n){ff(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Wp(n.W),Ty(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ng(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ko(t.i,n)))if(t.I=n.N,!n.J&&ko(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=lf(Hn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;gg(t),Fy(t)}pg(t),fi(18)}if(1>=aE(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Eu(t,11)}else if((n.J||t.g==n)&&gg(t),!Nl(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const fe=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var l=r.i;!l.g&&(Xr(fe,"spdy")||Xr(fe,"quic")||Xr(fe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(lg(l,l.h),l.h=null))}if(r.D){const Fe=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,Rn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=uo(r,r.H?r.la:null,r.W),h.J){uE(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(ff(m),os(m)),r.g=h}else _E(r);0<t.l.length&&fg(t)}else"stop"!=C[0]&&"close"!=C[0]||Eu(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Eu(t,7):gE(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Cd(4)}catch(C){}}function Sd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pd(n)||"string"==typeof n)gd(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(pd(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function fT(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(pd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function va(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof va)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function pf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ea(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Ea(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Ea(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(We=df.prototype).setTimeout=function(n){this.P=n},We.gb=function(n){n=n.target;const e=this.L;e&&3==Vo(n)?e.l():this.Ia(n)},We.Ia=function(n){try{if(n==this.g)e:{const M=Vo(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||vd||this.g&&(this.h.h||this.g.ga()||fE(this.g)))){this.I||4!=M||7==e||Cd(8==e||0>=N?3:2),ff(this);var t=this.g.ba();this.N=t;t:if(xy(this)){var r=fE(this.g);n="";var o=r.length,l=4==Vo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ad(this),Ul(this);var h="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function DD(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nl(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,fi(12),Ad(this),Ul(this);break e}Vl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ng(this,t)}this.U?(nE(this,M,h),vd&&this.i&&3==M&&(Kp(this.V,this.W,"tick",this.fb),this.W.start())):(Vl(this.j,this.m,h,null),ng(this,h)),4==M&&Ad(this),this.i&&!this.I&&(4==M?vE(this.l,this):(this.i=!1,os(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,fi(12)):(this.o=0,fi(13)),Ad(this),Ul(this)}}}catch(M){}},We.fb=function(){if(this.g){var n=Vo(this.g),e=this.g.ga();this.C<e.length&&(ff(this),nE(this,n,e),this.i&&4!=n&&os(this))}},We.cancel=function(){this.I=!0,Ad(this)},We.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function bD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Cd(3),fi(17)),Ad(this),this.o=2,Ul(this)):tg(this,this.Y-n)},(We=va.prototype).R=function(){pf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},We.T=function(){return pf(this),this.g.concat()},We.get=function(n,e){return Ea(this.h,n)?this.h[n]:e},We.set=function(n,e){Ea(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},We.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var rg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bl){this.g=void 0!==e?e:n.g,ig(this,n.j),this.s=n.s,sg(this,n.i),gf(this,n.m),this.l=n.l,e=n.h;var t=new og;t.i=e.i,e.g&&(t.g=new va(e.g),t.h=e.h),AD(this,t),this.o=n.o}else n&&(t=String(n).match(rg))?(this.g=!!e,ig(this,t[1]||"",!0),this.s=mf(t[2]||""),sg(this,t[3]||"",!0),gf(this,t[4]),this.l=mf(t[5]||"",!0),AD(this,t[6]||"",!0),this.o=mf(t[7]||"")):(this.g=!!e,this.h=new og(null,this.g))}function wa(n){return new Bl(n)}function ig(n,e,t){n.j=t?mf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function sg(n,e,t){n.i=t?mf(e,!0):e}function gf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function AD(n,e,t){e instanceof og?(n.h=e,function RD(n,e){e&&!n.j&&($l(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(xD(this,r),Ia(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=jl(e,_T)),n.h=new og(e,n.g))}function Rn(n,e,t){n.h.set(e,t)}function Ry(n){return Rn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function jl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(jl(e,SD,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(jl(e,SD,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(jl(t,"/"==t.charAt(0)?yT:mT,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",jl(t,vT)),n.join("")};var SD=/[#\/\?@]/g,mT=/[#\?:]/g,yT=/[#\?]/g,_T=/[#\?@]/g,vT=/#/g;function og(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function $l(n){n.g||(n.g=new va,n.h=0,n.i&&function pT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xD(n,e){$l(n),e=yu(n,e),Ea(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ea((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&pf(n)))}function MD(n,e){return $l(n),e=yu(n,e),Ea(n.g.h,e)}function Ia(n,e,t){xD(n,e),0<t.length&&(n.i=null,n.g.set(yu(n,e),Rl(t)),n.h+=t.length)}function yu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ag(n){this.l=n||oE,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=og.prototype).add=function(n,e){$l(this),this.i=null,n=yu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},We.forEach=function(n,e){$l(this),this.g.forEach(function(t,r){gd(t,function(o){n.call(e,o,r,this)},this)},this)},We.T=function(){$l(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},We.R=function(n){$l(this);var e=[];if("string"==typeof n)MD(this,n)&&(e=Ml(e,this.g.get(yu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Ml(e,n[t])}return e},We.set=function(n,e){return $l(this),this.i=null,MD(this,n=yu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},We.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var oE=10;function ug(n){return!!n.h||!!n.g&&n.g.size>=n.j}function aE(n){return n.h?1:n.g?n.g.size:0}function ko(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lg(n,e){n.g?n.g.add(e):n.h=e}function uE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cg(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Rl(n.i)}function Ny(){}function lE(){this.g=new Ny}function ND(n,e,t){const r=t||"";try{Sd(n,function(o,l){let h=o;Al(o)&&(h=rf(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function _u(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function Fo(n){this.l=n.$b||null,this.j=n.ib||!1}function xd(n,e){Tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=vu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ag.prototype.cancel=function(){if(this.i=cg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ny.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},Ny.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},Jt(Fo,Qp),Fo.prototype.g=function(){return new xd(this.l,this.j)},Fo.prototype.i=function(n){return function(){return n}}({}),Jt(xd,Tr);var vu=0;function Md(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Lo(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yf(n)}function yf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(We=xd.prototype).open=function(n,e){if(this.readyState!=vu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yf(this)},We.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lo(this)),this.readyState=vu},We.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yf(this)),this.g&&(this.readyState=3,yf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Md(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},We.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Lo(this):yf(this),3==this.readyState&&Md(this)}},We.Ua=function(n){this.g&&(this.response=this.responseText=n,Lo(this))},We.Ta=function(n){this.g&&(this.response=n,Lo(this))},We.ha=function(){this.g&&Lo(this)},We.setRequestHeader=function(n,e){this.v.append(n,e)},We.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cE=vt.JSON.parse;function Xn(n){Tr.call(this),this.headers=new va,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dg,this.K=this.L=!1}Jt(Xn,Tr);var dg="",Oy=/^https?$/i,dE=["POST","PUT"];function PD(n){return"content-type"==n.toLowerCase()}function Py(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kD(n),_f(n)}function kD(n){n.D||(n.D=!0,Ar(n,"complete"),Ar(n,"error"))}function ky(n){if(n.h&&void 0!==qh&&(!n.C[1]||4!=Vo(n)||2!=n.ba()))if(n.v&&4==Vo(n))of(n.Fa,0,n);else if(Ar(n,"readystatechange"),4==Vo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(rg)[1]||null;if(!o&&vt.self&&vt.self.location){var l=vt.self.location.protocol;o=l.substr(0,l.length-1)}r=!Oy.test(o?o.toLowerCase():"")}t=r}if(t)Ar(n,"complete"),Ar(n,"success");else{n.m=6;try{var h=2<Vo(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",kD(n)}}finally{_f(n)}}}function _f(n,e){if(n.g){hE(n);const t=n.g,r=n.C[0]?fd:null;n.g=null,n.C=null,e||Ar(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function hE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function Vo(n){return n.g?n.g.readyState:0}function fE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case dg:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ti(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function FD(n){let e="";return Zh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Rn(n,e,t))}function vf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function pE(n){this.za=0,this.l=[],this.h=new bd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vf("baseRetryDelayMs",5e3,n),this.$a=vf("retryDelaySeedMs",1e4,n),this.Ya=vf("forwardChannelMaxRetries",2,n),this.ra=vf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new ag(n&&n.concurrentRequestLimit),this.Ca=new lE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function gE(n){if(Ly(n),3==n.G){var e=n.V++,t=wa(n.F);Rn(t,"SID",n.J),Rn(t,"RID",e),Rn(t,"TYPE","terminate"),Ef(n,t),(e=new df(n,n.h,e,void 0)).K=2,e.v=Ry(wa(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=mg(e.l,null),e.g.ea(e.v)),e.F=Date.now(),os(e)}EE(n)}function Fy(n){n.g&&(By(n),n.g.cancel(),n.g=null)}function Ly(n){Fy(n),n.u&&(vt.clearTimeout(n.u),n.u=null),gg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function mE(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&fg(n)}function fg(n){ug(n.i)||n.m||(n.m=!0,qp(n.Ha,n),n.C=0)}function Uy(n,e){var t;t=e?e.m:n.V++;const r=wa(n.F);Rn(r,"SID",n.J),Rn(r,"RID",t),Rn(r,"AID",n.U),Ef(n,r),n.o&&n.s&&Ti(r,n.o,n.s),t=new df(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=yE(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),lg(n.i,t),Td(t,r,e)}function Ef(n,e){n.j&&Sd({},function(t,r){Rn(e,r,t)})}function yE(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hn(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const M=o[w].g;if(C-=l,0>C)l=Math.max(0,o[w].h-100),m=!1;else try{ND(M,h,"req"+C+"_")}catch(N){r&&r(M)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function _E(n){n.g||n.u||(n.Y=1,qp(n.Ga,n),n.A=0)}function pg(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=lf(Hn(n.Ga,n),$y(n,n.A)),n.A++,0))}function By(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function jy(n){n.g=new df(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=wa(n.oa);Rn(e,"RID","rpc"),Rn(e,"SID",n.J),Rn(e,"CI",n.N?"0":"1"),Rn(e,"AID",n.U),Ef(n,e),Rn(e,"TYPE","xmlhttp"),n.o&&n.s&&Ti(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ry(wa(e)),t.s=null,t.U=!0,Us(t,n)}function gg(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function vE(n,e){var t=null;if(n.g==e){gg(n),By(n),n.g=null;var r=2}else{if(!ko(n.i,e))return;t=e.D,uE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Ar(r=uf(),new Q0(r,t,e,o)),fg(n)}else _E(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Vy(n,e){return!(aE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=lf(Hn(n.Ha,n,e),$y(n,n.C)),n.C++,0)))}(n,e)||2==r&&pg(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Eu(n,5);break;case 4:Eu(n,10);break;case 3:Eu(n,6);break;default:Eu(n,2)}}function $y(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Eu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hn(n.jb,n);t||(t=new Bl("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||ig(t,"https"),Ry(t)),function OD(n,e){const t=new bd;if(vt.Image){const r=new Image;r.onload=hu(_u,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hu(_u,t,r,"TestLoadImage: error",!1,e),r.onabort=hu(_u,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hu(_u,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fi(2);n.G=0,n.j&&n.j.va(e),EE(n),Ly(n)}function EE(n){n.G=0,n.I=-1,n.j&&((0!=cg(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Rl(n.l),n.l.length=0),n.j.ua())}function uo(n,e,t){let r=function rE(n){return n instanceof Bl?wa(n):new Bl(n,void 0)}(t);if(""!=r.i)e&&sg(r,e+"."+r.i),gf(r,r.m);else{const o=vt.location;r=function iE(n,e,t,r){var o=new Bl(null,void 0);return n&&ig(o,n),e&&sg(o,e),t&&gf(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Zh(n.aa,function(o,l){Rn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Rn(r,e,t),Rn(r,"VER",n.ma),Ef(n,r),r}function mg(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&n.Ba&&!n.qa?new Fo({ib:!0}):n.qa)).L=n.H,e}function wE(){}function yg(){if(Vs&&!(10<=Number(R)))throw Error("Environmental error: no available transport.")}function Bs(n,e){Tr.call(this),this.g=new pE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Nl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rd(this)}function Hy(n){Ay.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function IE(){Jp.call(this),this.status=1}function Rd(n){this.g=n}(We=Xn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sy.g(),this.C=function X0(n){return n.h||(n.h=n.i())}(this.u?this.u:Sy),this.g.onreadystatechange=Hn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Py(this,l)}n=t||"";const o=new va(this.headers);r&&Sd(r,function(l,h){o.set(h,l)}),r=function yy(n){e:{var e=PD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=fu(dE,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hE(this),0<this.B&&((this.K=function hg(n){return Vs&&function p(){return function _y(n){var e=d;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Wh(String(Ed)).split("."),t=Wh("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Vi(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Vi(0==o[2].length,0==l[2].length)||Vi(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hn(this.pa,this)):this.A=of(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Py(this,l)}},We.pa=function(){void 0!==qh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ar(this,"timeout"),this.abort(8))},We.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ar(this,"complete"),Ar(this,"abort"),_f(this))},We.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_f(this,!0)),Xn.Z.M.call(this)},We.Fa=function(){this.s||(this.F||this.v||this.l?ky(this):this.cb())},We.cb=function(){ky(this)},We.ba=function(){try{return 2<Vo(this)?this.g.status:-1}catch(n){return-1}},We.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},We.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cE(e)}},We.Da=function(){return this.m},We.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=pE.prototype).ma=8,We.G=1,We.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},We.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new df(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Kh(l),yd(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yE(this,o,e),Rn(t=wa(this.F),"RID",n),Rn(t,"CVER",22),this.D&&Rn(t,"X-HTTP-Session-Id",this.D),Ef(this,t),this.o&&l&&Ti(t,this.o,l),lg(this.i,o),this.Ra&&Rn(t,"TYPE","init"),this.ja?(Rn(t,"$req",e),Rn(t,"SID","null"),o.$=!0,Td(o,t,null)):Td(o,t,e),this.G=2}}else 3==this.G&&(n?Uy(this,n):0==this.l.length||ug(this.i)||Uy(this))},We.Ga=function(){if(this.u=null,jy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=lf(Hn(this.bb,this),n)}},We.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fi(10),Fy(this),jy(this))},We.ab=function(){null!=this.v&&(this.v=null,Fy(this),pg(this),fi(19))},We.jb=function(n){n?(this.h.info("Successfully pinged google.com"),fi(2)):(this.h.info("Failed to ping google.com"),fi(1))},(We=wE.prototype).xa=function(){},We.wa=function(){},We.va=function(){},We.ua=function(){},We.Oa=function(){},yg.prototype.g=function(n,e){return new Bs(n,e)},Jt(Bs,Tr),Bs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),qp(Hn(n.hb,n,e))),fi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=uo(n,null,n.W),fg(n)},Bs.prototype.close=function(){gE(this.g)},Bs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,mE(this.g,e)}else this.v?((e={}).__data__=rf(n),mE(this.g,e)):mE(this.g,n)},Bs.prototype.M=function(){this.g.j=null,delete this.j,gE(this.g),delete this.g,Bs.Z.M.call(this)},Jt(Hy,Ay),Jt(IE,Jp),Jt(Rd,wE),Rd.prototype.xa=function(){Ar(this.g,"a")},Rd.prototype.wa=function(n){Ar(this.g,new Hy(n))},Rd.prototype.va=function(n){Ar(this.g,new IE(n))},Rd.prototype.ua=function(){Ar(this.g,"b")},yg.prototype.createWebChannel=yg.prototype.g,Bs.prototype.send=Bs.prototype.u,Bs.prototype.open=Bs.prototype.m,Bs.prototype.close=Bs.prototype.close,Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,J0.COMPLETE="complete",eE.EventType=cf,cf.OPEN="a",cf.CLOSE="b",cf.ERROR="c",cf.MESSAGE="d",Tr.prototype.listen=Tr.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.La,Xn.prototype.getLastErrorCode=Xn.prototype.Da,Xn.prototype.getStatus=Xn.prototype.ba,Xn.prototype.getResponseJson=Xn.prototype.Qa,Xn.prototype.getResponseText=Xn.prototype.ga,Xn.prototype.send=Xn.prototype.ea;var LD=ss.createWebChannelTransport=function(){return new yg},Gy=ss.getStatEventTarget=function(){return uf()},qy=ss.ErrorCode=Ui,VD=ss.EventType=J0,_g=ss.Event=mu,vg=ss.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},UD=ss.FetchXmlHttpFactory=Fo,Nd=ss.WebChannel=eE,zy=ss.XhrIo=Xn;const Wy="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Od="9.6.10";const Uo=new Os.Yd("@firebase/firestore");function DE(){return Uo.logLevel}function Ne(n,...e){if(Uo.logLevel<=Os.in.DEBUG){const t=e.map(Eg);Uo.debug(`Firestore (${Od}): ${n}`,...t)}}function er(n,...e){if(Uo.logLevel<=Os.in.ERROR){const t=e.map(Eg);Uo.error(`Firestore (${Od}): ${n}`,...t)}}function Pd(n,...e){if(Uo.logLevel<=Os.in.WARN){const t=e.map(Eg);Uo.warn(`Firestore (${Od}): ${n}`,...t)}}function Eg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Od}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function dt(n,e){n||Xe()}function He(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ky{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class wf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jD{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new fr,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield l(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new fr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new Zy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new ti(e)}}class Yy{constructor(e,t,r){this.type="FirstParty",this.user=ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class bE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Yy(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CE{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=l=>{null!=l.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.p;return this.p=l.token,Ne("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?o(l):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.p=t.token,new Qy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ai{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function $D(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ai.A=-1;class TE{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=$D(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function lo(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Jy(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new tr(0,0))}static max(){return new Et(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Hl(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class If{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===If.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof If?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends If{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const co=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends If{construct(e,t,r){return new pr(e,t,r)}static isValidIdentifier(e){return co.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class ql{constructor(e){this.fields=e,e.sort(pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class gr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new gr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new gr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gr.EMPTY_BYTE_STRING=new gr("");const xE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wu(n){if(dt(!!n),"string"==typeof n){let e=0;const t=xE.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function zl(n){return"string"==typeof n?gr.fromBase64String(n):gr.fromUint8Array(n)}function Xy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function e_(n){const e=n.mapValue.fields.__previous_value__;return Xy(e)?e_(e):e}function Ig(n){const e=wu(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class ME{constructor(e,t,r,o,l,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Da{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Da("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}function Wl(n){return null==n}function Dg(n){return 0===n&&1/n==-1/0}function HD(n){return"number"==typeof n&&Number.isInteger(n)&&!Dg(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Xt.fromString(e))}static fromName(e){return new Ve(Xt.fromString(e).popFirst(5))}static empty(){return new Ve(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Xt(e.slice()))}}const RE={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},t_={nullValue:"NULL_VALUE"};function Iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xy(n)?4:NE(n)?9:10:Xe()}function ba(n,e){if(n===e)return!0;const t=Iu(n);if(t!==Iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ig(n).isEqual(Ig(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=wu(r.timestampValue),h=wu(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,zl(n.bytesValue).isEqual(zl(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Gn(r.geoPointValue.latitude)===Gn(o.geoPointValue.latitude)&&Gn(r.geoPointValue.longitude)===Gn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Gn(r.integerValue)===Gn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Gn(r.doubleValue),h=Gn(o.doubleValue);return l===h?Dg(l)===Dg(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return lo(n.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(Hl(l)!==Hl(h))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===h[m]||!ba(l[m],h[m])))return!1;return!0}(n,e);default:return Xe()}var o}function Si(n,e){return void 0!==(n.values||[]).find(t=>ba(t,e))}function Zl(n,e){if(n===e)return 0;const t=Iu(n),r=Iu(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=Gn(o.integerValue||o.doubleValue),m=Gn(l.integerValue||l.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return GD(n.timestampValue,e.timestampValue);case 4:return GD(Ig(n),Ig(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(o,l){const h=zl(o),m=zl(l);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),m=l.split("/");for(let w=0;w<h.length&&w<m.length;w++){const C=Vt(h[w],m[w]);if(0!==C)return C}return Vt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Vt(Gn(o.latitude),Gn(l.latitude));return 0!==h?h:Vt(Gn(o.longitude),Gn(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],m=l.values||[];for(let w=0;w<h.length&&w<m.length;++w){const C=Zl(h[w],m[w]);if(C)return C}return Vt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},m=Object.keys(h),w=l.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const N=Vt(m[M],C[M]);if(0!==N)return N;const H=Zl(h[m[M]],w[C[M]]);if(0!==H)return H}return Vt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function GD(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=wu(n),r=wu(e),o=Vt(t.seconds,r.seconds);return 0!==o?o:Vt(t.nanos,r.nanos)}function Kl(n){return bg(n)}function bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=wu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?zl(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=bg(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const m of o)h?h=!1:l+=",",l+=`${m}:${bg(r.fields[m])}`;return l+"}"}(n.mapValue):Xe();var e}function Yl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function n_(n){return!!n&&"integerValue"in n}function Cg(n){return!!n&&"arrayValue"in n}function r_(n){return!!n&&"nullValue"in n}function Tg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ag(n){return!!n&&"mapValue"in n}function Ql(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ql(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ql(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function OE(n,e){return void 0===n?e:void 0===e||Zl(n,e)>0?n:e}function PE(n,e){return void 0===n?e:void 0===e||Zl(n,e)<0?n:e}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ag(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(t)}setAll(e){let t=pr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Ql(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Ag(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ag(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new pi(Ql(this.value))}}function kE(n){const e=[];return Gl(n.fields,(t,r)=>{const o=new pr([t]);if(Ag(r)){const l=kE(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new ql(e)}class Cn{constructor(e,t,r,o,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Cn(e,0,Et.min(),Et.min(),pi.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,Et.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Et.min(),pi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jl{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Du(n){return n.fields.find(e=>2===e.kind)}function kd(n){return n.fields.filter(e=>2!==e.kind)}Jl.UNKNOWN_ID=-1;class bu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Df{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Df(0,kr.min())}}function FE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new kr(o,Ve.empty(),e)}function i_(n){return new kr(n.readTime,n.key,-1)}class kr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new kr(Et.min(),Ve.empty(),-1)}static max(){return new kr(Et.max(),Ve.empty(),-1)}}function bf(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}class gi{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.P=null}}function Cu(n,e=null,t=[],r=[],o=null,l=null,h=null){return new gi(n,e,t,r,o,l,h)}function Bo(n){const e=He(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Kl(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kl(r)).join(",")),e.P=t}return e.P}function Xl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!UE(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ba(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o_(n.startAt,e.startAt)&&o_(n.endAt,e.endAt)}function Ca(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ta(n,e){return n.filters.filter(t=>t instanceof qn&&t.field.isEqual(e))}class qn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Fd(e,t,r):"array-contains"===t?new Ud(e,r):"in"===t?new Bd(e,r):"not-in"===t?new LE(e,r):"array-contains-any"===t?new VE(e,r):new qn(e,t,r)}static V(e,t,r){return"in"===t?new Ld(e,r):new Vd(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Zl(t,this.value)):null!==t&&Iu(this.value)===Iu(t)&&this.v(Zl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Fd extends qn{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.v(t)}}class Ld extends qn{constructor(e,t){super(e,"in",t),this.keys=ec(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vd extends qn{constructor(e,t){super(e,"not-in",t),this.keys=ec(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ec(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class Ud extends qn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cg(t)&&Si(t.arrayValue,this.value)}}class Bd extends qn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Si(this.value.arrayValue,t)}}class LE extends qn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Si(this.value.arrayValue,t)}}class VE extends qn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Si(this.value.arrayValue,r))}}class Aa{constructor(e,t){this.position=e,this.inclusive=t}}class tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function UE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function s_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?Ve.comparator(Ve.fromName(h.referenceValue),t.key):Zl(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function o_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ba(n.position[t],e.position[t]))return!1;return!0}class jo{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function a_(n,e,t,r,o,l,h,m){return new jo(n,e,t,r,o,l,h,m)}function jd(n){return new jo(n)}function Cf(n){return!Wl(n.limit)&&"F"===n.limitType}function Sg(n){return!Wl(n.limit)&&"L"===n.limitType}function u_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xg(n){for(const e of n.filters)if(e.S())return e.field;return null}function l_(n){return null!==n.collectionGroup}function $d(n){const e=He(n);if(null===e.D){e.D=[];const t=xg(e),r=u_(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new tc(t)),e.D.push(new tc(pr.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.D.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new tc(pr.keyField(),l))}}}return e.D}function as(n){const e=He(n);if(!e.C)if("F"===e.limitType)e.C=Cu(e.path,e.collectionGroup,$d(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of $d(e))t.push(new tc(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Aa(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Aa(e.startAt.position,!e.startAt.inclusive):null;e.C=Cu(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function BE(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hd(n,e){return Xl(as(n),as(e))&&n.limitType===e.limitType}function jE(n){return`${Bo(as(n))}|lt:${n.limitType}`}function c_(n){return`Query(target=${function js(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Kl(r.value)}`;var r}).join(", ")}]`),Wl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Kl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Kl(t)).join(",")),`Target(${e})`}(as(n))}; limitType=${n.limitType})`}function $E(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ve.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,h){const m=s_(o,l,h);return o.inclusive?m<=0:m<0}(t.startAt,$d(t),r)||t.endAt&&!function(o,l,h){const m=s_(o,l,h);return o.inclusive?m>=0:m>0}(t.endAt,$d(t),r)));var t,r}function HE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mg(n){return(e,t)=>{let r=!1;for(const o of $d(n)){const l=d_(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function d_(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(o,l,h){const m=l.data.field(o),w=h.data.field(o);return null!==m&&null!==w?Zl(m,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function GE(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dg(e)?"-0":e}}function qD(n){return{integerValue:""+n}}function zD(n,e){return HD(e)?qD(e):GE(n,e)}class h_{constructor(){this._=void 0}}function WD(n,e,t){return n instanceof Gd?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof $s?zE(n,e):n instanceof Tu?WE(n,e):function(r,o){const l=ZD(r,o),h=Tf(l)+Tf(r.k);return n_(l)&&n_(r.k)?qD(h):GE(r.M,h)}(n,e)}function qE(n,e,t){return n instanceof $s?zE(n,e):n instanceof Tu?WE(n,e):t}function ZD(n,e){return n instanceof nc?n_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gd extends h_{}class $s extends h_{constructor(e){super(),this.elements=e}}function zE(n,e){const t=ZE(e);for(const r of n.elements)t.some(o=>ba(o,r))||t.push(r);return{arrayValue:{values:t}}}class Tu extends h_{constructor(e){super(),this.elements=e}}function WE(n,e){let t=ZE(e);for(const r of n.elements)t=t.filter(o=>!ba(o,r));return{arrayValue:{values:t}}}class nc extends h_{constructor(e,t){super(),this.M=e,this.k=t}}function Tf(n){return Gn(n.integerValue||n.doubleValue)}function ZE(n){return Cg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class YD{constructor(e,t){this.version=e,this.transformResults=t}}class mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ng{}function KE(n,e,t){n instanceof Pg?function(r,o,l){const h=r.value.clone(),m=QD(r.fieldTransforms,o,l.transformResults);h.setAll(m),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Sa?function(r,o,l){if(!Rg(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=QD(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(QE(r)),m.setAll(h),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function f_(n,e,t){var o;n instanceof Pg?function(r,o,l){if(!Rg(r.precondition,o))return;const h=r.value.clone(),m=zd(r.fieldTransforms,l,o);h.setAll(m),o.convertToFoundDocument(Og(o),h).setHasLocalMutations()}(n,e,t):n instanceof Sa?function(r,o,l){if(!Rg(r.precondition,o))return;const h=zd(r.fieldTransforms,l,o),m=o.data;m.setAll(QE(r)),m.setAll(h),o.convertToFoundDocument(Og(o),m).setHasLocalMutations()}(n,e,t):Rg(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function YE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=ZD(r.transform,o||null);null!=l&&(null==t&&(t=pi.empty()),t.set(r.field,l))}return t||null}function p_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&lo(t,r,(o,l)=>function KD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $s&&r instanceof $s||t instanceof Tu&&r instanceof Tu?lo(t.elements,r.elements,ba):t instanceof nc&&r instanceof nc?ba(t.k,r.k):t instanceof Gd&&r instanceof Gd);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Og(n){return n.isFoundDocument()?n.version:Et.min()}class Pg extends Ng{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Sa extends Ng{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function QE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function QD(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,qE(h,m,t[o]))}return r}function zd(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,WD(l,h,e))}return r}class Wd extends Ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Af extends Ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class g_{constructor(e){this.count=e}}var yr,$t;function Sf(n){switch(n){default:return Xe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function kg(n){if(void 0===n)return er("GRPC error has no .code"),ae.UNKNOWN;switch(n){case yr.OK:return ae.OK;case yr.CANCELLED:return ae.CANCELLED;case yr.UNKNOWN:return ae.UNKNOWN;case yr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case yr.INTERNAL:return ae.INTERNAL;case yr.UNAVAILABLE:return ae.UNAVAILABLE;case yr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case yr.NOT_FOUND:return ae.NOT_FOUND;case yr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case yr.ABORTED:return ae.ABORTED;case yr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case yr.DATA_LOSS:return ae.DATA_LOSS;default:return Xe()}}($t=yr||(yr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return AE(this.inner)}size(){return this.innerSize}}class nr{constructor(e,t){this.comparator=e,this.root=t||Sr.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zd(this.root,e,this.comparator,!0)}}class Zd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:Sr.RED,this.left=null!=o?o:Sr.EMPTY,this.right=null!=l?l:Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Sr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Sr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1,Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Sr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new m_(this.data.getIterator())}getIteratorFrom(e){return new m_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class m_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Au(n){return n.hasNext()?n.getNext():void 0}const JE=new nr(Ve.comparator);function us(){return JE}const y_=new nr(Ve.comparator);function Fg(){return y_}function xf(){return new rc(n=>n.toString(),(n,e)=>n.isEqual(e))}const XE=new nr(Ve.comparator),ew=new En(Ve.comparator);function un(...n){let e=ew;for(const t of n)e=e.add(t);return e}const tw=new En(Vt);function Lg(){return tw}class Mf{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Rf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Mf(Et.min(),r,Lg(),us(),un())}}class Rf{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Rf(gr.EMPTY_BYTE_STRING,t,un(),un(),un())}}class Nf{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Of{constructor(e,t){this.targetId=e,this.$=t}}class __{constructor(e,t,r=gr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class v_{constructor(){this.B=0,this.L=w_(),this.U=gr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new Rf(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=w_()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class nw{constructor(e){this.nt=e,this.st=new Map,this.it=us(),this.rt=E_(),this.ot=new En(Vt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const l=o.target;if(Ca(l))if(0===r){const h=new Ve(l.path);this.ct(t,h,Cn.newNoDocument(h,Et.min()))}else dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((l,h)=>{const m=this.wt(h);if(m){if(l.current&&Ca(m.target)){const w=new Ve(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,Cn.newNoDocument(w,e))}l.j&&(t.set(h,l.H()),l.J())}});let r=un();this.rt.forEach((l,h)=>{let m=!0;h.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.it.forEach((l,h)=>h.setReadTime(e));const o=new Mf(e,t,this.ot,this.it,r);return this.it=us(),this.rt=E_(),this.ot=new En(Vt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new v_,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new En(Vt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new v_),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function E_(){return new nr(Ve.comparator)}function w_(){return new nr(Ve.comparator)}const rw={asc:"ASCENDING",desc:"DESCENDING"},iw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class sw{constructor(e,t){this.databaseId=e,this.N=t}}function Vg(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ow(n,e){return n.N?e.toBase64():e.toUint8Array()}function JD(n,e){return Vg(n,e.toTimestamp())}function xr(n){return dt(!!n),Et.fromTimestamp(function(e){const t=wu(e);return new tr(t.seconds,t.nanos)}(n))}function I_(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function _r(n){const e=Xt.fromString(n);return dt(dw(e)),e}function Kd(n,e){return I_(n.databaseId,e.path)}function $o(n,e){const t=_r(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(C_(t))}function D_(n,e){return I_(n.databaseId,e)}function b_(n){const e=_r(n);return 4===e.length?Xt.emptyPath():C_(e)}function Pf(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function C_(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function T_(n,e,t){return{name:Kd(n,e),fields:t.value.mapValue.fields}}function ic(n,e,t){const r=$o(n,e.name),o=xr(e.updateTime),l=new pi({mapValue:{fields:e.fields}}),h=Cn.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Yd(n,e){let t;if(e instanceof Pg)t={update:T_(n,e.key,e.value)};else if(e instanceof Wd)t={delete:Kd(n,e.key)};else if(e instanceof Sa)t={update:T_(n,e.key,e.data),updateMask:rb(e.fieldMask)};else{if(!(e instanceof Af))return Xe();t={verify:Kd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Gd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof $s)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Tu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof nc)return{fieldPath:l.field.canonicalString(),increment:h.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:JD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function A_(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?mr.updateTime(xr(o.updateTime)):void 0!==o.exists?mr.exists(o.exists):mr.none():mr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let m=null;"setToServerValue"in h?(dt("REQUEST_TIME"===h.setToServerValue),m=new Gd):"appendMissingElements"in h?m=new $s(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Tu(h.removeAllFromArray.values||[]):"increment"in h?m=new nc(l,h.increment):Xe();const w=pr.fromServerFormat(h.fieldPath);return new qd(w,m)}(n,o)):[];var o;if(e.update){const o=$o(n,e.update.name),l=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ql((e.updateMask.fieldPaths||[]).map(C=>pr.fromServerFormat(C)));return new Sa(o,l,h,t,r)}return new Pg(o,l,t,r)}if(e.delete){const o=$o(n,e.delete);return new Wd(o,t)}if(e.verify){const o=$o(n,e.verify);return new Af(o,t)}return Xe()}function tb(n,e){return{documents:[D_(n,e.path)]}}function S_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=D_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=D_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(M=>function(N){if("=="===N.op){if(Tg(N.value))return{unaryFilter:{field:mi(N.field),op:"IS_NAN"}};if(r_(N.value))return{unaryFilter:{field:mi(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Tg(N.value))return{unaryFilter:{field:mi(N.field),op:"IS_NOT_NAN"}};if(r_(N.value))return{unaryFilter:{field:mi(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(N.field),op:Go(N.op),value:N.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(w){if(0!==w.length)return w.map(C=>{return{field:mi((M=C).field),direction:nb(M.dir)};var M})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(C=e.limit,n.N||Wl(C)?C:{value:C});var C,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Ug(n){let e=b_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let l=[];t.where&&(l=uw(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new tc(yi((N=M).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(M){let N;return N="object"==typeof M?M.value:M,Wl(N)?null:N}(t.limit));let w=null;var M;t.startAt&&(w=new Aa((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Aa(M.values||[],!M.before)}(t.endAt)),a_(e,o,h,l,m,"F",w,C)}function uw(n){return n?void 0!==n.unaryFilter?[cw(n)]:void 0!==n.fieldFilter?[lw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>uw(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function nb(n){return rw[n]}function Go(n){return iw[n]}function mi(n){return{fieldPath:n.canonicalString()}}function yi(n){return pr.fromServerFormat(n.fieldPath)}function lw(n){return qn.create(yi(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function cw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=yi(n.unaryFilter.field);return qn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=yi(n.unaryFilter.field);return qn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yi(n.unaryFilter.field);return qn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=yi(n.unaryFilter.field);return qn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function rb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Fr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bg(e)),e=ib(n.get(t),e);return Bg(e)}function ib(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function Bg(n){return n+"\x01\x01"}function xi(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&Xe(),n.charAt(h+1)){case"\x01":const m=n.substring(l,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:Xe()}l=h+2}return new Xt(r)}const hw=["userId","batchId"];function kf(n,e){return[n,Fr(e)]}function fw(n,e,t){return[n,Fr(e),t]}const pw={},gw=["prefixPath","collectionGroup","readTime","documentId"],jg=["prefixPath","collectionGroup","documentId"],sb=["collectionGroup","readTime","prefixPath","documentId"],mw=["canonicalId","targetId"],yw=["targetId","path"],x_=["path","targetId"],M_=["collectionId","parent"],_w=["indexId","uid"],vw=["uid","sequenceNumber"],Ew=["indexId","uid","arrayValue","directionalValue","documentKey"],ww=["indexId","uid","documentKey"],Iw=["userId","collectionPath","documentId"],Dw=["userId","collectionPath","largestBatchId"],bw=["userId","collectionGroup","largestBatchId"],R_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ob=[...R_,"documentOverlays"],Cw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ab=[...Cw,"indexConfiguration","indexState","indexEntries"],Tw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Aw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},w=>r(w))}),h=!0,l===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class $g{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new fr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ff(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=N_(r.target.error);this.At.reject(new Ff(e,o))}}static open(e,t,r,o){try{return new $g(t,e.transaction(o,r))}catch(l){throw new Ff(t,l)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lb(t)}}class ho{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ho.Vt((0,xt.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,xt.hl)())return!1;if(ho.St())return!0;const e=(0,xt.z$)(),t=ho.Vt(e),r=0<t&&t<10,o=ho.Dt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new Ff(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ff(e,m))},l.onupgradeneeded=h=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,ye.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.Nt(e);const w=$g.open(l.db,e,h?"readonly":"readwrite",r),C=o(w).next(M=>(w.bt(),M)).catch(M=>(w.abort(M),he.reject(M))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),l.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ub{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return oc(this.Ft.delete())}}class Ff extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sc(n){return"IndexedDbTransactionError"===n.name}class lb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oc(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),oc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.Gt(o,(h,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new he((l,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Gt(o,(l,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Gt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=l=>{const h=N_(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Gt(e,t){const r=[];return new he((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new ub(m),C=t(m.primaryKey,m.value,w);if(C instanceof he){const M=C.catch(N=>(w.done(),he.reject(N)));r.push(M)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oc(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=N_(r.target.error);t(o)}})}let Sw=!1;function N_(n){const e=ho.Vt((0,xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sw||(Sw=!0,setTimeout(()=>{throw r},0)),r}}return n}class xw extends Aw{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=He(n);return ho.xt(t.Ht,e)}class O_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&KE(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&f_(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&f_(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(t,r)=>p_(t,r))&&lo(this.baseMutations,e.baseMutations,(t,r)=>p_(t,r))}}class Hg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=XE;const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new Hg(e,t,r,o)}}class Gg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xa{constructor(e,t,r,o,l=Et.min(),h=Et.min(),m=gr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class P_{constructor(e){this.Jt=e}}function k_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Lf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Kd(o=n.Jt,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Vg(o,l.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Su(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Su(e.version)}}var o,l;return r}function Lf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Su(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(n){const e=new tr(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function ac(n,e){const t=(e.baseMutations||[]).map(l=>A_(n.Jt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>A_(n.Jt,l)),o=tr.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,o,t,r)}function Qd(n){const e=xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xu(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=as(jd(b_(o.documents[0])))):r=as(Ug(n.query)),new xa(r,n.targetId,0,n.lastListenSequenceNumber,e,t,gr.fromBase64String(n.resumeToken))}function Mu(n,e){const t=Su(e.snapshotVersion),r=Su(e.lastLimboFreeSnapshotVersion);let o;o=Ca(e.target)?tb(n.Jt,e.target):S_(n.Jt,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function F_(n){const e=Ug({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?BE(e,e.limit,"L"):e}function L_(n,e){return new Gg(e.largestBatchId,A_(n.Jt,e.overlayMutation))}function uc(n,e){const t=e.path.lastSegment();return[n,Fr(e.path.popLast()),t]}class wT{getBundleMetadata(e,t){return qg(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:xu(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return qg(e).put({bundleId:(r=t).id,createTime:Su(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cb(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:F_(o.bundledQuery),readTime:xu(o.readTime)};var o})}saveNamedQuery(e,t){return cb(e).put({name:(r=t).name,readTime:Su(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function qg(n){return Lr(n,"bundles")}function cb(n){return Lr(n,"namedQueries")}class zg{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new zg(e,t.uid||"")}getOverlay(e,t){return Jd(e).get(uc(this.userId,t)).next(r=>r?L_(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((l,h)=>{const m=new Gg(t,h);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Fr(h.getCollectionPath())));const l=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);l.push(Jd(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(l)}getOverlaysForCollection(e,t,r){const o=xf(),l=Fr(t),h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Jd(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const C=L_(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=xf();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Jd(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,M)=>{const N=L_(this.M,C);l.size()<o||N.largestBatchId===h?(l.set(N.getKey(),N),h=N.largestBatchId):M.done()}).next(()=>l)}Xt(e,t){return Jd(e).put(function(r,o,l){const[h,m,w]=uc(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Yd(r.Jt,l.mutation)}}(this.M,this.userId,t))}}function Jd(n){return Lr(n,"documentOverlays")}class Vf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Dg(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(zl(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?NE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ve.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function yt(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Rw(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=yt(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Vf.fe=new Vf;class db{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Rw(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Rw(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class hb{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Wg{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Zg{constructor(){this.De=new db,this.Ce=new hb(this.De),this.xe=new Wg(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class fo{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fo(this.indexId,this.documentKey,this.arrayValue,r)}}function qo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Un(n.arrayValue,e.arrayValue),0!==t?t:(t=Un(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function Un(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class IT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Du(e);if(void 0!==t&&!this.Be(t))return!1;const r=kd(e);let o=0,l=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[l++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(l>=this.Me.length||!this.Ue(this.Me[l++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Nw{constructor(){this.qe=new V_}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class V_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new En(Xt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new En(Xt.comparator)).toArray()}}const Kg=new Uint8Array(0);class Ow{constructor(e){this.user=e,this.Ge=new V_,this.Ke=new rc(t=>Bo(t),(t,r)=>Xl(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const l={collectionId:r,parent:Fr(o)};return U_(e).put(l)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Jy(t),""],!1,!0);return U_(e).qt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(xi(h.parent))}return r})}addFieldIndex(e,t){const r=Uf(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Uf(e),o=Yg(e),l=Xd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Xd(e);let o=!0;const l=new Map;return he.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),l.set(h,m)})).next(()=>{if(o){let h=un();return he.forEach(l,(m,w)=>{var C;Ne("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ht=>`${ht.fieldPath}:${ht.kind}`).join(",")}`} to execute ${Bo(t)}`);const M=function(ht,wn){const bt=Du(wn);if(void 0===bt)return null;for(const Ht of Ta(ht,bt.fieldPath))switch(Ht.op){case"array-contains-any":return Ht.value.arrayValue.values||[];case"array-contains":return[Ht.value]}return null}(w,m),N=function(ht,wn){const bt=new Map;for(const Ht of kd(wn))for(const Gt of Ta(ht,Ht.fieldPath))switch(Gt.op){case"==":case"in":bt.set(Ht.fieldPath.canonicalString(),Gt.value);break;case"not-in":case"!=":return bt.set(Ht.fieldPath.canonicalString(),Gt.value),Array.from(bt.values())}return null}(w,m),H=function(ht,wn){const bt=[];let Ht=!0;for(const zu of kd(wn)){let _o,_p=!0;for(const ii of Ta(ht,zu.fieldPath)){let rr,Wm=!0;switch(ii.op){case"<":case"<=":rr="nullValue"in(Gt=ii.value)?t_:"booleanValue"in Gt?{booleanValue:!1}:"integerValue"in Gt||"doubleValue"in Gt?{doubleValue:NaN}:"timestampValue"in Gt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in Gt?{stringValue:""}:"bytesValue"in Gt?{bytesValue:""}:"referenceValue"in Gt?Yl(Da.empty(),Ve.empty()):"geoPointValue"in Gt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in Gt?{arrayValue:{}}:"mapValue"in Gt?{mapValue:{}}:Xe();break;case"==":case"in":case">=":rr=ii.value;break;case">":rr=ii.value,Wm=!1;break;case"!=":case"not-in":rr=t_}OE(_o,rr)===rr&&(_o=rr,_p=Wm)}if(null!==ht.startAt)for(let ii=0;ii<ht.orderBy.length;++ii)if(ht.orderBy[ii].field.isEqual(zu.fieldPath)){const rr=ht.startAt.position[ii];OE(_o,rr)===rr&&(_o=rr,_p=ht.startAt.inclusive);break}if(void 0===_o)return null;bt.push(_o),Ht&&(Ht=_p)}var Gt;return new Aa(bt,Ht)}(w,m),Z=function(ht,wn){const bt=[];let Ht=!0;for(const zu of kd(wn)){let _o,_p=!0;for(const ii of Ta(ht,zu.fieldPath)){let rr,Wm=!0;switch(ii.op){case">=":case">":rr="nullValue"in(Gt=ii.value)?{booleanValue:!1}:"booleanValue"in Gt?{doubleValue:NaN}:"integerValue"in Gt||"doubleValue"in Gt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in Gt?{stringValue:""}:"stringValue"in Gt?{bytesValue:""}:"bytesValue"in Gt?Yl(Da.empty(),Ve.empty()):"referenceValue"in Gt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in Gt?{arrayValue:{}}:"arrayValue"in Gt?{mapValue:{}}:"mapValue"in Gt?RE:Xe(),Wm=!1;break;case"==":case"in":case"<=":rr=ii.value;break;case"<":rr=ii.value,Wm=!1;break;case"!=":case"not-in":rr=RE}PE(_o,rr)===rr&&(_o=rr,_p=Wm)}if(null!==ht.endAt)for(let ii=0;ii<ht.orderBy.length;++ii)if(ht.orderBy[ii].field.isEqual(zu.fieldPath)){const rr=ht.endAt.position[ii];PE(_o,rr)===rr&&(_o=rr,_p=ht.endAt.inclusive);break}if(void 0===_o)return null;bt.push(_o),Ht&&(Ht=_p)}var Gt;return new Aa(bt,Ht)}(w,m),fe=this.je(m,w,H),Fe=this.je(m,w,Z),tt=this.We(m,w,N),Zt=this.ze(m.indexId,M,fe,!!H&&H.inclusive,Fe,!!Z&&Z.inclusive,tt);return he.forEach(Zt,ht=>r.Kt(ht,t.limit).next(wn=>{wn.forEach(bt=>{h=h.add(new Ve(xi(bt.documentKey)))})}))}).next(()=>h)}return he.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,o,l,h,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),C=w/(null!=t?t.length:1),M=[];for(let N=0;N<w;++N){const H=t?this.He(t[N/C]):Kg,Z=r?this.Je(e,H,r[N%C],o):this.Ye(e),fe=l?this.Xe(e,H,l[N%C],h):this.Ye(e+1);M.push(...this.createRange(Z,fe,m.map(Fe=>this.Je(e,H,Fe,!0))))}return M}Je(e,t,r,o){const l=new fo(e,Ve.empty(),t,r);return o?l:l.ke()}Xe(e,t,r,o){const l=new fo(e,Ve.empty(),t,r);return o?l.ke():l}Ye(e){return new fo(e,Ve.empty(),Kg,Kg)}getFieldIndex(e,t){const r=new IT(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{const h=l.filter(m=>r.$e(m));return h.sort((m,w)=>w.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new Zg;for(const o of kd(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const h=r.Ne(o.kind);Vf.fe.Zt(l,h)}return r.Se()}He(e){const t=new Zg;return Vf.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Zg);let l=0;for(const h of kd(e)){const m=r[l++];for(const w of o)if(this.tn(t,h.fieldPath)&&Cg(m))o=this.en(o,h,m);else{const C=w.Ne(h.kind);Vf.fe.Zt(m,C)}}return this.nn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const o=[...e],l=[];for(const h of r.arrayValue.values||[])for(const m of o){const w=new Zg;w.seed(m.Se()),Vf.fe.Zt(h,w.Ne(t.kind)),l.push(w)}return l}tn(e,t){return!!e.filters.find(r=>r instanceof qn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Uf(e),o=Yg(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(l=>{const h=[];return he.forEach(l,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(C,M){const N=M?new Df(M.sequenceNumber,new kr(xu(M.readTime),new Ve(xi(M.documentKey)),M.largestBatchId)):Df.empty(),H=C.fields.map(([Z,fe])=>new bu(pr.fromServerFormat(Z),fe));return new Jl(C.indexId,C.collectionGroup,H,N)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:Vt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Uf(e),l=Yg(e);return this.sn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,w=>{return l.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:Su((H=r).readTime),documentKey:Fr(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,l)=>{const h=r.get(o.collectionGroup);return(h?he.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,w=>this.rn(e,o,w).next(C=>{const M=this.on(l,w);return C.isEqual(M)?he.resolve():this.un(e,l,C,M)}))))})}an(e,t,r){return Xd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Fr(t.key.path)})}cn(e,t,r){return Xd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Fr(t.key.path)])}rn(e,t,r){const o=Xd(e);let l=new En(qo);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Fr(t.path)])},(h,m)=>{l=l.add(new fo(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}on(e,t){let r=new En(qo);const o=this.Ze(t,e);if(null==o)return r;const l=Du(t);if(null!=l){const h=e.data.field(l.fieldPath);if(Cg(h))for(const m of h.arrayValue.values||[])r=r.add(new fo(t.indexId,e.key,this.He(m),o))}else r=r.add(new fo(t.indexId,e.key,Kg,o));return r}un(e,t,r,o){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,w,C,M){const N=h.getIterator(),H=m.getIterator();let Z=Au(N),fe=Au(H);for(;Z||fe;){let Fe=!1,tt=!1;if(Z&&fe){const Zt=w(Z,fe);Zt<0?tt=!0:Zt>0&&(Fe=!0)}else null!=Z?tt=!0:Fe=!0;Fe?(C(fe),fe=Au(H)):tt?(M(Z),Z=Au(N)):(Z=Au(N),fe=Au(H))}}(r,o,qo,h=>{l.push(this.an(e,t,h))},h=>{l.push(this.cn(e,t,h))}),he.waitFor(l)}sn(e){let t=1;return Yg(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>qo(h,m)).filter((h,m,w)=>!m||0!==qo(h,w[m-1]));const o=[];o.push(e);for(const h of r){const m=qo(h,e),w=qo(h,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(h),o.push(h.ke());else if(w>0)break}o.push(t);const l=[];for(let h=0;h<o.length;h+=2)l.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,""],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,""]));return l}}function U_(n){return Lr(n,"collectionParents")}function Xd(n){return Lr(n,"indexEntries")}function Uf(n){return Lr(n,"indexConfiguration")}function Yg(n){return Lr(n,"indexState")}const Pw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bi(e,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eh(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(M,N,H)=>(m++,H.delete()));l.push(w.next(()=>{dt(1===m)}));const C=[];for(const M of t.mutations){const N=fw(e,M.key.path,t.batchId);l.push(o.delete(N)),C.push(M.key)}return he.waitFor(l).next(()=>C)}function Qg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);class B_{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.hn={}}static Yt(e,t,r,o){dt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new B_(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(e).Wt({index:"userMutationsIndex",range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=lc(e),h=po(e);return h.add({}).next(m=>{dt("number"==typeof m);const w=new O_(m,t,r,o),C=function(H,Z,fe){const Fe=fe.baseMutations.map(Zt=>Yd(H.Jt,Zt)),tt=fe.mutations.map(Zt=>Yd(H.Jt,Zt));return{userId:Z,batchId:fe.batchId,localWriteTimeMs:fe.localWriteTime.toMillis(),baseMutations:Fe,mutations:tt}}(this.M,this.userId,w),M=[];let N=new En((H,Z)=>Vt(H.canonicalString(),Z.canonicalString()));for(const H of o){const Z=fw(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),M.push(h.put(C)),M.push(l.put(Z,pw))}return N.forEach(H=>{M.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.hn[m]=w.keys()}),he.waitFor(M).next(()=>w)})}lookupMutationBatch(e,t){return po(e).get(t).next(r=>r?(dt(r.userId===this.userId),ac(this.M,r)):null)}ln(e,t){return this.hn[t]?he.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.hn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return po(e).Wt({index:"userMutationsIndex",range:o},(h,m,w)=>{m.userId===this.userId&&(dt(m.batchId>=r),l=ac(this.M,m)),w.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return po(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return po(e).qt("userMutationsIndex",t).next(r=>r.map(o=>ac(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kf(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return lc(e).Wt({range:o},(h,m,w)=>{const[C,M,N]=h,H=xi(M);if(C===this.userId&&t.path.isEqual(H))return po(e).get(N).next(Z=>{if(!Z)throw Xe();dt(Z.userId===this.userId),l.push(ac(this.M,Z))});w.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Vt);const o=[];return t.forEach(l=>{const h=kf(this.userId,l.path),m=IDBKeyRange.lowerBound(h),w=lc(e).Wt({range:m},(C,M,N)=>{const[H,Z,fe]=C,Fe=xi(Z);H===this.userId&&l.path.isEqual(Fe)?r=r.add(fe):N.done()});o.push(w)}),he.waitFor(o).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=kf(this.userId,r),h=IDBKeyRange.lowerBound(l);let m=new En(Vt);return lc(e).Wt({range:h},(w,C,M)=>{const[N,H,Z]=w,fe=xi(H);N===this.userId&&r.isPrefixOf(fe)?fe.length===o&&(m=m.add(Z)):M.done()}).next(()=>this.fn(e,m))}fn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(po(e).get(l).next(h=>{if(null===h)throw Xe();dt(h.userId===this.userId),r.push(ac(this.M,h))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return eh(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return lc(e).Wt({range:r},(l,h,m)=>{if(l[0]===this.userId){const w=xi(l[1]);o.push(w)}else m.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return kw(e,this.userId,t)}_n(e){return j_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kw(n,e,t){const r=kf(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return lc(n).Wt({range:l,jt:!0},(m,w,C)=>{const[M,N,H]=m;M===e&&N===o&&(h=!0),C.done()}).next(()=>h)}function po(n){return Lr(n,"mutations")}function lc(n){return Lr(n,"documentMutations")}function j_(n){return Lr(n,"mutationQueues")}class Ru{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Ru(0)}static gn(){return new Ru(-1)}}class fb{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Ru(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Et.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.pn(e,o)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zo(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return zo(e).Wt((h,m)=>{const w=Qd(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,l.push(this.removeTargetData(e,w)))}).next(()=>he.waitFor(l)).next(()=>o)}forEachTarget(e,t){return zo(e).Wt((r,o)=>{const l=Qd(o);t(l)})}yn(e){return th(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}pn(e,t){return th(e).put("targetGlobalKey",t)}In(e,t){return zo(e).put(Mu(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Bo(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return zo(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,w)=>{const C=Qd(m);Xl(t,C.target)&&(l=C,w.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=Nu(e);return t.forEach(h=>{const m=Fr(h.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=Nu(e);return he.forEach(t,l=>{const h=Fr(l.path);return he.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Nu(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Nu(e);let l=un();return o.Wt({range:r,jt:!0},(h,m,w)=>{const C=xi(h[1]),M=new Ve(C);l=l.add(M)}).next(()=>l)}containsKey(e,t){const r=Fr(t.path),o=IDBKeyRange.bound([r],[Jy(r)],!1,!0);let l=0;return Nu(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],w,C)=>{0!==h&&(l++,C.done())}).next(()=>l>0)}Et(e,t){return zo(e).get(t).next(r=>r?Qd(r):null)}}function zo(n){return Lr(n,"targets")}function th(n){return Lr(n,"targetGlobal")}function Nu(n){return Lr(n,"targetDocuments")}function cc(n){return $_.apply(this,arguments)}function $_(){return $_=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==Tw)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),$_.apply(this,arguments)}function H_([n,e],[t,r]){const o=Vt(n,t);return 0===o?Vt(e,r):o}class Fw{constructor(e){this.En=e,this.buffer=new En(H_),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();H_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){sc(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield cc(o)}yield t.vn(e)}))}}class pb{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(Ai.A);const r=new Fw(t);return this.Sn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Sn.Cn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Pw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pw):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,o,l,h,m,w,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),DE()<=Os.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${l} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-M}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class Vw{constructor(e,t){this.db=e,this.garbageCollector=new pb(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,o)=>t(o))}addReference(e,t,r){return Jg(e,r)}removeReference(e,t,r){return Jg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Jg(e,t)}Mn(e,t){return function(r,o){let l=!1;return j_(r).zt(h=>kw(r,h,o).next(m=>(m&&(l=!0),he.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.kn(e,(h,m)=>{if(m<=t){const w=this.Mn(e,h).next(C=>{if(!C)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Et.min()),Nu(e).delete([0,Fr(h.path)])))});o.push(w)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Jg(e,t)}kn(e,t){const r=Nu(e);let o,l=Ai.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:C})=>{0===h?(l!==Ai.A&&t(new Ve(xi(o)),l),l=C,o=w):l=Ai.A}).next(()=>{l!==Ai.A&&t(new Ve(xi(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jg(n,e){return Nu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Fr(e.path),sequenceNumber:r}));var r}class Uw{constructor(){this.changes=new rc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DT{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nh(e).put(r)}removeEntry(e,t,r){return nh(e).delete(function(o,l){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Lf(l),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return nh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(rh(t))},(o,l)=>{r=this.Fn(t,l)}).next(()=>r)}$n(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return nh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(rh(t))},(o,l)=>{r={document:this.Fn(t,l),size:Qg(l)}}).next(()=>r)}getEntries(e,t){let r=us();return this.Bn(e,t,(o,l)=>{const h=this.Fn(o,l);r=r.insert(o,h)}).next(()=>r)}Ln(e,t){let r=us(),o=new nr(Ve.comparator);return this.Bn(e,t,(l,h)=>{const m=this.Fn(l,h);r=r.insert(l,m),o=o.insert(l,Qg(h))}).next(()=>({documents:r,Un:o}))}Bn(e,t,r){if(t.isEmpty())return he.resolve();let o=new En(Bw);t.forEach(w=>o=o.add(w));const l=IDBKeyRange.bound(rh(o.first()),rh(o.last())),h=o.getIterator();let m=h.getNext();return nh(e).Wt({index:"documentKeyIndex",range:l},(w,C,M)=>{const N=Ve.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&Bw(m,N)<0;)r(m,null),m=h.getNext();m&&m.isEqual(N)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?M.Ut(rh(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Lf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nh(e).qt(IDBKeyRange.bound(o,l,!0)).next(h=>{let m=us();for(const w of h){const C=this.Fn(Ve.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let l=us();const h=Bf(t,r),m=Bf(t,kr.max());return nh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,C,M)=>{const N=this.Fn(Ve.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);l=l.insert(N.key,N),l.size===o&&M.done()}).next(()=>l)}newChangeBuffer(e){return new bT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gb(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}On(e,t){return gb(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function Mw(n,e){let t;if(e.document)t=ic(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),o=xu(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=Ve.fromSegments(e.unknownDocument.path),o=xu(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new tr(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return Cn.newInvalidDocument(e)}}class bT extends Uw{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new rc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new En((l,h)=>Vt(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const m=this.Gn.get(l);if(t.push(this.qn.removeEntry(e,l,m.readTime)),h.isValidDocument()){const w=k_(this.qn.M,h);o=o.add(l.path.popLast()),r+=Qg(w)-m.size,t.push(this.qn.addEntry(e,l,w))}else if(r-=m.size,this.trackRemovals){const w=k_(this.qn.M,h.convertToNoDocument(Et.min()));t.push(this.qn.addEntry(e,l,w))}}),o.forEach(l=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.qn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:o})=>(o.forEach((l,h)=>{this.Gn.set(l,{size:h,readTime:r.get(l).readTime})}),r))}}function gb(n){return Lr(n,"remoteDocumentGlobal")}function nh(n){return Lr(n,"remoteDocumentsV14")}function rh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Bf(n,e){const t=e.documentKey.path.toArray();return[n,Lf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Bw(n,e){const t=n.path.length-e.path.length;return 0!==t?t:Ve.comparator(n,e)}class mb{constructor(e){this.M=e}kt(e,t,r,o){const l=new $g("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hw,{unique:!0}),m.createObjectStore("documentMutations"),G_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),G_(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hw,{unique:!0});const M=w.store("mutations"),N=C.map(H=>M.put(H));return he.waitFor(N)})}(e,l))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Kn(l))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(l)))),r<7&&o>=7&&(h=h.next(()=>this.jn(l))),r<8&&o>=8&&(h=h.next(()=>this.Wn(e,l))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.zn(l))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Iw});w.createIndex("collectionPathOverlayIndex",Dw,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",bw,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:gw});w.createIndex("documentKeyIndex",jg),w.createIndex("collectionGroupIndex",sb)}(e)).next(()=>this.Hn(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:_w}).createIndex("sequenceNumberIndex",vw,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Ew}).createIndex("documentKeyIndex",ww,{unique:!1})}(e)})),h}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Qg(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>he.forEach(m,w=>{dt(w.userId===l.userId);const C=ac(this.M,w);return eh(e,l.userId,C).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Wt((h,m)=>{const w=new Xt(h),C=[0,Fr(w)];l.push(t.get(C).next(M=>M?he.resolve():t.put({targetId:0,path:Fr(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(l))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:M_});const r=t.store("collectionParents"),o=new V_,l=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:Fr(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new Xt(h);return l(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],C)=>{const M=xi(m);return l(M.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,o)=>{const l=Qd(o),h=Mu(this.M,l);return t.put(h)})}Hn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((l,h)=>{const m=t.store("remoteDocumentsV14"),w=(C=h,C.document?new Ve(Xt.fromString(C.document.name).popFirst(5)):C.noDocument?Ve.fromSegments(C.noDocument.path):C.unknownDocument?Ve.fromSegments(C.unknownDocument.path):Xe()).path.toArray();var C;const M={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(M))}).next(()=>he.waitFor(o))}}function G_(n){n.createObjectStore("targetDocuments",{keyPath:yw}).createIndex("documentTargetsIndex",x_,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mw,{unique:!0}),n.createObjectStore("targetGlobal")}const dc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class q_{constructor(e,t,r,o,l,h,m,w,C,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=l,this.window=h,this.document=m,this.Yn=C,this.Xn=M,this.Zn=N,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=H=>Promise.resolve(),!q_.vt())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vw(this,o),this.cs=t+"main",this.M=new P_(w),this.hs=new ho(this.cs,this.Zn,new mb(this.M)),this.ls=new fb(this.referenceDelegate,this.M),this.fs=new DT(this.M),this.ds=new wT,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===M&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,dc);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Ai(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if(sc(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return jf(e).get("owner").next(t=>he.resolve(this.bs(t)))}Ps(e){return Xg(e).delete(this.clientId)}Vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Lr(r,"clientMetadata");return o.qt().next(l=>{const h=e.Ss(l,18e5),m=l.filter(w=>-1===h.indexOf(w));return he.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?he.resolve(!0):jf(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,dc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xg(e).qt().next(r=>void 0===this.Ss(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new xw(t,Ai.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Xg(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return B_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Ow(e)}getDocumentOverlayCache(e){return zg.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=14===(h=this.Zn)?ab:13===h?Cw:12===h?ob:11===h?R_:void Xe();var h;let m;return this.hs.runTransaction(e,o,l,w=>(m=new xw(w,this.ts?this.ts.next():Ai.A),"readwrite-primary"===t?this.Ts(m).next(C=>!!C||this.Es(m)).next(C=>{if(!C)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Ae(ae.FAILED_PRECONDITION,Tw);return r(m)}).next(C=>this.Rs(m).next(()=>C)):this.Fs(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Fs(e){return jf(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,dc)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jf(e).put("owner",t)}static vt(){return ho.vt()}As(e){const t=jf(e);return t.get("owner").next(r=>this.bs(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,xt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jf(n){return Lr(n,"owner")}function Xg(n){return Lr(n,"clientMetadata")}function z_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yb{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}Us(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return Ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Qs(e,t.path):l_(t)?this.js(e,t,r):this.Ws(e,t,r);var o}Qs(e,t){return this.Bs(e,new Ve(t)).next(r=>{let o=Fg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}js(e,t,r){const o=t.collectionGroup;let l=Fg();return this.indexManager.getCollectionParents(e,o).next(h=>he.forEach(h,m=>{const w=(C=t,M=m.child(o),new jo(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.Ws(e,w,r).next(C=>{C.forEach((M,N)=>{l=l.insert(M,N)})})}).next(()=>l))}Ws(e,t,r){let o;return this.fs.getAllFromCollection(e,t.path,r).next(l=>(o=l,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(l=>{for(const h of l)for(const m of h.mutations){const w=m.key;let C=o.get(w);null==C&&(C=Cn.newInvalidDocument(w),o=o.insert(w,C)),f_(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((l,h)=>{$E(t,h)||(o=o.remove(l))}),o))}}class em{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=o}static Js(e,t){let r=un(),o=un();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new em(e,t.fromCache,r,o)}}class jw{Ys(e){this.Xs=e}Ks(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.Zs(e,t):this.Xs.qs(e,o).next(l=>{const h=this.ti(t,l);return(Cf(t)||Sg(t))&&this.ei(t.limitType,h,o,r)?this.Zs(e,t):(DE()<=Os.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),c_(t)),this.Xs.Ks(e,t,FE(r,-1)).next(m=>(h.forEach(w=>{m=m.insert(w.key,w)}),m)))});var l}ti(e,t){let r=new En(Mg(e));return t.forEach((o,l)=>{$E(e,l)&&(r=r.add(l))}),r}ei(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Zs(e,t){return DE()<=Os.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",c_(t)),this.Xs.Ks(e,t,kr.min())}}class _b{constructor(e,t,r,o){this.persistence=e,this.ni=t,this.M=o,this.si=new nr(Vt),this.ii=new rc(l=>Bo(l),Xl),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new yb(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function hc(n,e,t,r){return new _b(n,e,t,r)}function $w(n,e){return tm.apply(this,arguments)}function tm(){return tm=(0,ye.Z)(function*(n,e){const t=He(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.$s.getAllMutationBatches(r).next(l=>(o=l,t.ui(e),t.$s.getAllMutationBatches(r))).next(l=>{const h=[],m=[];let w=un();for(const C of o){h.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}for(const C of l){m.push(C.batchId);for(const M of C.mutations)w=w.add(M.key)}return t.ai.qs(r,w).next(C=>({ci:C,removedBatchIds:h,addedBatchIds:m}))})})}),tm.apply(this,arguments)}function vb(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.oi.newChangeBuffer({trackRemovals:!0});return function(h,m,w,C){const M=w.batch,N=M.keys();let H=he.resolve();return N.forEach(Z=>{H=H.next(()=>C.getEntry(m,Z)).next(fe=>{const Fe=w.docVersions.get(Z);dt(null!==Fe),fe.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),C.addEntry(fe)))})}),H.next(()=>h.$s.removeMutationBatch(m,M))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,o))})}function W_(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function Eb(n,e){const t=He(n),r=e.snapshotVersion;let o=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.oi.newChangeBuffer({trackRemovals:!0});o=t.si;const m=[];e.targetChanges.forEach((C,M)=>{const N=o.get(M);if(!N)return;m.push(t.ls.removeMatchingKeys(l,C.removedDocuments,M).next(()=>t.ls.addMatchingKeys(l,C.addedDocuments,M)));let H=N.withSequenceNumber(l.currentSequenceNumber);var Z,fe,Fe;e.targetMismatches.has(M)?H=H.withResumeToken(gr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(M,H),fe=H,Fe=C,(0===(Z=N).resumeToken.approximateByteSize()||fe.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.ls.updateTargetData(l,H))});let w=us();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,C))}),m.push(Z_(l,h,e.documentUpdates).next(C=>{w=C})),!r.isEqual(Et.min())){const C=t.ls.getLastRemoteSnapshotVersion(l).next(M=>t.ls.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>h.apply(l)).next(()=>t.ai.Gs(l,w)).next(()=>w)}).then(l=>(t.si=o,l))}function Z_(n,e,t){let r=un();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=us();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Ne("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),l})}function wb(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Ou(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ls.getTargetData(r,e).next(l=>l?(o=l,he.resolve(o)):t.ls.allocateTargetId(r).next(h=>(o=new xa(e,h,0,r.currentSequenceNumber),t.ls.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.si.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function ih(n,e,t){return nm.apply(this,arguments)}function nm(){return nm=(0,ye.Z)(function*(n,e,t){const r=He(n),o=r.si.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!sc(h))throw h;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.si=r.si.remove(e),r.ii.delete(o.target)}),nm.apply(this,arguments)}function $f(n,e,t){const r=He(n);let o=Et.min(),l=un();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,C){const M=He(m),N=M.ii.get(C);return void 0!==N?he.resolve(M.si.get(N)):M.ls.getTargetData(w,C)}(r,h,as(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(h,m.targetId).next(w=>{l=w})}).next(()=>r.ni.Ks(h,e,t?o:Et.min(),t?l:un())).next(m=>(qw(r,HE(e),m),{documents:m,hi:l})))}function Hw(n,e){const t=He(n),r=He(t.ls),o=t.si.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,e).next(h=>h?h.target:null))}function Gw(n,e){const t=He(n),r=t.ri.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.oi.getAllFromCollectionGroup(o,e,FE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(qw(t,e,o),o))}function qw(n,e,t){let r=Et.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.ri.set(e,r)}function Y_(){return Y_=(0,ye.Z)(function*(n,e,t,r){const o=He(n);let l=un(),h=us();for(const C of t){const M=e.li(C.metadata.name);C.document&&(l=l.add(M));const N=e.fi(C);N.setReadTime(e.di(C.metadata.readTime)),h=h.insert(M,N)}const m=o.oi.newChangeBuffer({trackRemovals:!0}),w=yield Ou(o,(C=r,as(jd(Xt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>Z_(C,m,h).next(M=>(m.apply(C),M)).next(M=>o.ls.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.ls.addMatchingKeys(C,l,w.targetId)).next(()=>o.ai.Gs(C,M)).next(()=>M)))}),Y_.apply(this,arguments)}function zw(n,e){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,ye.Z)(function*(n,e,t=un()){const r=yield Ou(n,as(F_(e.bundledQuery))),o=He(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=xr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.ds.saveNamedQuery(l,e);const m=r.withResumeToken(gr.EMPTY_BYTE_STRING,h);return o.si=o.si.insert(m.targetId,m),o.ls.updateTargetData(l,m).next(()=>o.ls.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ls.addMatchingKeys(l,t,r.targetId)).next(()=>o.ds.saveNamedQuery(l,e))})}),Q_.apply(this,arguments)}class Ib{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return he.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:F_(r.bundledQuery),readTime:xr(r.readTime)}),he.resolve();var r}}class Db{constructor(){this.overlays=new nr(Ve.comparator),this.mi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.Xt(e,t,l)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.mi.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.mi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=xf(),l=t.length+1,h=new Ve(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===l&&w.largestBatchId>r&&o.set(w.getKey(),w)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new nr((C,M)=>C-M);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=l.get(C.largestBatchId);null===M&&(M=xf(),l=l.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=xf(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.mi.get(o.largestBatchId).delete(r.key);this.mi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Gg(t,r));let l=this.mi.get(t);void 0===l&&(l=un(),this.mi.set(t,l)),this.mi.set(t,l.add(r.key))}}class J_{constructor(){this.gi=new En(Vr.yi),this.pi=new En(Vr.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Vr(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Vr(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new Ve(new Xt([])),r=new Vr(t,e),o=new Vr(t,e+1),l=[];return this.pi.forEachInRange([r,o],h=>{this.Ei(h),l.push(h.key)}),l}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Ve(new Xt([])),r=new Vr(t,e),o=new Vr(t,e+1);let l=un();return this.pi.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Vr(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vr{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Ve.comparator(e.key,t.key)||Vt(e.Vi,t.Vi)}static Ii(e,t){return Vt(e.Vi,t.Vi)||Ve.comparator(e.key,t.key)}}class bb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new En(Vr.yi)}checkEmpty(e){return he.resolve(0===this.$s.length)}addMutationBatch(e,t,r,o){const l=this.vi;this.vi++;const h=new O_(l,t,r,o);this.$s.push(h);for(const m of o)this.Si=this.Si.add(new Vr(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,t){return he.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ci(t+1),l=o<0?0:o;return he.resolve(this.$s.length>l?this.$s[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return he.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vr(t,0),o=new Vr(t,Number.POSITIVE_INFINITY),l=[];return this.Si.forEachInRange([r,o],h=>{const m=this.Di(h.Vi);l.push(m)}),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(Vt);return t.forEach(o=>{const l=new Vr(o,0),h=new Vr(o,Number.POSITIVE_INFINITY);this.Si.forEachInRange([l,h],m=>{r=r.add(m.Vi)})}),he.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;Ve.isDocumentKey(l)||(l=l.child(""));const h=new Vr(new Ve(l),0);let m=new En(Vt);return this.Si.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Vi)),!0)},h),he.resolve(this.xi(m))}xi(e){const t=[];return e.forEach(r=>{const o=this.Di(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return he.forEach(t.mutations,o=>{const l=new Vr(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Vr(t,0),o=this.Si.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Cb{constructor(e){this.ki=e,this.docs=new nr(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,h=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Cn.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=us();const l=new Ve(t.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||bf(i_(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}Mi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Tb(this)}getSize(e){return he.resolve(this.size)}}class Tb extends Uw{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.qn.addEntry(e,o)):this.qn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Ww{constructor(e){this.persistence=e,this.Oi=new rc(t=>Bo(t),Xl),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Fi=0,this.$i=new J_,this.targetCount=0,this.Bi=Ru.mn()}forEachTarget(e,t){return this.Oi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),he.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.In(t),he.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Oi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(l).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),he.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.$i.containsKey(t))}}class Zw{constructor(e,t){this.Li={},this.overlays={},this.ts=new Ai(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Ww(this),this.indexManager=new Nw,this.fs=new Cb(r=>this.referenceDelegate.Ui(r)),this.M=new P_(t),this.ds=new Ib(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Db,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new bb(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new Ab(this.ts.next());return this.referenceDelegate.qi(),r(o).next(l=>this.referenceDelegate.Gi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ki(e,t){return he.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class Ab extends Aw{constructor(e){super(),this.currentSequenceNumber=e}}class X_{constructor(e){this.persistence=e,this.Qi=new J_,this.ji=null}static Wi(e){return new X_(e)}get zi(){if(this.ji)return this.ji;throw Xe()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(o=>this.zi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.zi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.zi,r=>{const o=Ve.fromPath(r);return this.Hi(e,o).next(l=>{l||t.removeEntry(o,Et.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return he.or([()=>he.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function ev(n,e){return`firestore_clients_${n}_${e}`}function Kw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tv(n,e){return`firestore_targets_${n}_${e}`}class rm{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Ji(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new Ae(o.error.code,o.error.message))),h?new rm(e,t,o.state,l):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ae(r.error.code,r.error.message))),l?new fc(e,r.state,o):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Lg();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=HD(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new sh(e,l):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class im{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new im(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hf{constructor(){this.activeTargetIds=Lg()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nv{constructor(e,t,r,o,l){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new nr(Vt),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=ev(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Hf),this.ar=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Os();for(const o of t){if(o===e.tr)continue;const l=e.getItem(ev(e.persistenceKey,o));if(l){const h=sh.Ji(o,l);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const o=e.wr(r);o&&e.mr(o)}for(const o of e.ir)e.nr(o);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tv(this.persistenceKey,e));if(r){const o=fc.Ji(e,r);o&&(t=o.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.pr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const o=t.Rr(r.key);return t.br(o,null)}{const o=t.Pr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const o=t.Vr(r.key,r.newValue);if(o)return t.vr(o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(r.key===t.lr){if(null!==r.newValue){const o=t.wr(r.newValue);if(o)return t.mr(o)}}else if(r.key===t.ur){const o=function(l){let h=Ai.A;if(null!=l)try{const m=JSON.parse(l);dt("number"==typeof m),h=m}catch(m){er("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==Ai.A&&t.sequenceNumberHandler(o)}else if(r.key===t.dr){const o=t.Cr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const o=new rm(this.currentUser,e,t,r),l=Kw(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Yi())}pr(e){const t=Kw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const o=tv(this.persistenceKey,e),l=new fc(e,t,r);this.setItem(o,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return sh.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),o=Number(r[1]);return rm.Ji(new ti(void 0!==r[2]?r[2]:null),o,t)}Sr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return fc.Ji(o,t)}wr(e){return im.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),o=this.gr(this.sr),l=this.gr(r),h=[],m=[];return l.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{l.has(w)||m.push(w)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Lg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Yw{constructor(){this.Fr=new Hf,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Hf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rv{Br(e){}shutdown(){}}class Qw{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Jw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Sb{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Xw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,o,l){const h=this.oo(e,t);Ne("RestConnection","Sending: ",h,r);const m={};return this.uo(m,o,l),this.ao(e,h,m,r).then(w=>(Ne("RestConnection","Received: ",w),w),w=>{throw Pd("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}co(e,t,r,o,l){return this.ro(e,t,r,o,l)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Od,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}oo(e,t){return`${this.so}/v1/${t}:${Jw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,o){return new Promise((l,h)=>{const m=new zy;m.listenOnce(VD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case qy.NO_ERROR:const C=m.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(C)),l(C);break;case qy.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),h(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case qy.HTTP_ERROR:const M=m.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const H=function(Z){const fe=Z.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(fe)>=0?fe:ae.UNKNOWN}(N.status);h(new Ae(H,N.message))}else h(new Ae(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}ho(e,t,r){const o=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=LD(),h=Gy(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new UD({})),this.uo(m.initMessageHeaders,t,r),(0,xt.uI)()||(0,xt.b$)()||(0,xt.d)()||(0,xt.w1)()||(0,xt.Mn)()||(0,xt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Ne("Connection","Creating WebChannel: "+w,m);const C=l.createWebChannel(w,m);let M=!1,N=!1;const H=new Sb({jr:fe=>{N?Ne("Connection","Not sending because WebChannel is closed:",fe):(M||(Ne("Connection","Opening WebChannel transport."),C.open(),M=!0),Ne("Connection","WebChannel sending:",fe),C.send(fe))},Wr:()=>C.close()}),Z=(fe,Fe,tt)=>{fe.listen(Fe,Zt=>{try{tt(Zt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return Z(C,Nd.EventType.OPEN,()=>{N||Ne("Connection","WebChannel transport opened.")}),Z(C,Nd.EventType.CLOSE,()=>{N||(N=!0,Ne("Connection","WebChannel transport closed"),H.eo())}),Z(C,Nd.EventType.ERROR,fe=>{N||(N=!0,Pd("Connection","WebChannel transport errored:",fe),H.eo(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),Z(C,Nd.EventType.MESSAGE,fe=>{var Fe;if(!N){const tt=fe.data[0];dt(!!tt);const Zt=tt,ht=Zt.error||(null===(Fe=Zt[0])||void 0===Fe?void 0:Fe.error);if(ht){Ne("Connection","WebChannel received error:",ht);const wn=ht.status;let bt=function(Gt){const zu=yr[Gt];if(void 0!==zu)return kg(zu)}(wn),Ht=ht.message;void 0===bt&&(bt=ae.INTERNAL,Ht="Unknown error status: "+wn+" with message "+ht.message),N=!0,H.eo(new Ae(bt,Ht)),C.close()}else Ne("Connection","WebChannel received:",tt),H.no(tt)}}),Z(h,_g.STAT_EVENT,fe=>{fe.stat===vg.PROXY?Ne("Connection","Detected buffering proxy"):fe.stat===vg.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.Zr()},0),H}}function eI(){return"undefined"!=typeof window?window:null}function Gf(){return"undefined"!=typeof document?document:null}function sm(n){return new sw(n,!0)}class iv{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=o,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,o,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class qf{constructor(e,t,r,o,l,h,m,w){this.Jn=e,this.Ao=r,this.Ro=o,this.bo=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new iv(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ye.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ye.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Po===t&&this.Uo(r,o)},r=>{e(()=>{const o=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(o)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(o=>{r(()=>this.qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}xo(){var e=this;this.state=5,this.So.Io((0,ye.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xb extends qf{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=l}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function eb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=e.targetChange.targetIds||[],l=function(w,C){return w.N?(dt(void 0===C||"string"==typeof C),gr.fromBase64String(C||"")):(dt(void 0===C||C instanceof Uint8Array),gr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const C=void 0===w.code?ae.UNKNOWN:kg(w.code);return new Ae(C,w.message||"")}(h);t=new __(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=$o(n,r.document.name),l=xr(r.document.updateTime),h=new pi({mapValue:{fields:r.document.fields}}),m=Cn.newFoundDocument(o,l,h);t=new Nf(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=$o(n,r.document),l=r.readTime?xr(r.readTime):Et.min(),h=Cn.newNoDocument(o,l);t=new Nf([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=$o(n,r.document);t=new Nf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,l=new g_(r.count||0);t=new Of(r.targetId,l)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Et.min():l.readTime?xr(l.readTime):Et.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=Pf(this.M),t.addTarget=function(o,l){let h;const m=l.target;return h=Ca(m)?{documents:tb(o,m)}:{query:S_(o,m)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=ow(o,l.resumeToken):l.snapshotVersion.compareTo(Et.min())>0&&(h.readTime=Vg(o,l.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function Ho(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=Pf(this.M),t.removeTarget=e,this.Oo(t)}}class oh extends qf{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function aw(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let l=xr(r.updateTime?r.updateTime:o);return l.isEqual(Et.min())&&(l=xr(o)),new YD(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Jo(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Pf(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yd(this.M,r))};this.Oo(t)}}class zf extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.Zo=!1}tu(){if(this.Zo)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ro(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.co(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class Mb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(er(t),this.su=!1):Ne("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class CT{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Pu(h)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(C){const M=He(C);M.lu.add(4),yield uh(M),M._u.set("Unknown"),M.lu.delete(4),yield ah(M)}),function(C){return w.apply(this,arguments)})(h))}))}),this._u=new Mb(r,o)}}function ah(n){return sv.apply(this,arguments)}function sv(){return sv=(0,ye.Z)(function*(n){if(Pu(n))for(const e of n.fu)yield e(!0)}),sv.apply(this,arguments)}function uh(n){return ov.apply(this,arguments)}function ov(){return ov=(0,ye.Z)(function*(n){for(const e of n.fu)yield e(!1)}),ov.apply(this,arguments)}function om(n,e){const t=He(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),pc(t)?ch(t):dh(t).Co()&&am(t,e))}function lh(n,e){const t=He(n),r=dh(t);t.hu.delete(e),r.Co()&&um(t,e),0===t.hu.size&&(r.Co()?r.ko():Pu(t)&&t._u.set("Unknown"))}function am(n,e){n.wu.Z(e.targetId),dh(n).Qo(e)}function um(n,e){n.wu.Z(e),dh(n).jo(e)}function ch(n){n.wu=new nw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),dh(n).start(),n._u.iu()}function pc(n){return Pu(n)&&!dh(n).Do()&&n.hu.size>0}function Pu(n){return 0===He(n).lu.size}function av(n){n.wu=void 0}function tI(n){return uv.apply(this,arguments)}function uv(){return uv=(0,ye.Z)(function*(n){n.hu.forEach((e,t)=>{am(n,e)})}),uv.apply(this,arguments)}function Rb(n,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,ye.Z)(function*(n,e){av(n),pc(n)?(n._u.uu(e),ch(n)):n._u.set("Unknown")}),Wf.apply(this,arguments)}function Nb(n,e,t){return nI.apply(this,arguments)}function nI(){return nI=(0,ye.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof __&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,l){const h=l.cause;for(const m of l.targetIds)o.hu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.hu.delete(m),o.wu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lm(n,r)}else if(e instanceof Nf?n.wu.ut(e):e instanceof Of?n.wu._t(e):n.wu.ht(e),!t.isEqual(Et.min()))try{const r=yield W_(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.wu.yt(l);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.hu.get(w);C&&o.hu.set(w,C.withResumeToken(m.resumeToken,l))}}),h.targetMismatches.forEach(m=>{const w=o.hu.get(m);if(!w)return;o.hu.set(m,w.withResumeToken(gr.EMPTY_BYTE_STRING,w.snapshotVersion)),um(o,m);const C=new xa(w.target,m,1,w.sequenceNumber);am(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield lm(n,r)}var r}),nI.apply(this,arguments)}function lm(n,e,t){return lv.apply(this,arguments)}function lv(){return lv=(0,ye.Z)(function*(n,e,t){if(!sc(e))throw e;n.lu.add(1),yield uh(n),n._u.set("Offline"),t||(t=()=>W_(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield ah(n)}))}),lv.apply(this,arguments)}function gc(n,e){return e().catch(t=>lm(n,t,e))}function mc(n){return ku.apply(this,arguments)}function ku(){return ku=(0,ye.Z)(function*(n){const e=He(n),t=Fu(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;TT(e);)try{const o=yield wb(e.localStore,r);if(null===o){0===e.cu.length&&t.ko();break}r=o.batchId,rI(e,o)}catch(o){yield lm(e,o)}iI(e)&&Ob(e)}),ku.apply(this,arguments)}function TT(n){return Pu(n)&&n.cu.length<10}function rI(n,e){n.cu.push(e);const t=Fu(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function iI(n){return Pu(n)&&!Fu(n).Do()&&n.cu.length>0}function Ob(n){Fu(n).start()}function sI(n){return oI.apply(this,arguments)}function oI(){return oI=(0,ye.Z)(function*(n){Fu(n).Xo()}),oI.apply(this,arguments)}function aI(n){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,ye.Z)(function*(n){const e=Fu(n);for(const t of n.cu)e.Ho(t.mutations)}),Zf.apply(this,arguments)}function Pb(n,e,t){return cv.apply(this,arguments)}function cv(){return cv=(0,ye.Z)(function*(n,e,t){const r=n.cu.shift(),o=Hg.from(r,e,t);yield gc(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield mc(n)}),cv.apply(this,arguments)}function kb(n,e){return dv.apply(this,arguments)}function dv(){return dv=(0,ye.Z)(function*(n,e){var t;e&&Fu(n).zo&&(yield(t=(0,ye.Z)(function*(r,o){if(Sf(l=o.code)&&l!==ae.ABORTED){const h=r.cu.shift();Fu(r).No(),yield gc(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield mc(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),iI(n)&&Ob(n)}),dv.apply(this,arguments)}function uI(n,e){return hv.apply(this,arguments)}function hv(){return hv=(0,ye.Z)(function*(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Pu(t);t.lu.add(3),yield uh(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield ah(t)}),hv.apply(this,arguments)}function fv(n,e){return pv.apply(this,arguments)}function pv(){return pv=(0,ye.Z)(function*(n,e){const t=He(n);e?(t.lu.delete(2),yield ah(t)):e||(t.lu.add(2),yield uh(t),t._u.set("Unknown"))}),pv.apply(this,arguments)}function dh(n){return n.mu||(n.mu=function(e,t,r){const o=He(e);return o.tu(),new xb(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:tI.bind(null,n),Jr:Rb.bind(null,n),Ko:Nb.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.mu.No(),pc(n)?ch(n):n._u.set("Unknown")):(yield n.mu.stop(),av(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Fu(n){return n.gu||(n.gu=function(e,t,r){const o=He(e);return o.tu(),new oh(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{zr:sI.bind(null,n),Jr:kb.bind(null,n),Yo:aI.bind(null,n),Jo:Pb.bind(null,n)}),n.fu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.No(),yield mc(n)):(yield n.gu.stop(),n.cu.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class yc{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new yc(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _c(n,e){if(er("AsyncQueue",`${e}: ${n}`),sc(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class vc{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=Fg(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new vc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class gv{constructor(){this.yu=new nr(Ve.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Xe():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ec{constructor(e,t,r,o,l,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Ec(e,t,vc.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class lI{constructor(){this.Iu=void 0,this.listeners=[]}}class Fb{constructor(){this.queries=new rc(e=>jE(e),Hd),this.onlineState="Unknown",this.Tu=new Set}}function mv(n,e){return yv.apply(this,arguments)}function yv(){return yv=(0,ye.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new lI),o)try{l.Iu=yield t.onListen(r)}catch(h){const m=_c(h,`Initialization of query '${c_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&wc(t)}),yv.apply(this,arguments)}function _v(n,e){return vv.apply(this,arguments)}function vv(){return vv=(0,ye.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),vv.apply(this,arguments)}function Lb(n,e){const t=He(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Au(o)&&(r=!0);h.Iu=o}}r&&wc(t)}function Vb(n,e,t){const r=He(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function wc(n){n.Tu.forEach(e=>{e.next()})}class Ev{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ec(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ec.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class wv{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class go{constructor(e){this.M=e}li(e){return $o(this.M,e)}fi(e){return e.metadata.exists?ic(this.M,e.document,!1):Cn.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return xr(e)}}class Ub{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cm(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Xt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new go(this.M);for(const o of e)if(o.metadata.queries){const l=r.li(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||un()).add(l);t.set(h,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function K_(n,e,t,r){return Y_.apply(this,arguments)}(e.localStore,new go(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const o of e.queries)yield zw(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function cm(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class hh{constructor(e){this.key=e}}class cI{constructor(e){this.key=e}}class dI{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=un(),this.mutatedKeys=un(),this.Lu=Mg(e),this.Uu=new vc(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new gv,o=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w=Cf(this.query)&&o.size===this.query.limit?o.last():null,C=Sg(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const H=o.get(M),Z=$E(this.query,N)?N:null,fe=!!H&&this.mutatedKeys.has(H.key),Fe=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let tt=!1;H&&Z?H.data.isEqual(Z.data)?fe!==Fe&&(r.track({type:3,doc:Z}),tt=!0):this.Qu(H,Z)||(r.track({type:2,doc:Z}),tt=!0,(w&&this.Lu(Z,w)>0||C&&this.Lu(Z,C)<0)&&(m=!0)):!H&&Z?(r.track({type:0,doc:Z}),tt=!0):H&&!Z&&(r.track({type:1,doc:H}),tt=!0,(w||C)&&(m=!0)),tt&&(Z?(h=h.add(Z),l=Fe?l.add(M):l.delete(M)):(h=h.delete(M),l=l.delete(M)))}),Cf(this.query)||Sg(this.query))for(;h.size>this.query.limit;){const M=Cf(this.query)?h.last():h.first();h=h.delete(M.key),l=l.delete(M.key),r.track({type:1,doc:M})}return{Uu:h,Ku:r,ei:m,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Ku.pu();l.sort((C,M)=>function(N,H){const Z=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return Z(N)-Z(H)}(C.type,M.type)||this.Lu(C.doc,M.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==l.length||w?{snapshot:new Ec(this.query,e.Uu,o,l,e.mutatedKeys,0===m,w,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new gv,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=un(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new cI(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new hh(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=un();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Ec.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Bb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dm{constructor(e){this.key=e,this.Xu=!1}}class hm{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Zu={},this.ta=new rc(m=>jE(m),Hd),this.ea=new Map,this.na=new Set,this.sa=new nr(Ve.comparator),this.ia=new Map,this.ra=new J_,this.oa={},this.ua=new Map,this.aa=Ru.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function jb(n,e){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,ye.Z)(function*(n,e){const t=yI(n);let r,o;const l=t.ta.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.Yu();else{const h=yield Ou(t.localStore,as(e));t.isPrimaryClient&&om(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield fm(t,e,r,"current"===m)}return o}),Iv.apply(this,arguments)}function fm(n,e,t,r){return pm.apply(this,arguments)}function pm(){return pm=(0,ye.Z)(function*(n,e,t,r){n.ha=(M,N,H)=>{return(Z=(0,ye.Z)(function*(fe,Fe,tt,Zt){let ht=Fe.view.Gu(tt);ht.ei&&(ht=yield $f(fe.localStore,Fe.query,!1).then(({documents:Ht})=>Fe.view.Gu(Ht,ht)));const wn=Zt&&Zt.targetChanges.get(Fe.targetId),bt=Fe.view.applyChanges(ht,fe.isPrimaryClient,wn);return vm(fe,Fe.targetId,bt.zu),bt.snapshot}),function(fe,Fe,tt,Zt){return Z.apply(this,arguments)})(n,M,N,H);var Z};const o=yield $f(n.localStore,e,!0),l=new dI(e,o.hi),h=l.Gu(o.documents),m=Rf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=l.applyChanges(h,n.isPrimaryClient,m);vm(n,t,w.zu);const C=new Bb(e,t,l);return n.ta.set(e,C),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),w.snapshot}),pm.apply(this,arguments)}function Dv(n,e){return gm.apply(this,arguments)}function gm(){return gm=(0,ye.Z)(function*(n,e){const t=He(n),r=t.ta.get(e),o=t.ea.get(r.targetId);if(o.length>1)return t.ea.set(r.targetId,o.filter(l=>!Hd(l,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ih(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),lh(t.remoteStore,r.targetId),fh(t,r.targetId)}).catch(cc))):(fh(t,r.targetId),yield ih(t.localStore,r.targetId,!0))}),gm.apply(this,arguments)}function bv(){return bv=(0,ye.Z)(function*(n,e,t){const r=Dm(n);try{const o=yield function(l,h){const m=He(l),w=tr.now(),C=h.reduce((N,H)=>N.add(H.key),un());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ai.qs(N,C).next(H=>{M=H;const Z=[];for(const fe of h){const Fe=YE(fe,M.get(fe.key));null!=Fe&&Z.push(new Sa(fe.key,Fe,kE(Fe.value.mapValue),mr.exists(!0)))}return m.$s.addMutationBatch(N,w,Z,h)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,m){let w=l.oa[l.currentUser.toKey()];w||(w=new nr(Vt)),w=w.insert(h,m),l.oa[l.currentUser.toKey()]=w}(r,o.batchId,t),yield Wo(r,o.changes),yield mc(r.remoteStore)}catch(o){const l=_c(o,"Failed to persist write");t.reject(l)}}),bv.apply(this,arguments)}function Hb(n,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,ye.Z)(function*(n,e){const t=He(n);try{const r=yield Eb(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.ia.get(l);h&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Xu=!0:o.modifiedDocuments.size>0?dt(h.Xu):o.removedDocuments.size>0&&(dt(h.Xu),h.Xu=!1))}),yield Wo(t,r,e)}catch(r){yield cc(r)}}),Kf.apply(this,arguments)}function mm(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ta.forEach((l,h)=>{const m=h.view.Eu(e);m.snapshot&&o.push(m.snapshot)}),function(l,h){const m=He(l);m.onlineState=h;let w=!1;m.queries.forEach((C,M)=>{for(const N of M.listeners)N.Eu(h)&&(w=!0)}),w&&wc(m)}(r.eventManager,e),o.length&&r.Zu.Ko(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hI(n,e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,ye.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ia.get(e),l=o&&o.key;if(l){let h=new nr(Ve.comparator);h=h.insert(l,Cn.newNoDocument(l,Et.min()));const m=un().add(l),w=new Mf(Et.min(),new Map,new En(Vt),h,m);yield Hb(r,w),r.sa=r.sa.remove(l),r.ia.delete(e),Em(r)}else yield ih(r.localStore,e,!1).then(()=>fh(r,e,t)).catch(cc)}),Yf.apply(this,arguments)}function Cv(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,ye.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const o=yield vb(t.localStore,e);_m(t,r,null),Qf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Wo(t,o)}catch(o){yield cc(o)}}),Tv.apply(this,arguments)}function Gb(n,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,ye.Z)(function*(n,e,t){const r=He(n);try{const o=yield function(l,h){const m=He(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.$s.lookupMutationBatch(w,h).next(M=>(dt(null!==M),C=M.keys(),m.$s.removeMutationBatch(w,M))).next(()=>m.$s.performConsistencyCheck(w)).next(()=>m.ai.qs(w,C))})}(r.localStore,e);_m(r,e,t),Qf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Wo(r,o)}catch(o){yield cc(o)}}),Av.apply(this,arguments)}function ym(){return ym=(0,ye.Z)(function*(n,e){const t=He(n);Pu(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=He(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.$s.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.ua.get(r)||[];o.push(e),t.ua.set(r,o)}catch(r){const o=_c(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ym.apply(this,arguments)}function Qf(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function _m(n,e,t){const r=He(n);let o=r.oa[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.oa[r.currentUser.toKey()]=o}}function fh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||Sv(n,r)})}function Sv(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(lh(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),Em(n))}function vm(n,e,t){for(const r of t)r instanceof hh?(n.ra.addReference(r.key,e),zb(n,r)):r instanceof cI?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||Sv(n,r.key)):Xe()}function zb(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.na.add(r),Em(n))}function Em(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new Ve(Xt.fromString(e)),r=n.aa.next();n.ia.set(r,new dm(t)),n.sa=n.sa.insert(t,r),om(n.remoteStore,new xa(as(jd(t.path)),r,2,Ai.A))}}function Wo(n,e,t){return xv.apply(this,arguments)}function xv(){return xv=(0,ye.Z)(function*(n,e,t){const r=He(n),o=[],l=[],h=[];var m;r.ta.isEmpty()||(r.ta.forEach((m,w)=>{h.push(r.ha(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=em.Js(w.targetId,C);l.push(M)}}))}),yield Promise.all(h),r.Zu.Ko(o),yield(m=(0,ye.Z)(function*(w,C){const M=He(w);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>he.forEach(C,H=>he.forEach(H.zs,Z=>M.persistence.referenceDelegate.addReference(N,H.targetId,Z)).next(()=>he.forEach(H.Hs,Z=>M.persistence.referenceDelegate.removeReference(N,H.targetId,Z)))))}catch(N){if(!sc(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const H=N.targetId;if(!N.fromCache){const Z=M.si.get(H),Fe=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);M.si=M.si.insert(H,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,l))}),xv.apply(this,arguments)}function fI(n,e){return Mv.apply(this,arguments)}function Mv(){return Mv=(0,ye.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield $w(t.localStore,e);t.currentUser=e,(o=t).ua.forEach(h=>{h.forEach(m=>{m.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Wo(t,r.ci)}var o}),Mv.apply(this,arguments)}function Mi(n,e){const t=He(n),r=t.ia.get(e);if(r&&r.Xu)return un().add(r.key);{let o=un();const l=t.ea.get(e);if(!l)return o;for(const h of l){const m=t.ta.get(h);o=o.unionWith(m.view.qu)}return o}}function ph(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,ye.Z)(function*(n,e){const t=He(n),r=yield $f(t.localStore,e.query,!0),o=e.view.Ju(r);return t.isPrimaryClient&&vm(t,e.targetId,o.zu),o}),Rv.apply(this,arguments)}function Wb(n,e){return pI.apply(this,arguments)}function pI(){return pI=(0,ye.Z)(function*(n,e){const t=He(n);return Gw(t.localStore,e).then(r=>Wo(t,r))}),pI.apply(this,arguments)}function Jf(n,e,t,r){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,ye.Z)(function*(n,e,t,r){const o=He(n),l=yield function(h,m){const w=He(h),C=He(w.$s);return w.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.ln(M,m).next(N=>N?w.ai.qs(M,N):he.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield mc(o.remoteStore):"acknowledged"===t||"rejected"===t?(_m(o,e,r||null),Qf(o,e),m=e,He(He(o.localStore).$s).dn(m)):Xe(),yield Wo(o,l)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),Nv.apply(this,arguments)}function Pv(){return Pv=(0,ye.Z)(function*(n,e){const t=He(n);if(yI(t),Dm(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield kv(t,r.toArray());t.ca=!0,yield fv(t.remoteStore,!0);for(const l of o)om(t.remoteStore,l)}else if(!1===e&&!1!==t.ca){const r=[];let o=Promise.resolve();t.ea.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(fh(t,h),ih(t.localStore,h,!0))),lh(t.remoteStore,h)}),yield o,yield kv(t,r),function(l){const h=He(l);h.ia.forEach((m,w)=>{lh(h.remoteStore,w)}),h.ra.bi(),h.ia=new Map,h.sa=new nr(Ve.comparator)}(t),t.ca=!1,yield fv(t.remoteStore,!1)}}),Pv.apply(this,arguments)}function kv(n,e,t){return Fv.apply(this,arguments)}function Fv(){return Fv=(0,ye.Z)(function*(n,e,t){const r=He(n),o=[],l=[];for(const h of e){let m;const w=r.ea.get(h);if(w&&0!==w.length){m=yield Ou(r.localStore,as(w[0]));for(const C of w){const M=r.ta.get(C),N=yield ph(r,M);N.snapshot&&l.push(N.snapshot)}}else{const C=yield Hw(r.localStore,h);m=yield Ou(r.localStore,C),yield fm(r,gI(C),h,!1)}o.push(m)}return r.Zu.Ko(l),o}),Fv.apply(this,arguments)}function gI(n){return a_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Lv(n){const e=He(n);return He(He(e.localStore).persistence).Os()}function mI(n,e,t,r){return wm.apply(this,arguments)}function wm(){return wm=(0,ye.Z)(function*(n,e,t,r){const o=He(n);if(o.ca)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const l=o.ea.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const h=yield Gw(o.localStore,HE(l[0])),m=Mf.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Wo(o,h,m);break}case"rejected":yield ih(o.localStore,e,!0),fh(o,e,r);break;default:Xe()}}),wm.apply(this,arguments)}function Im(n,e,t){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,ye.Z)(function*(n,e,t){const r=yI(n);if(r.ca){for(const o of e){if(r.ea.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const l=yield Hw(r.localStore,o),h=yield Ou(r.localStore,l);yield fm(r,gI(l),h.targetId,!1),om(r.remoteStore,h)}for(const o of t)r.ea.has(o)&&(yield ih(r.localStore,o,!1).then(()=>{lh(r.remoteStore,o),fh(r,o)}).catch(cc))}}),Xf.apply(this,arguments)}function yI(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mi.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hI.bind(null,e),e.Zu.Ko=Lb.bind(null,e.eventManager),e.Zu.la=Vb.bind(null,e.eventManager),e}function Dm(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gb.bind(null,e),e}class Vv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=sm(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return hc(this.persistence,new jw,e.initialUser,this.M)}_a(e){return new Zw(X_.Wi,this.M)}da(e){return new Yw}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ep extends Vv{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield Dm(r.ga.syncEngine),yield mc(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return hc(this.persistence,new jw,e.initialUser,this.M)}wa(e){return new Lw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new q_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eI(),Gf(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new Yw}}class _I extends ep{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ga.syncEngine;r.sharedClientState instanceof nv&&(r.sharedClientState.syncEngine={kr:Jf.bind(null,o),Mr:mI.bind(null,o),Or:Im.bind(null,o),Os:Lv.bind(null,o),Nr:Wb.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var l=(0,ye.Z)(function*(h){yield function Ov(n,e){return Pv.apply(this,arguments)}(r.ga.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}da(e){const t=eI();if(!nv.vt(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Uv{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>mm(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=fI.bind(null,r.syncEngine),yield fv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fb}createDatastore(e){const t=sm(e.databaseInfo.databaseId),r=new Xw(e.databaseInfo);return new zf(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>mm(this.syncEngine,m,0),h=Qw.vt()?new Qw:new rv,new CT(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,m,w,C){const M=new hm(r,o,l,h,m,w);return C&&(M.ca=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=He(t);Ne("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield uh(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function bm(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class gh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class AT{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new fr,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),o=Number(r);isNaN(o)&&e.Ra(`length string (${r}) is not valid number`);const l=yield e.ba(o);return new wv(JSON.parse(l),t.length+o)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ye.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Kb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(l,h){const m=He(l),w=Pf(m.M)+"/documents",C={documents:h.map(Z=>Kd(m.M,Z))},M=yield m.co("BatchGetDocuments",w,C),N=new Map;M.forEach(Z=>{const fe=function XD(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=$o(t,r.found.name),l=xr(r.found.updateTime),h=new pi({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=$o(t,r.missing),l=xr(r.readTime);return Cn.newNoDocument(o,l)}(n,e):Xe()}(m.M,Z);N.set(fe.key.toString(),fe)});const H=[];return h.forEach(Z=>{const fe=N.get(Z.toString());dt(!!fe),H.push(fe)}),H}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=Ve.fromPath(o);e.mutations.push(new Af(l,e.precondition(l)))}),yield(r=(0,ye.Z)(function*(o,l){const h=He(o),m=Pf(h.M)+"/documents",w={writes:l.map(C=>Yd(h.M,C))};yield h.ro("Commit",m,w)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?mr.updateTime(t):mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mr.updateTime(t)}return mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yb{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.va=5,this.So=new iv(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ye.Z)(function*(){const t=new Kb(e.datastore),r=e.Da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Ca(l)}))}).catch(o=>{e.Ca(o)})}))}Da(e){try{const t=this.updateFunction(e);return!Wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Sf(t)}return!1}}class vI{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=TE.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ye.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Ne("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=_c(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Bv(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(l){r.isEqual(l)||(yield $w(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),jv.apply(this,arguments)}function $v(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Hv(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>uI(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>uI(e.remoteStore,l)),n.onlineComponents=e}),Cm.apply(this,arguments)}function Hv(n){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,ye.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield Bv(n,new Vv)),n.offlineComponents}),Gv.apply(this,arguments)}function tp(n){return qv.apply(this,arguments)}function qv(){return qv=(0,ye.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield $v(n,new Uv)),n.onlineComponents}),qv.apply(this,arguments)}function zv(n){return Hv(n).then(e=>e.persistence)}function Tm(n){return Hv(n).then(e=>e.localStore)}function Wv(n){return tp(n).then(e=>e.remoteStore)}function Am(n){return tp(n).then(e=>e.syncEngine)}function mh(n){return Zv.apply(this,arguments)}function Zv(){return Zv=(0,ye.Z)(function*(n){const e=yield tp(n),t=e.eventManager;return t.onListen=jb.bind(null,e.syncEngine),t.onUnlisten=Dv.bind(null,e.syncEngine),t}),Zv.apply(this,arguments)}function Qb(n,e,t={}){const r=new fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,l,h,m,w){const C=new gh({next:N=>{l.enqueueAndForget(()=>_v(o,M));const H=N.docs.has(h);!H&&N.fromCache?w.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new Ev(jd(h.path),C,{includeMetadataChanges:!0,Du:!0});return mv(o,M)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}function Jb(n,e,t={}){const r=new fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,l,h,m,w){const C=new gh({next:N=>{l.enqueueAndForget(()=>_v(o,M)),N.fromCache&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),M=new Ev(h,C,{includeMetadataChanges:!0,Du:!0});return mv(o,M)}(yield mh(n),n.asyncQueue,e,t,r)})),r.promise}const np=new Map;function wI(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kv(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sm(n){if(!Ve.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yv(n){if(Ve.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rp(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xm(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Qv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Kv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,e instanceof Da?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ky;switch(t.type){case"gapi":const r=t.client;return dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new bE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=np.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),np.delete(e),t.terminate())}(this),Promise.resolve()}}class Nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nn(this.firestore,e,this._key)}}class ni{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class Zo extends ni{constructor(e,t,r){super(e,t,jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new Ve(e))}withConverter(e){return new Zo(this.firestore,e,this._path)}}function Mm(n,e,...t){if(n=(0,xt.m9)(n),wI("collection","path",e),n instanceof yh){const r=Xt.fromString(e,...t);return Yv(r),new Zo(n,null,r)}{if(!(n instanceof Nn||n instanceof Zo))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return Yv(r),new Zo(n.firestore,null,r)}}function Jv(n,e,...t){if(n=(0,xt.m9)(n),1===arguments.length&&(e=TE.R()),wI("doc","path",e),n instanceof yh){const r=Xt.fromString(e,...t);return Sm(r),new Nn(n,null,new Ve(r))}{if(!(n instanceof Nn||n instanceof Zo))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return Sm(r),new Nn(n.firestore,n instanceof Zo?n.converter:null,new Ve(r))}}function eC(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),(n instanceof Nn||n instanceof Zo)&&(e instanceof Nn||e instanceof Zo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tC(n,e){return n=(0,xt.m9)(n),e=(0,xt.m9)(e),n instanceof ni&&e instanceof ni&&n.firestore===e.firestore&&Hd(n._query,e._query)&&n.converter===e.converter}class nC{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new iv(this,"async_queue_retry"),this.Ua=()=>{const t=Gf();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Gf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=Gf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new fr;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ye.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!sc(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,er("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const o=yc.createAndSchedule(this,e,t,r,l=>this.Qa(l));return this.Oa.push(o),o}qa(){this.Fa&&Xe()}verifyOperationInProgress(){}ja(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function Xv(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class rC{constructor(){this._progressObserver={},this._taskCompletionResolver=new fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class On extends yh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new nC,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bI(this),this._firestoreClient.terminate()}}function fn(n){return n._firestoreClient||bI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bI(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ME(n._databaseId,l,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var l,m;n._firestoreClient=new vI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CI(n,e,t){const r=new fr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield Bv(n,t),yield $v(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===ae.FAILED_PRECONDITION||l.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function xI(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yo(gr.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yo(gr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _h{constructor(e){this._methodName=e}}class Rm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const MI=/^__.*__$/;class uC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pg(e,this.data,t,this.fieldTransforms)}}class RI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Nm{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Ja(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.ec(e),o}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Xa({path:r,tc:!1});return o.Ja(),o}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Lm(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(n0(this.Ya)&&MI.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class LT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||sm(e)}uc(e,t,r,o=!1){return new Nm({Ya:e,methodName:t,oc:r,path:pr.emptyPath(),tc:!1,rc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Lu(n){const e=n._freezeSettings(),t=sm(n._databaseId);return new LT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ip(n,e,t,r,o,l={}){const h=n.uc(l.merge||l.mergeFields?2:0,e,t,o);kI("Data must be an object, but it was:",h,r);const m=PI(r,h);let w,C;if(l.merge)w=new ql(h.fieldMask),C=h.fieldTransforms;else if(l.mergeFields){const M=[];for(const N of l.mergeFields){const H=km(e,N,t);if(!h.contains(H))throw new Ae(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);dC(M,H)||M.push(H)}w=new ql(M),C=h.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=h.fieldTransforms;return new uC(new pi(m),w,C)}class sp extends _h{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sp}}function NI(n,e,t){return new Nm({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Om extends _h{_toFieldTransform(e){return new qd(e.path,new Gd)}isEqual(e){return e instanceof Om}}class r0 extends _h{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=NI(this,e,!0),r=this.ac.map(l=>Ic(l,t)),o=new $s(r);return new qd(e.path,o)}isEqual(e){return this===e}}class s0 extends _h{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=NI(this,e,!0),r=this.ac.map(l=>Ic(l,t)),o=new Tu(r);return new qd(e.path,o)}isEqual(e){return this===e}}class OI extends _h{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new nc(e.M,zD(e.M,this.cc));return new qd(e.path,t)}isEqual(e){return this===e}}function o0(n,e,t,r){const o=n.uc(1,e,t);kI("Data must be an object, but it was:",o,r);const l=[],h=pi.empty();Gl(r,(w,C)=>{const M=Fm(e,w,t);C=(0,xt.m9)(C);const N=o.nc(M);if(C instanceof sp)l.push(M);else{const H=Ic(C,N);null!=H&&(l.push(M),h.set(M,H))}});const m=new ql(l);return new RI(h,m,o.fieldTransforms)}function Pm(n,e,t,r,o,l){const h=n.uc(1,e,t),m=[km(e,r,t)],w=[o];if(l.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<l.length;H+=2)m.push(km(e,l[H])),w.push(l[H+1]);const C=[],M=pi.empty();for(let H=m.length-1;H>=0;--H)if(!dC(C,m[H])){const Z=m[H];let fe=w[H];fe=(0,xt.m9)(fe);const Fe=h.nc(Z);if(fe instanceof sp)C.push(Z);else{const tt=Ic(fe,Fe);null!=tt&&(C.push(Z),M.set(Z,tt))}}const N=new ql(C);return new RI(M,N,h.fieldTransforms)}function a0(n,e,t,r=!1){return Ic(t,n.uc(r?4:3,e))}function Ic(n,e){if(lC(n=(0,xt.m9)(n)))return kI("Unsupported field value:",e,n),PI(n,e);if(n instanceof _h)return function(t,r){if(!n0(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let m=Ic(h,r.sc(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zD(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=tr.fromDate(t);return{timestampValue:Vg(r.M,o)}}if(t instanceof tr){const o=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vg(r.M,o)}}if(t instanceof Rm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yo)return{bytesValue:ow(r.M,t._byteString)};if(t instanceof Nn){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.ic(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:I_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${rp(t)}`)}(n,e)}function PI(n,e){const t={};return AE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,o)=>{const l=Ic(o,e.Za(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function lC(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof Rm||n instanceof Yo||n instanceof Nn||n instanceof _h)}function kI(n,e,t){if(!lC(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rp(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function km(n,e,t){if((e=(0,xt.m9)(e))instanceof mo)return e._internalPath;if("string"==typeof e)return Fm(n,e);throw Lm("Field path arguments must be of type string or ",n,!1,void 0,t)}const cC=new RegExp("[~\\*/\\[\\]]");function Fm(n,e,t){if(e.search(cC)>=0)throw Lm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mo(...e.split("."))._internalPath}catch(r){throw Lm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lm(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Ae(ae.INVALID_ARGUMENT,m+n+w)}function dC(n,e){return n.some(t=>t.isEqual(e))}class Vm{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new VT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(u0("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class VT extends Vm{data(){return super.data()}}function u0(n,e){return"string"==typeof e?Fm(n,e):e instanceof mo?e._internalPath:e._delegate._internalPath}class vh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends Vm{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(u0("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vu extends Ma{data(e={}){return super.data(e)}}class Uu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new vh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vu(this._firestore,this._userDataWriter,r.key,r,new vh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Vu(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new Vu(r._firestore,r._userDataWriter,h.doc.key,h.doc,new vh(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==h.type&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),C=l.indexOf(h.doc.key)),{type:hC(h.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hC(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function l0(n,e){return n instanceof Ma&&e instanceof Ma?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uu&&e instanceof Uu&&n._firestore===e._firestore&&tC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Bu(n){if(Sg(n)&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eh{}function Qo(n,...e){for(const t of e)n=t._apply(n);return n}class c0 extends Eh{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Lu(e.firestore),r=function(o,l,h,m,w,C,M){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){p0(M,C);const Z=[];for(const fe of M)Z.push(f0(m,o,fe));N={arrayValue:{values:Z}}}else N=f0(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||p0(M,C),N=a0(h,"where",M,"in"===C||"not-in"===C);const H=qn.create(w,C,N);return function(Z,fe){if(fe.S()){const tt=xg(Z);if(null!==tt&&!tt.isEqual(fe.field))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${fe.field.toString()}'`);const Zt=u_(Z);null!==Zt&&g0(0,fe.field,Zt)}const Fe=function(tt,Zt){for(const ht of tt.filters)if(Zt.indexOf(ht.op)>=0)return ht.op;return null}(Z,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(fe.op));if(null!==Fe)throw new Ae(ae.INVALID_ARGUMENT,Fe===fe.op?`Invalid query. You cannot use more than one '${fe.op.toString()}' filter.`:`Invalid query. You cannot use '${fe.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new ni(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new jo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class d0 extends Eh{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new tc(o,l);return function(m,w){if(null===u_(m)){const C=xg(m);null!==C&&g0(0,C,w.field)}}(r,h),h}(e._query,this.hc,this.dc);return new ni(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new jo(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class op extends Eh{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new ni(e.firestore,e.converter,BE(e._query,this._c,this.wc))}}class pC extends Eh{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=VI(e,this.type,this.mc,this.gc);return new ni(e.firestore,e.converter,(o=t,new jo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class LI extends Eh{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=VI(e,this.type,this.mc,this.gc);return new ni(e.firestore,e.converter,(o=t,new jo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function VI(n,e,t,r){if(t[0]=(0,xt.m9)(t[0]),t[0]instanceof Vm)return function(o,l,h,m,w){if(!m)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const M of $d(o))if(M.field.isKeyField())C.push(Yl(l,m.key));else{const N=m.data.field(M.field);if(Xy(N))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=M.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(N)}return new Aa(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Lu(n.firestore);return function(l,h,m,w,C,M){const N=l.explicitOrderBy;if(C.length>N.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let Z=0;Z<C.length;Z++){const fe=C[Z];if(N[Z].field.isKeyField()){if("string"!=typeof fe)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!l_(l)&&-1!==fe.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=l.path.child(Xt.fromString(fe));if(!Ve.isDocumentKey(Fe))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const tt=new Ve(Fe);H.push(Yl(h,tt))}else{const Fe=a0(m,w,fe);H.push(Fe)}}return new Aa(H,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function f0(n,e,t){if("string"==typeof(t=(0,xt.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l_(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!Ve.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yl(n,new Ve(r))}if(t instanceof Nn)return Yl(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rp(t)}.`)}function p0(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function g0(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class m0{convertValue(e,t="none"){switch(Iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Gl(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Rm(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=e_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ig(e));default:return null}}convertTimestamp(e){const t=wu(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);dt(dw(r));const o=new Da(r.get(1),r.get(3)),l=new Ve(r.popFirst(5));return o.isEqual(t)||er(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Um(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UI extends m0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}class Bm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,t,r){this._verifyNotCommitted();const o=Dc(e,this._firestore),l=Um(o.converter,t,r),h=ip(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,mr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Dc(e,this._firestore);let h;return h="string"==typeof(t=(0,xt.m9)(t))||t instanceof mo?Pm(this._dataReader,"WriteBatch.update",l._key,t,r,o):o0(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dc(e,this._firestore);return this._mutations=this._mutations.concat(new Wd(t._key,mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dc(n,e){if((n=(0,xt.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ra extends m0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}}function jI(n,e,t){n=en(n,Nn);const r=en(n.firestore,On),o=Um(n.converter,e,t);return ap(r,[ip(Lu(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,mr.none())])}function $I(n,e,t,...r){n=en(n,Nn);const o=en(n.firestore,On),l=Lu(o);let h;return h="string"==typeof(e=(0,xt.m9)(e))||e instanceof mo?Pm(l,"updateDoc",n._key,e,t,r):o0(l,"updateDoc",n._key,e),ap(o,[h.toMutation(n._key,mr.exists(!0))])}function vC(n,...e){var t,r,o;n=(0,xt.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Xv(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges};if(Xv(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,M;if(n instanceof Nn)C=en(n.firestore,On),M=jd(n._key.path),w={next:N=>{e[h]&&e[h](y0(C,n,N))},error:e[h+1],complete:e[h+2]};else{const N=en(n,ni);C=en(N.firestore,On),M=N._query;const H=new Ra(C);w={next:Z=>{e[h]&&e[h](new Uu(C,H,N,Z))},error:e[h+1],complete:e[h+2]},Bu(n._query)}return function(N,H,Z,fe){const Fe=new gh(fe),tt=new Ev(H,Fe,Z);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return mv(yield mh(N),tt)})),()=>{Fe.pa(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return _v(yield mh(N),tt)}))}}(fn(C),M,m,w)}function ap(n,e){return function(t,r){const o=new fr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function $b(n,e,t){return bv.apply(this,arguments)}(yield Am(t),r,o)})),o.promise}(fn(n),e)}function y0(n,e,t){const r=t.docs.get(e._key),o=new Ra(n);return new Ma(n,o,e._key,r,new vh(t.hasPendingWrites,t.fromCache),e.converter)}class ZT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lu(e)}get(e){const t=Dc(e,this._firestore),r=new UI(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const l=o[0];if(l.isFoundDocument())return new Vm(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new Vm(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=Dc(e,this._firestore),l=Um(o.converter,t,r),h=ip(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=Dc(e,this._firestore);let h;return h="string"==typeof(t=(0,xt.m9)(t))||t instanceof mo?Pm(this._dataReader,"Transaction.update",l._key,t,r,o):o0(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Dc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dc(e,this._firestore),r=new Ra(this._firestore);return super.get(e).then(o=>new Ma(this._firestore,r,t._key,o._document,new vh(!1,!1),t.converter))}}function I(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function A(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function S(){if(!function SE(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Od=ga.SDK_VERSION,(0,ga._registerComponent)(new gl.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new On(o,new jD(t.getProvider("auth-internal")),new CE(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,ga.registerVersion)(Wy,"3.4.7",n),(0,ga.registerVersion)(Wy,"3.4.7","esm2017")}();class P{constructor(e){this._delegate=e}static fromBase64String(e){return S(),new P(Yo.fromBase64String(e))}static fromUint8Array(e){return A(),new P(Yo.fromUint8Array(e))}toBase64(){return S(),this._delegate.toBase64()}toUint8Array(){return A(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function V(n){return function W(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class me{enableIndexedDbPersistence(e,t){return function e0(n,e){xI(n=en(n,On));const t=fn(n),r=n._freezeSettings(),o=new Uv;return CI(t,o,new ep(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function iC(n){xI(n=en(n,On));const e=fn(n),t=n._freezeSettings(),r=new Uv;return CI(e,r,new _I(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function t0(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!ho.vt())return Promise.resolve();const o=r+"main";yield ho.delete(o)}),function(r){return t.apply(this,arguments)})(z_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Oe{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Da||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function II(n,e,t,r={}){var o;const l=(n=en(n,yh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Pd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=ti.MOCK_USER;else{h=(0,xt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ti(w)}n._authCredentials=new wf(new Zy(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function AI(n){return function ST(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield zv(n),t=yield Wv(n);return e.setNetworkEnabled(!0),function(r){const o=He(r);return o.lu.delete(0),ah(o)}(t)}))}(fn(n=en(n,On)))}(this._delegate)}disableNetwork(){return function sC(n){return function EI(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield zv(n),t=yield Wv(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const l=He(o);l.lu.add(0),yield uh(l),l._u.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(fn(n=en(n,On)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function TI(n){return function(e){const t=new fr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function qb(n,e){return ym.apply(this,arguments)}(yield Am(e),t)})),t.promise}(fn(n=en(n,On)))}(this._delegate)}onSnapshotsInSync(e){return function WT(n,e){return function RT(n,e){const t=new gh(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield mh(n),o=t,He(r).Tu.add(o),void o.next();var r,o})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield mh(n),o=t,void He(r).Tu.delete(o);var r,o}))}}(fn(n=en(n,On)),Xv(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $u(this,Mm(this._delegate,e))}catch(t){throw _n(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pt(this,Jv(this._delegate,e))}catch(t){throw _n(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ri(this,function Xb(n,e){if(n=en(n,yh),wI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ni(n,null,(t=e,new jo(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw _n(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KT(n,e){return function NT(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,tp(o).then(l=>l.datastore));var o;new Yb(n.asyncQueue,r,e,t).run()})),t.promise}(fn(n=en(n,On)),t=>e(new ZT(n,t)))}(this._delegate,t=>e(new Ie(this,t)))}batch(){return fn(this._delegate),new ct(new Bm(this._delegate,e=>ap(this._delegate,e)))}loadBundle(e){return function SI(n,e){const t=fn(n=en(n,On)),r=new rC;return function OT(n,e,t,r){const o=function(l,h){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,w=function(w,C){if(w instanceof Uint8Array)return bm(w,C);if(w instanceof ArrayBuffer)return bm(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new AT(w,h);var w}(t,sm(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function Zb(n,e,t){const r=He(n);var o;(o=(0,ye.Z)(function*(l,h,m){try{const w=yield h.getMetadata();if(yield function(H,Z){const fe=He(H),Fe=xr(Z.createTime);return fe.persistence.runTransaction("hasNewerBundle","readonly",tt=>fe.ds.getBundleMetadata(tt,Z.id)).then(tt=>!!tt&&tt.createTime.compareTo(Fe)>=0)}(l.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(cm(w));const C=new Ub(w,l.localStore,h.M);let M=yield h.fa();for(;M;){const H=yield C.Nu(M);H&&m._updateProgress(H),M=yield h.fa()}const N=yield C.complete();return yield Wo(l,N.Ou,void 0),yield function(H,Z){const fe=He(H);return fe.persistence.runTransaction("Save bundle","readwrite",Fe=>fe.ds.saveBundleMetadata(Fe,Z))}(l.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Mu)}catch(w){return Pd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(l,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Am(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function aC(n,e){return function PT(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=He(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.ds.getNamedQuery(l,r))}(yield Tm(n),e)}))}(fn(n=en(n,On)),e).then(t=>t?new ni(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ri(this,t):null)}}class Ue extends m0{constructor(e){super(),this.firestore=e}convertBytes(e){return new P(new Yo(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pt.forKey(t,this.firestore,null)}}class Ie{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ue(e)}get(e){const t=Na(e);return this._delegate.get(t).then(r=>new bc(this._firestore,new Ma(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Na(e);return r?(I("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Na(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}}class ct{constructor(e){this._delegate=e}set(e,t,r){const o=Na(e);return r?(I("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Na(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Na(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mt{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cc(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mt.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Mt(e,new Ue(e),t),o.set(t,l)),l}}Mt.INSTANCES=new WeakMap;class Pt{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ue(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pt(t,new Nn(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new Pt(t,new Nn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $u(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $u(this.firestore,Mm(this._delegate,e))}catch(t){throw _n(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.m9)(e))instanceof Nn&&eC(this._delegate,e)}set(e,t){t=I("DocumentReference.set",t);try{return t?jI(this._delegate,e,t):jI(this._delegate,e)}catch(r){throw _n(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$I(this._delegate,e):$I(this._delegate,e,t,...r)}catch(o){throw _n(o,"updateDoc()","DocumentReference.update()")}}delete(){return function qT(n){return ap(en(n.firestore,On),[new Wd(n._key,mr.none())])}(this._delegate)}onSnapshot(...e){const t=ju(e),r=jm(e,o=>new bc(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return vC(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yC(n){n=en(n,Nn);const e=en(n.firestore,On),t=fn(e),r=new Ra(e);return function xT(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,l,h){try{const m=yield function(w,C){const M=He(w);return M.persistence.runTransaction("read document","readonly",N=>M.ai.Bs(N,C))}(o,l);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=_c(m,`Failed to get document '${l} from cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield Tm(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ma(e,r,n._key,o,new vh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _C(n){n=en(n,Nn);const e=en(n.firestore,On);return Qb(fn(e),n._key,{source:"server"}).then(t=>y0(e,n,t))}(this._delegate):function BI(n){n=en(n,Nn);const e=en(n.firestore,On);return Qb(fn(e),n._key).then(t=>y0(e,n,t))}(this._delegate),t.then(r=>new bc(this.firestore,new Ma(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pt(this.firestore,this._delegate.withConverter(e?Mt.getInstance(this.firestore,e):null))}}function _n(n,e,t){return n.message=n.message.replace(e,t),n}function ju(n){for(const e of n)if("object"==typeof e&&!V(e))return e;return{}}function jm(n,e){var t,r;let o;return o=V(n[0])?n[0]:V(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class bc{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return l0(this._delegate,e._delegate)}}class Cc extends bc{data(e){const t=this._delegate.data(e);return function wg(n,e){n||Xe()}(void 0!==t),t}}class ri{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ue(e)}where(e,t,r){try{return new ri(this.firestore,Qo(this._delegate,function fC(n,e,t){const r=e,o=u0("where",n);return new c0(o,r,t)}(e,t,r)))}catch(o){throw _n(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ri(this.firestore,Qo(this._delegate,function h0(n,e="asc"){const t=e,r=u0("orderBy",n);return new d0(r,t)}(e,t)))}catch(r){throw _n(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ri(this.firestore,Qo(this._delegate,function UT(n){return xm("limit",n),new op("limit",n,"F")}(e)))}catch(t){throw _n(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ri(this.firestore,Qo(this._delegate,function BT(n){return xm("limitToLast",n),new op("limitToLast",n,"L")}(e)))}catch(t){throw _n(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ri(this.firestore,Qo(this._delegate,function jT(...n){return new pC("startAt",n,!0)}(...e)))}catch(t){throw _n(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ri(this.firestore,Qo(this._delegate,function FI(...n){return new pC("startAfter",n,!1)}(...e)))}catch(t){throw _n(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ri(this.firestore,Qo(this._delegate,function gC(...n){return new LI("endBefore",n,!1)}(...e)))}catch(t){throw _n(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ri(this.firestore,Qo(this._delegate,function mC(...n){return new LI("endAt",n,!0)}(...e)))}catch(t){throw _n(t,"endAt()","Query.endAt()")}}isEqual(e){return tC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function HT(n){n=en(n,ni);const e=en(n.firestore,On),t=fn(e),r=new Ra(e);return function MT(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,l,h){try{const m=yield $f(o,l,!0),w=new dI(l,m.hi),C=w.Gu(m.documents),M=w.applyChanges(C,!1);h.resolve(M.snapshot)}catch(m){const w=_c(m,`Failed to execute query '${l} against cache`);h.reject(w)}}),function(o,l,h){return r.apply(this,arguments)})(yield Tm(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Uu(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function GT(n){n=en(n,ni);const e=en(n.firestore,On),t=fn(e),r=new Ra(e);return Jb(t,n._query,{source:"server"}).then(o=>new Uu(e,r,n,o))}(this._delegate):function $T(n){n=en(n,ni);const e=en(n.firestore,On),t=fn(e),r=new Ra(e);return Bu(n._query),Jb(t,n._query).then(o=>new Uu(e,r,n,o))}(this._delegate),t.then(r=>new up(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ju(e),r=jm(e,o=>new up(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return vC(this._delegate,t,r)}withConverter(e){return new ri(this.firestore,this._delegate.withConverter(e?Mt.getInstance(this.firestore,e):null))}}class _0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class up{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ri(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _0(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Cc(this._firestore,r))})}isEqual(e){return l0(this._delegate,e._delegate)}}class $u extends ri{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pt(this.firestore,e):null}doc(e){try{return new Pt(this.firestore,void 0===e?Jv(this._delegate):Jv(this._delegate,e))}catch(t){throw _n(t,"doc()","CollectionReference.doc()")}}add(e){return function zT(n,e){const t=en(n.firestore,On),r=Jv(n),o=Um(n.converter,e);return ap(t,[ip(Lu(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,mr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pt(this.firestore,t))}isEqual(e){return eC(this._delegate,e._delegate)}withConverter(e){return new $u(this.firestore,this._delegate.withConverter(e?Mt.getInstance(this.firestore,e):null))}}function Na(n){return en(n,Nn)}class lp{constructor(...e){this._delegate=new mo(...e)}static documentId(){return new lp(pr.keyField().canonicalString())}isEqual(e){return(e=(0,xt.m9)(e))instanceof mo&&this._delegate._internalPath.isEqual(e._internalPath)}}class cp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function QT(){return new Om("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cp(e)}static delete(){const e=function YT(){return new sp("deleteField")}();return e._methodName="FieldValue.delete",new cp(e)}static arrayUnion(...e){const t=function i(...n){return new r0("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cp(t)}static arrayRemove(...e){const t=function s(...n){return new s0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cp(t)}static increment(e){const t=function a(n){return new OI("increment",n)}(e);return t._methodName="FieldValue.increment",new cp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Dx={Firestore:Oe,GeoPoint:Rm,Timestamp:tr,Blob:P,Transaction:Ie,WriteBatch:ct,DocumentReference:Pt,DocumentSnapshot:bc,Query:ri,QueryDocumentSnapshot:Cc,QuerySnapshot:up,CollectionReference:$u,FieldPath:lp,FieldValue:cp,setLogLevel:function Qe(n){!function BD(n){Uo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function JT(n,e){return function Tx(n,e=ld.z){return new qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function EC(n,e){return JT(n,e).pipe((0,It.U)(t=>({payload:t,type:"query"})))}function HI(n,e){return EC(n,e).pipe(du(void 0),dd(),(0,It.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(M=>M.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),l}))}function XT(n,e,t){return HI(n,t).pipe(Oo((r,o)=>function Sx(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function xx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),function Gh(n,e=Di.y){return n=null!=n?n:gy,(0,zr.e)((t,r)=>{let o,l=!0;t.subscribe((0,yn.x)(r,h=>{const m=e(h);(l||!n(o,m))&&(l=!1,o=m,r.next(h))}))})}(),(0,It.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function wC(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function eA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Cx(n){(function bx(n,e){n.INTERNAL.registerComponent(new gl.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},Dx)))})(n,(e,t)=>new Oe(e,t,new me)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(Bp.Z);class tA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=HI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,It.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(du(void 0),dd(),Kn(([r,o])=>o.length>0||!r),(0,It.U)(([r,o])=>o),Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Oo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eA(e);return XT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return EC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Yn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Yn.iC)}add(e){return this.ref.add(e)}doc(e){return new nA(this.ref.doc(e),this.afs)}}class nA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=sA(r,t);return new tA(o,l,this.afs)}snapshotChanges(){return function Ax(n,e){return JT(n,e).pipe(du(void 0),dd(),(0,It.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,It.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Qt.D)(this.ref.get(e)).pipe(Yn.iC)}}class Mx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HI(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Kn(t=>t.length>0),Yn.iC):HI(this.query,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Oo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eA(e);return XT(this.query,t,this.afs.schedulers.outsideAngular).pipe(Yn.iC)}valueChanges(e={}){return EC(this.query,this.afs.schedulers.outsideAngular).pipe((0,It.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Yn.iC)}get(e){return(0,Qt.D)(this.query.get(e)).pipe(Yn.iC)}}const rA=new g.OlP("angularfire2.enableFirestorePersistence"),iA=new g.OlP("angularfire2.firestore.persistenceSettings"),Rx=new g.OlP("angularfire2.firestore.settings"),Nx=new g.OlP("angularfire2.firestore.use-emulator");function sA(n,e=(t=>t)){return{query:e(n),ref:n}}let oA=(()=>{class n{constructor(t,r,o,l,h,m,w,C,M,N,H,Z,fe,Fe,tt,Zt,ht){this.schedulers=w;const wn=(0,es.on)(t,m,r),bt=M;N&&ud(wn,m,H,fe,Fe,tt,Z,Zt),[this.firestore,this.persistenceEnabled$]=(0,es.cc)(`${wn.name}.firestore`,"AngularFirestore",wn.name,()=>{const Ht=m.runOutsideAngular(()=>wn.firestore());if(l&&Ht.settings(l),bt&&Ht.useEmulator(...bt),o&&!lr(h)){const Gt=()=>{try{return(0,Qt.D)(Ht.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(zu){return"undefined"!=typeof console&&console.warn(zu),gt(!1)}};return[Ht,m.runOutsideAngular(Gt)]}return[Ht,gt(!1)]},[l,bt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=sA(o,r),m=this.schedulers.ngZone.run(()=>l);return new tA(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new Mx(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new nA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(es.Dh),g.LFG(es.xv,8),g.LFG(rA,8),g.LFG(Rx,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Yn.HU),g.LFG(iA,8),g.LFG(Nx,8),g.LFG(Up,8),g.LFG($h,8),g.LFG(dy,8),g.LFG(Hh,8),g.LFG(hy,8),g.LFG(od,8),g.LFG(ad,8),g.LFG(Lp,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ox=(()=>{class n{constructor(){jh.Z.registerVersion("angularfire",Yn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:rA,useValue:!0},{provide:iA,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[oA]}),n})();const aA_firebaseConfig={apiKey:"AIzaSyBZNSOg1TSKDC3_xIAT5pywvHBtJzxbLTw",authDomain:"daw2-angular-firebase.firebaseapp.com",projectId:"daw2-angular-firebase",storageBucket:"daw2-angular-firebase.appspot.com",messagingSenderId:"158237726164",appId:"1:158237726164:web:e4715e9aba555bcd8ef241"};class Oa extends vn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Px}=Array,{getPrototypeOf:kx,prototype:Fx,keys:Lx}=Object;function uA(n){if(1===n.length){const e=n[0];if(Px(e))return{args:e,keys:null};if(function Vx(n){return n&&"object"==typeof n&&kx(n)===Fx}(e)){const t=Lx(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Ux}=Array;function lA(n){return(0,It.U)(e=>function Bx(n,e){return Ux(e)?n(...e):n(e)}(n,e))}function cA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var jx=k(9672);function dA(n,e,t){n?(0,jx.f)(t,n,e):e()}function GI(n,e){const t=(0,to.m)(n)?n:()=>n,r=o=>o.error(t());return new qr.y(e?o=>e.schedule(r,0,o):r)}function hA(n){return new qr.y(e=>{(0,nn.Xf)(n()).subscribe(e)})}var $m=k(515),fA=k(727);function pA(){return(0,zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,l=t;t=null,o&&(!l||o===l)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Gx extends qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fA.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fA.w0.EMPTY)}return e}refCount(){return pA()(this)}}function wh(n){return(0,zr.e)((e,t)=>{let l,r=null,o=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,h=>{l=(0,nn.Xf)(n(h,wh(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,l.subscribe(t))})}var ji=k(5577);function v0(n,e){return(0,to.m)(e)?(0,ji.z)(n,e,1):(0,ji.z)(n,1)}function IC(n){return n<=0?()=>$m.E:(0,zr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var yo=k(8505);class Tc{constructor(e,t){this.id=e,this.url=t}}class DC extends Tc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class E0 extends Tc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gA extends Tc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Wx extends Tc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zx extends Tc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kx extends Tc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yx extends Tc{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qx extends Tc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jx extends Tc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mA{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class yA{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xx{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eM{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tM{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nM{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _A{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const zt="primary";class rM{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hm(n){return new rM(n)}const vA="ngNavigationCancelingError";function bC(n){const e=Error("NavigationCancelingError: "+n);return e[vA]=!0,e}function sM(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const h=r[l],m=n[l];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Hu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!EA(n[o],e[o]))return!1;return!0}function EA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function wA(n){return Array.prototype.concat.apply([],n)}function IA(n){return n.length>0?n[n.length-1]:null}function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gu(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):gt(n)}const uM={exact:function CA(n,e,t){if(!hp(n.segments,e.segments)||!qI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!CA(n.children[r],e.children[r],t))return!1;return!0},subset:TA},DA={exact:function lM(n,e){return Hu(n,e)},subset:function cM(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>EA(n[t],e[t]))},ignored:()=>!0};function bA(n,e,t){return uM[t.paths](n.root,e.root,t.matrixParams)&&DA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function TA(n,e,t){return AA(n,e,e.segments,t)}function AA(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!hp(o,t)||e.hasChildren()||!qI(o,t,r))}if(n.segments.length===t.length){if(!hp(n.segments,t)||!qI(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!TA(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(hp(n.segments,o)&&qI(n.segments,o,r)&&n.children[zt])&&AA(n.children[zt],e,l,r)}}function qI(n,e,t){return e.every((r,o)=>DA[t](n[o].parameters,r.parameters))}class dp{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hm(this.queryParams)),this._queryParamMap}toString(){return fM.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ri(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zI(this)}}class w0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hm(this.parameters)),this._parameterMap}toString(){return NA(this)}}function hp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class SA{}class xA{parse(e){const t=new IM(e);return new dp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${I0(e.root,!0)}`,r=function mM(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${WI(t)}=${WI(o)}`).join("&"):`${WI(t)}=${WI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function pM(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const fM=new xA;function zI(n){return n.segments.map(e=>NA(e)).join("/")}function I0(n,e){if(!n.hasChildren())return zI(n);if(e){const t=n.children[zt]?I0(n.children[zt],!1):"",r=[];return Ri(n.children,(o,l)=>{l!==zt&&r.push(`${l}:${I0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hM(n,e){let t=[];return Ri(n.children,(r,o)=>{o===zt&&(t=t.concat(e(r,o)))}),Ri(n.children,(r,o)=>{o!==zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===zt?[I0(n.children[zt],!1)]:[`${o}:${I0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${zI(n)}/${t[0]}`:`${zI(n)}/(${t.join("//")})`}}function MA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function WI(n){return MA(n).replace(/%3B/gi,";")}function CC(n){return MA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ZI(n){return decodeURIComponent(n)}function RA(n){return ZI(n.replace(/\+/g,"%20"))}function NA(n){return`${CC(n.path)}${function gM(n){return Object.keys(n).map(e=>`;${CC(e)}=${CC(n[e])}`).join("")}(n.parameters)}`}const yM=/^[^\/()?;=#]+/;function KI(n){const e=n.match(yM);return e?e[0]:""}const _M=/^[^=?&#]+/,EM=/^[^&#]+/;class IM{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new tn(e,t)),r}parseSegment(){const e=KI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new w0(ZI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=KI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=KI(this.remaining);o&&(r=o,this.capture(r))}e[ZI(t)]=ZI(r)}parseQueryParam(e){const t=function vM(n){const e=n.match(_M);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function wM(n){const e=n.match(EM);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=RA(t),l=RA(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=KI(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=zt);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[zt]:new tn([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class OA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=TC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=TC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=AC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return AC(e,this._root).map(t=>t.value)}}function TC(n,e){if(n===e.value)return e;for(const t of e.children){const r=TC(n,t);if(r)return r}return null}function AC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=AC(n,t);if(r.length)return r.unshift(e),r}return[]}class Ac{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Gm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class PA extends OA{constructor(e,t){super(e),this.snapshot=t,SC(this,e)}toString(){return this.snapshot.toString()}}function kA(n,e){const t=function DM(n,e){const h=new YI([],{},{},"",{},zt,e,null,n.root,-1,{});return new LA("",new Ac(h,[]))}(n,e),r=new Oa([new w0("",{})]),o=new Oa({}),l=new Oa({}),h=new Oa({}),m=new Oa(""),w=new fp(r,o,h,m,l,zt,e,t.root);return w.snapshot=t.root,new PA(new Ac(w,[]),t)}class fp{constructor(e,t,r,o,l,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,It.U)(e=>Hm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,It.U)(e=>Hm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function FA(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function bM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class YI{constructor(e,t,r,o,l,h,m,w,C,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LA extends OA{constructor(e,t){super(t),this.url=e,SC(this,t)}toString(){return VA(this._root)}}function SC(n,e){e.value._routerState=n,e.children.forEach(t=>SC(n,t))}function VA(n){const e=n.children.length>0?` { ${n.children.map(VA).join(", ")} } `:"";return`${n.value}${e}`}function xC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Hu(e.params,t.params)||n.params.next(t.params),function oM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Hu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function MC(n,e){const t=Hu(n.params,e.params)&&function dM(n,e){return hp(n,e)&&n.every((t,r)=>Hu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MC(n.parent,e.parent))}function D0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function TM(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return D0(n,r,o);return D0(n,r)})}(n,e,t);return new Ac(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>D0(n,m)),h}}const r=function AM(n){return new fp(new Oa(n.url),new Oa(n.params),new Oa(n.queryParams),new Oa(n.fragment),new Oa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>D0(n,l));return new Ac(r,o)}}function QI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function b0(n){return"object"==typeof n&&null!=n&&n.outlets}function RC(n,e,t,r,o){let l={};if(r&&Ri(r,(m,w)=>{l[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new dp(t,l,o);const h=UA(n,e,t);return new dp(h,l,o)}function UA(n,e,t){const r={};return Ri(n.children,(o,l)=>{r[l]=o===e?t:UA(o,e,t)}),new tn(n.segments,r)}class BA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&QI(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(b0);if(o&&o!==IA(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class NC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function jA(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return JI(n,e,t);const r=function OM(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const h=n.segments[o],m=t[r];if(b0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!HA(w,C,h))return l;r+=2}else{if(!HA(w,{},h))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new tn(n.segments.slice(0,r.pathIndex),{});return l.children[zt]=new tn(n.segments.slice(r.pathIndex),n.children),JI(l,0,o)}return r.match&&0===o.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?OC(n,e,t):r.match?JI(n,0,o):OC(n,e,t)}function JI(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function NM(n){return b0(n[0])?n[0].outlets:{[zt]:n}}(t),o={};return Ri(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[h]=jA(n.children[h],e,l))}),Ri(n.children,(l,h)=>{void 0===r[h]&&(o[h]=l)}),new tn(n.segments,o)}}function OC(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(b0(l)){const w=PM(l.outlets);return new tn(r,w)}if(0===o&&QI(t[0])){r.push(new w0(n.segments[e].path,$A(t[0]))),o++;continue}const h=b0(l)?l.outlets[zt]:`${l}`,m=o<t.length-1?t[o+1]:null;h&&m&&QI(m)?(r.push(new w0(h,$A(m))),o+=2):(r.push(new w0(h,{})),o++)}return new tn(r,{})}function PM(n){const e={};return Ri(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=OC(new tn([],{}),0,t))}),e}function $A(n){const e={};return Ri(n,(t,r)=>e[r]=`${t}`),e}function HA(n,e,t){return n==t.path&&Hu(e,t.parameters)}class FM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),xC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Gm(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,o[h],r),delete o[h]}),Ri(o,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=Gm(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=Gm(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Gm(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new nM(l.value.snapshot))}),e.children.length&&this.forwardEvent(new eM(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(xC(o),o===l)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),xC(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function LM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class PC{constructor(e,t){this.routes=e,this.module=t}}function Ih(n){return"function"==typeof n}function pp(n){return n instanceof dp}const C0=Symbol("INITIAL_VALUE");function T0(){return $n(n=>function $x(...n){const e=(0,Ss.yG)(n),t=(0,Ss.jO)(n),{args:r,keys:o}=uA(n);if(0===r.length)return(0,Qt.D)([],e);const l=new qr.y(function Hx(n,e,t=Di.y){return r=>{dA(e,()=>{const{length:o}=n,l=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)dA(e,()=>{const C=(0,Qt.D)(n[w],e);let M=!1;C.subscribe((0,yn.x)(r,N=>{l[w]=N,M||(M=!0,m--),m||r.next(t(l.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>cA(o,h):Di.y));return t?l.pipe(lA(t)):l}(n.map(e=>e.pipe((0,xs.q)(1),du(C0)))).pipe(Oo((e,t)=>{let r=!1;return t.reduce((o,l,h)=>o!==C0?o:(l===C0&&(r=!0),r||!1!==l&&h!==t.length-1&&!pp(l)?o:l),e)},C0),Kn(e=>e!==C0),(0,It.U)(e=>pp(e)?e:!0===e),(0,xs.q)(1)))}class HM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new A0,this.attachRef=null}}class A0{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new HM,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let kC=(()=>{class n{constructor(t,r,o,l,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=l||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new GM(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(A0),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class GM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fp?this.route:e===A0?this.childContexts:this.parent.get(e,t)}}let GA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},directives:[kC],encapsulation:2}),n})();function qA(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];qM(r,zM(e,r))}}function qM(n,e){n.children&&qA(n.children,e)}function zM(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function FC(n){const e=n.children&&n.children.map(FC),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=GA),t}function Jo(n){return n.outlet||zt}function zA(n,e){const t=n.filter(r=>Jo(r)===e);return t.push(...n.filter(r=>Jo(r)!==e)),t}const WA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XI(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},WA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const l=(e.matcher||sM)(t,n,e);if(!l)return Object.assign({},WA);const h={};Ri(l.posParams,(w,C)=>{h[C]=w.path});const m=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,remainingSegments:t.slice(l.consumed.length),parameters:m,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function eD(n,e,t,r,o="corrected"){if(t.length>0&&function KM(n,e,t){return t.some(r=>tD(n,e,r)&&Jo(r)!==zt)}(n,t,r)){const h=new tn(e,function ZM(n,e,t,r){const o={};o[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Jo(l)!==zt){const h=new tn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Jo(l)]=h}return o}(n,e,r,new tn(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function YM(n,e,t){return t.some(r=>tD(n,e,r))}(n,t,r)){const h=new tn(n.segments,function WM(n,e,t,r,o,l){const h={};for(const m of r)if(tD(n,t,m)&&!o[Jo(m)]){const w=new tn([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[Jo(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new tn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function tD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ZA(n,e,t,r){return!!(Jo(n)===r||r!==zt&&tD(e,t,n))&&("**"===n.path||XI(e,n,t).matched)}function KA(n,e,t){return 0===e.length&&!n.children[t]}class nD{constructor(e){this.segmentGroup=e||null}}class YA{constructor(e){this.urlTree=e}}function S0(n){return GI(new nD(n))}function QA(n){return GI(new YA(n))}function QM(n){return GI(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class eR{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(g.h0i)}apply(){const e=eD(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,zt).pipe((0,It.U)(l=>this.createUrlTree(LC(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wh(l=>{if(l instanceof YA)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof nD?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,zt).pipe((0,It.U)(o=>this.createUrlTree(LC(o),e.queryParams,e.fragment))).pipe(wh(o=>{throw o instanceof nD?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new tn([],{[zt]:e}):e;return new dp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,It.U)(l=>new tn([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,Qt.D)(o).pipe(v0(l=>{const h=r.children[l],m=zA(t,l);return this.expandSegmentGroup(e,m,h,l).pipe((0,It.U)(w=>({segment:w,outlet:l})))}),Oo((l,h)=>(l[h.outlet]=h.segment,l),{}),function qx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Kn((o,l)=>n(o,l,r)):Di.y,IC(1),t?Wr(e):Ms(()=>new ts))}())}expandSegment(e,t,r,o,l,h){return(0,Qt.D)(r).pipe(v0(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,l,h).pipe(wh(C=>{if(C instanceof nD)return gt(null);throw C}))),ns(m=>!!m),wh((m,w)=>{if(m instanceof ts||"EmptyError"===m.name)return KA(t,o,l)?gt(new tn([],{})):S0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,l,h,m){return ZA(o,t,l,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h):S0(t):S0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?QA(l):this.lineralizeSegments(r,l).pipe((0,ji.z)(h=>{const m=new tn(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:M}=XI(t,o,l);if(!m)return S0(t);const N=this.applyRedirectCommands(w,o.redirectTo,M);return o.redirectTo.startsWith("/")?QA(N):this.lineralizeSegments(o,N).pipe((0,ji.z)(H=>this.expandSegment(e,t,r,H.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?gt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,It.U)(N=>(r._loadedConfig=N,new tn(o,{})))):gt(new tn(o,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=XI(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,ji.z)(M=>{const N=M.module,H=M.routes,{segmentGroup:Z,slicedSegments:fe}=eD(t,m,w,H),Fe=new tn(Z.segments,Z.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,It.U)(wn=>new tn(m,wn)));if(0===H.length&&0===fe.length)return gt(new tn(m,{}));const tt=Jo(r)===l;return this.expandSegment(N,Fe,H,fe,tt?zt:l,!0).pipe((0,It.U)(ht=>new tn(m.concat(ht.segments),ht.children)))})):S0(t)}getChildConfig(e,t,r){return t.children?gt(new PC(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?gt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,ji.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,It.U)(l=>(t._loadedConfig=l,l))):function JM(n){return GI(bC(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):gt(new PC([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return gt(!0);const l=o.map(h=>{const m=e.get(h);let w;if(function UM(n){return n&&Ih(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ih(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return Gu(w)});return gt(l).pipe(T0(),(0,yo.b)(h=>{if(!pp(h))return;const m=bC(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,It.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[zt])return QM(e.redirectTo);o=o.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new dp(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ri(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[l]=t[m]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let h={};return Ri(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new tn(l,h)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function LC(n){const e={};for(const r of Object.keys(n.children)){const l=LC(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function tR(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}class JA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class rD{constructor(e,t){this.component=e,this.route=t}}function rR(n,e,t){const r=n._root;return x0(r,e?e._root:null,t,[r.value])}function iD(n,e,t){const r=function sR(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function x0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=Gm(e);return n.children.forEach(h=>{(function oR(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const w=function aR(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!hp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hp(n.url,e.url)||!Hu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MC(n,e)||!Hu(n.queryParams,e.queryParams);default:return!MC(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new JA(r)):(l.data=h.data,l._resolvedData=h._resolvedData),x0(n,e,l.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new rD(m.outlet.component,h))}else h&&M0(e,m,o),o.canActivateChecks.push(new JA(r)),x0(n,null,l.component?m?m.children:null:t,r,o)})(h,l[h.value.outlet],t,r.concat([h.value]),o),delete l[h.value.outlet]}),Ri(l,(h,m)=>M0(h,t.getContext(m),o)),o}function M0(n,e,t){const r=Gm(n),o=n.value;Ri(r,(l,h)=>{M0(l,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new rD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class mR{}function XA(n){return new qr.y(e=>e.error(n))}class _R{constructor(e,t,r,o,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=eD(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,zt);if(null===t)return null;const r=new YI([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ac(r,t),l=new LA(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=FA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],m=zA(e,l),w=this.processSegmentGroup(m,h,l);if(null===w)return null;r.push(...w)}const o=eS(r);return function vR(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,o);if(null!==h)return h}return KA(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!ZA(e,t,r,o))return null;let l,h=[],m=[];if("**"===e.path){const Z=r.length>0?IA(r).parameters:{};l=new YI(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rS(e),Jo(e),e.component,e,tS(t),nS(t)+r.length,iS(e))}else{const Z=XI(t,e,r);if(!Z.matched)return null;h=Z.consumedSegments,m=Z.remainingSegments,l=new YI(h,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,rS(e),Jo(e),e.component,e,tS(t),nS(t)+h.length,iS(e))}const w=function ER(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=eD(t,h,m,w.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const Z=this.processChildren(w,C);return null===Z?null:[new Ac(l,Z)]}if(0===w.length&&0===M.length)return[new Ac(l,[])];const N=Jo(e)===o,H=this.processSegment(w,C,M,N?zt:o);return null===H?null:[new Ac(l,H)]}}function wR(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function eS(n){const e=[],t=new Set;for(const r of n){if(!wR(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=eS(r.children);e.push(new Ac(r.value,o))}return e.filter(r=>!t.has(r))}function tS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function rS(n){return n.data||{}}function iS(n){return n.resolve||{}}function sS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VC(n){return $n(e=>{const t=n(e);return t?(0,Qt.D)(t).pipe((0,It.U)(()=>e)):gt(e)})}class xR extends class SR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const UC=new g.OlP("ROUTES");class oS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,It.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new PC(wA(h.injector.get(UC,void 0,g.XFs.Self|g.XFs.Optional)).map(FC),h)}),wh(l=>{throw t._loader$=void 0,l}));return t._loader$=new Gx(o,()=>new vn.x).pipe(pA()),t._loader$}loadModuleFactory(e){return Gu(e()).pipe((0,ji.z)(t=>t instanceof g.YKP?gt(t):(0,Qt.D)(this.compiler.compileModuleAsync(t))))}}class RR{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function NR(n){throw n}function OR(n,e,t){return e.parse("/")}function aS(n,e){return gt(null)}const PR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ls=(()=>{class n{constructor(t,r,o,l,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new vn.x,this.errorHandler=NR,this.malformedUriErrorHandler=OR,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:aS,afterPreactivation:aS},this.urlHandlingStrategy=new RR,this.routeReuseStrategy=new xR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(g.h0i),this.console=h.get(g.c2e);const N=h.get(g.R0b);this.isNgZoneEnabled=N instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function aM(){return new dp(new tn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new oS(h,m,H=>this.triggerEvent(new mA(H)),H=>this.triggerEvent(new yA(H))),this.routerState=kA(this.currentUrlTree,this.rootComponentType),this.transitions=new Oa({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Kn(o=>0!==o.id),(0,It.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$n(o=>{let l=!1,h=!1;return gt(o).pipe((0,yo.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),$n(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return uS(m.source)&&(this.browserUrlTree=m.extractedUrl),gt(m).pipe($n(N=>{const H=this.transitions.getValue();return r.next(new DC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),H!==this.transitions.getValue()?$m.E:Promise.resolve(N)}),function nR(n,e,t,r){return $n(o=>function XM(n,e,t,r,o){return new eR(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,It.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,yo.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function IR(n,e,t,r,o){return(0,ji.z)(l=>function yR(n,e,t,r,o="emptyOnly",l="legacy"){try{const h=new _R(n,e,t,r,o,l).recognize();return null===h?XA(new mR):gt(h)}catch(h){return XA(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,It.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,yo.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Z,N)}this.browserUrlTree=N.urlAfterRedirects}const H=new Zx(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:Z,source:fe,restoredState:Fe,extras:tt}=m,Zt=new DC(H,this.serializeUrl(Z),fe,Fe);r.next(Zt);const ht=kA(Z,this.rootComponentType).snapshot;return gt(Object.assign(Object.assign({},m),{targetSnapshot:ht,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),$m.E}),VC(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Z})}),(0,yo.b)(m=>{const w=new Kx(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,It.U)(m=>Object.assign(Object.assign({},m),{guards:rR(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function uR(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?gt(Object.assign(Object.assign({},t),{guardsResult:!0})):function lR(n,e,t,r){return(0,Qt.D)(n).pipe((0,ji.z)(o=>function gR(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?gt(l.map(m=>{const w=iD(m,e,o);let C;if(function $M(n){return n&&Ih(n.canDeactivate)}(w))C=Gu(w.canDeactivate(n,e,t,r));else{if(!Ih(w))throw new Error("Invalid CanDeactivate guard");C=Gu(w(n,e,t,r))}return C.pipe(ns())})).pipe(T0()):gt(!0)}(o.component,o.route,t,e,r)),ns(o=>!0!==o,!0))}(h,r,o,n).pipe((0,ji.z)(m=>m&&function VM(n){return"boolean"==typeof n}(m)?function cR(n,e,t,r){return(0,Qt.D)(e).pipe(v0(o=>Tl(function hR(n,e){return null!==n&&e&&e(new Xx(n)),gt(!0)}(o.route.parent,r),function dR(n,e){return null!==n&&e&&e(new tM(n)),gt(!0)}(o.route,r),function pR(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function iR(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>hA(()=>gt(h.guards.map(w=>{const C=iD(w,h.node,t);let M;if(function jM(n){return n&&Ih(n.canActivateChild)}(C))M=Gu(C.canActivateChild(r,n));else{if(!Ih(C))throw new Error("Invalid CanActivateChild guard");M=Gu(C(r,n))}return M.pipe(ns())})).pipe(T0())));return gt(l).pipe(T0())}(n,o.path,t),function fR(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(l=>hA(()=>{const h=iD(l,e,t);let m;if(function BM(n){return n&&Ih(n.canActivate)}(h))m=Gu(h.canActivate(e,n));else{if(!Ih(h))throw new Error("Invalid CanActivate guard");m=Gu(h(e,n))}return m.pipe(ns())}));return gt(o).pipe(T0())}(n,o.route,t))),ns(o=>!0!==o,!0))}(r,l,n,e):gt(m)),(0,It.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,yo.b)(m=>{if(pp(m.guardsResult)){const C=bC(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new Yx(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Kn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),VC(m=>{if(m.guards.canActivateChecks.length)return gt(m).pipe((0,yo.b)(w=>{const C=new Qx(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),$n(w=>{let C=!1;return gt(w).pipe(function DR(n,e){return(0,ji.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let l=0;return(0,Qt.D)(o).pipe(v0(h=>function bR(n,e,t,r){return function CR(n,e,t,r){const o=sS(n);if(0===o.length)return gt({});const l={};return(0,Qt.D)(o).pipe((0,ji.z)(h=>function TR(n,e,t,r){const o=iD(n,e,r);return Gu(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,yo.b)(m=>{l[h]=m}))),IC(1),(0,ji.z)(()=>sS(l).length===o.length?gt(l):$m.E))}(n._resolve,n,e,r).pipe((0,It.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),FA(n,t).resolve),null)))}(h.route,r,n,e)),(0,yo.b)(()=>l++),IC(1),(0,ji.z)(h=>l===o.length?gt(t):$m.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,yo.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,yo.b)(w=>{const C=new Jx(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),VC(m=>{const{targetSnapshot:w,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:H,replaceUrl:Z}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!H,replaceUrl:!!Z})}),(0,It.U)(m=>{const w=function CM(n,e,t){const r=D0(n,e._root,t?t._root:void 0);return new PA(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,yo.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,It.U)(r=>(new FM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,yo.b)({next(){l=!0},complete(){l=!0}}),function zx(n){return(0,zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;l||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),wh(m=>{if(h=!0,function iM(n){return n&&n[vA]}(m)){const w=pp(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new gA(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uS(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Wx(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return $m.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const l={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(l.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){qA(t),this.config=t.map(FC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,M=w?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function SM(n,e,t,r,o){if(0===t.length)return RC(e.root,e.root,e.root,r,o);const l=function xM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new BA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const m={};return Ri(l.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===h?(l.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,l]},[]);return new BA(t,e,r)}(t);if(l.toRoot())return RC(e.root,e.root,new tn([],{}),r,o);const h=function MM(n,e,t){if(n.isAbsolute)return new NC(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new NC(l,l===e.root,0)}const r=QI(n.commands[0])?0:1;return function RM(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new NC(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),m=h.processChildren?JI(h.segmentGroup,h.index,l.commands):jA(h.segmentGroup,h.index,l.commands);return RC(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=pp(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function FR(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},PR):!1===r?Object.assign({},kR):r,pp(t))return bA(this.currentUrlTree,t,o);const l=this.parseUrl(t);return bA(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new E0(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,h){var m,w;if(this.disposed)return Promise.resolve(!1);let C,M,N;h?(C=h.resolve,M=h.reject,N=h.promise):N=new Promise((fe,Fe)=>{C=fe,M=Fe});const H=++this.navigationId;let Z;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Z=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Z=0,this.setTransition({id:H,targetPageId:Z,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:C,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(fe=>Promise.reject(fe))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new gA(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function uS(n){return"imperative"!==n}let sD=(()=>{class n{constructor(t,r,o,l,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=l,this.el=h,this.commands=null,this.onChanges=new vn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:qm(this.skipLocationChange),replaceUrl:qm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qm(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ls),g.Y36(fp),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&g.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})(),oD=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new vn.x,this.subscription=t.events.subscribe(l=>{l instanceof E0&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,l,h){if(0!==t||r||o||l||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:qm(this.skipLocationChange),replaceUrl:qm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:qm(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ls),g.Y36(fp),g.Y36(de))},n.\u0275dir=g.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&g.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&g.uIk("target",r.target)("href",r.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),n})();function qm(n){return""===n||!!n}class lS{}class cS{preload(e,t){return gt(null)}}let dS=(()=>{class n{constructor(t,r,o,l){this.router=t,this.injector=o,this.preloadingStrategy=l,this.loader=new oS(o,r,w=>t.triggerEvent(new mA(w)),w=>t.triggerEvent(new yA(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(t=>t instanceof E0),v0(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(g.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,Qt.D)(o).pipe((0,cd.J)(),(0,It.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?gt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,ji.z)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ls),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(lS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),BC=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof DC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof E0&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof _A&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new _A(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const gp=new g.OlP("ROUTER_CONFIGURATION"),hS=new g.OlP("ROUTER_FORROOT_GUARD"),BR=[_e,{provide:SA,useClass:xA},{provide:ls,useFactory:function qR(n,e,t,r,o,l,h={},m,w){const C=new ls(null,n,e,t,r,o,wA(l));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function zR(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(M=>{var N,H;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[SA,A0,_e,g.zs3,g.Sil,UC,gp,[class MR{},new g.FiY],[class AR{},new g.FiY]]},A0,{provide:fp,useFactory:function WR(n){return n.routerState.root},deps:[ls]},dS,cS,class UR{preload(e,t){return t().pipe(wh(()=>gt(null)))}},{provide:gp,useValue:{enableTracing:!1}}];function jR(){return new g.PXZ("Router",ls)}let fS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[BR,pS(t),{provide:hS,useFactory:GR,deps:[[ls,new g.FiY,new g.tp0]]},{provide:gp,useValue:r||{}},{provide:de,useFactory:HR,deps:[ce,[new g.tBr(Ke),new g.FiY],gp]},{provide:BC,useFactory:$R,deps:[ls,Ha,gp]},{provide:lS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:cS},{provide:g.PXZ,multi:!0,useFactory:jR},[jC,{provide:g.ip1,multi:!0,useFactory:ZR,deps:[jC]},{provide:gS,useFactory:KR,deps:[jC]},{provide:g.tb,multi:!0,useExisting:gS}]]}}static forChild(t){return{ngModule:n,providers:[pS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(hS,8),g.LFG(ls,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function $R(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new BC(n,e,t)}function HR(n,e,t={}){return t.useHash?new De(n,e):new Ge(n,e)}function GR(n){return"guarded"}function pS(n){return[{provide:g.deG,multi:!0,useValue:n},{provide:UC,multi:!0,useValue:n}]}let jC=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new vn.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),l=this.injector.get(ls),h=this.injector.get(gp);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?gt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(gp),o=this.injector.get(dS),l=this.injector.get(BC),h=this.injector.get(ls),m=this.injector.get(g.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),l.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function ZR(n){return n.appInitializer.bind(n)}function KR(n){return n.bootstrapListener.bind(n)}const gS=new g.OlP("Router Initializer");let $C=(()=>{class n{constructor(t){this.angularFirestore=t}getPosts(){return this.angularFirestore.collection("posts").snapshotChanges()}getPostById(t){return this.angularFirestore.collection("posts").doc(t).valueChanges()}createPost(t){return new Promise((r,o)=>{this.angularFirestore.collection("posts").add(t).then(l=>{console.log(l)},l=>{o(l)})})}updatePost(t,r){return this.angularFirestore.collection("posts").doc(r).update({title:t.title,content:t.content,author:t.author})}deletePost(t){return this.angularFirestore.collection("posts").doc(t.id).delete()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(oA))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QR(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td"),g._uU(4),g.qZA(),g.TgZ(5,"td"),g._uU(6),g.qZA(),g.TgZ(7,"td")(8,"button",5),g._UZ(9,"i",6),g.qZA(),g.TgZ(10,"button",7),g.NdJ("click",function(){const l=g.CHM(t).$implicit;return g.oxw().deleteRecord(l)}),g._UZ(11,"i",8),g.qZA()()()}if(2&n){const t=e.$implicit;g.xp6(2),g.Oqu(t.title),g.xp6(2),g.Oqu(t.content),g.xp6(2),g.Oqu(t.author),g.xp6(2),g.MGl("routerLink","/edit/",t.id,"")}}let JR=(()=>{class n{constructor(t){this.postService=t,this.deleteRecord=r=>this.postService.deletePost(r)}ngOnInit(){this.postService.getPosts().subscribe(t=>{this.Posts=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($C))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-show"]],decls:16,vars:1,consts:[[1,"d-grid","gap-2","mt-4"],["routerLink","/create","type","button",1,"btn","btn-primary"],[1,"table","table-hover","table-striped"],[1,"bg-gradient","text-white"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fa-solid","fa-pen"],[1,"btn","btn-outline-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"a",1),g._uU(2,"Create"),g.qZA()(),g.TgZ(3,"table",2)(4,"thead",3)(5,"tr")(6,"th"),g._uU(7,"Title"),g.qZA(),g.TgZ(8,"th"),g._uU(9,"Content"),g.qZA(),g.TgZ(10,"th"),g._uU(11,"Author"),g.qZA(),g.TgZ(12,"th"),g._uU(13,"Actions"),g.qZA()()(),g.TgZ(14,"tbody"),g.YNc(15,QR,12,4,"tr",4),g.qZA()()),2&t&&(g.xp6(15),g.Q6J("ngForOf",r.Posts))},directives:[oD,ur,sD],styles:[""]}),n})(),mS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),mp=(()=>{class n extends mS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const qu=new g.OlP("NgValueAccessor"),tN={provide:qu,useExisting:(0,g.Gpc)(()=>R0),multi:!0},rN=new g.OlP("CompositionEventMode");let R0=(()=>{class n extends mS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nN(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(rN,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[g._Bn([tN]),g.qOj]}),n})();const $i=new g.OlP("NgValidators"),bh=new g.OlP("NgAsyncValidators");function wS(n){return function Dh(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function aD(n){return null}function AS(n){return null!=n}function SS(n){const e=(0,g.QGY)(n)?(0,Qt.D)(n):n;return(0,g.CqO)(e),e}function xS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function MS(n,e){return e.map(t=>t(n))}function RS(n){return n.map(e=>function sN(n){return!n.validate}(e)?e:t=>e.validate(t))}function HC(n){return null!=n?function NS(n){if(!n)return null;const e=n.filter(AS);return 0==e.length?null:function(t){return xS(MS(t,e))}}(RS(n)):null}function GC(n){return null!=n?function OS(n){if(!n)return null;const e=n.filter(AS);return 0==e.length?null:function(t){return function XR(...n){const e=(0,Ss.jO)(n),{args:t,keys:r}=uA(n),o=new qr.y(l=>{const{length:h}=t;if(!h)return void l.complete();const m=new Array(h);let w=h,C=h;for(let M=0;M<h;M++){let N=!1;(0,nn.Xf)(t[M]).subscribe((0,yn.x)(l,H=>{N||(N=!0,C--),m[M]=H},()=>w--,void 0,()=>{(!w||!N)&&(C||l.next(r?cA(r,m):m),l.complete())}))}});return e?o.pipe(lA(e)):o}(MS(t,e).map(SS)).pipe((0,It.U)(xS))}}(RS(n)):null}function PS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kS(n){return n._rawValidators}function FS(n){return n._rawAsyncValidators}function qC(n){return n?Array.isArray(n)?n:[n]:[]}function uD(n,e){return Array.isArray(n)?n.includes(e):n===e}function LS(n,e){const t=qC(e);return qC(n).forEach(o=>{uD(t,o)||t.push(o)}),t}function VS(n,e){return qC(e).filter(t=>!uD(n,t))}class US{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ch extends US{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cs extends US{get formDirective(){return null}get path(){return null}}class BS{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let zC=(()=>{class n extends BS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Ch,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[g.qOj]}),n})(),WC=(()=>{class n extends BS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cs,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[g.qOj]}),n})();function N0(n,e){YC(n,e),e.valueAccessor.writeValue(n.value),function fN(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&$S(n,e)})}(n,e),function gN(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function pN(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&$S(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function hN(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function dD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),fD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YC(n,e){const t=kS(n);null!==e.validator?n.setValidators(PS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=FS(n);null!==e.asyncValidator?n.setAsyncValidators(PS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();hD(e._rawValidators,o),hD(e._rawAsyncValidators,o)}function fD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=kS(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=FS(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return hD(e._rawValidators,r),hD(e._rawAsyncValidators,r),t}function $S(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function XC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const O0="VALID",pD="INVALID",zm="PENDING",P0="DISABLED";function tT(n){return(gD(n)?n.validators:n)||null}function zS(n){return Array.isArray(n)?HC(n):n||null}function nT(n,e){return(gD(e)?e.asyncValidators:n)||null}function WS(n){return Array.isArray(n)?GC(n):n||null}function gD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const rT=n=>n instanceof sT,mD=n=>n instanceof yD,ZS=n=>n instanceof JS;function KS(n){return rT(n)?n.value:n.getRawValue()}function YS(n,e){const t=mD(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[e])throw new g.vHH(1001,"")}function QS(n,e){mD(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new g.vHH(1002,"")})}class iT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=zS(this._rawValidators),this._composedAsyncValidatorFn=WS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===O0}get invalid(){return this.status===pD}get pending(){return this.status==zm}get disabled(){return this.status===P0}get enabled(){return this.status!==P0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=zS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=WS(e)}addValidators(e){this.setValidators(LS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(VS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(VS(e,this._rawAsyncValidators))}hasValidator(e){return uD(this._rawValidators,e)}hasAsyncValidator(e){return uD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=zm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=P0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=O0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===O0||this.status===zm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P0:O0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=zm,this._hasOwnPendingAsyncValidator=!0;const t=SS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function vN(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=mD(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:ZS(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?P0:this.errors?pD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zm)?zm:this._anyControlsHaveStatus(pD)?pD:O0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sT extends iT{constructor(e=null,t,r){super(tT(t),nT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class yD extends iT{constructor(e,t,r){super(tT(t),nT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){QS(this,e),Object.keys(e).forEach(r=>{YS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=KS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class JS extends iT{constructor(e,t,r){super(tT(t),nT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){QS(this,e),e.forEach((r,o)=>{YS(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>KS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let aT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ix=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const uT=new g.OlP("NgModelWithFormControlWarning"),SN={provide:cs,useExisting:(0,g.Gpc)(()=>F0)};let F0=(()=>{class n extends cs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return N0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dD(t.control||null,t,!1),XC(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function qS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(dD(r||null,t),rT(o)&&(N0(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function HS(n,e){YC(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function mN(n,e){return fD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){YC(this.form,this),this._oldForm&&fD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($i,10),g.Y36(bh,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([SN]),g.qOj,g.TTD]}),n})();const RN={provide:Ch,useExisting:(0,g.Gpc)(()=>_D)};let _D=(()=>{class n extends Ch{constructor(t,r,o,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function JC(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===R0?t=l:function _N(n){return Object.getPrototypeOf(n.constructor)===mp}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function QC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function cD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(cs,13),g.Y36($i,10),g.Y36(bh,10),g.Y36(qu,10),g.Y36(uT,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([RN]),g.qOj,g.TTD]}),n})(),yp=(()=>{class n{constructor(){this._validator=aD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):aD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const jN={provide:$i,useExisting:(0,g.Gpc)(()=>L0),multi:!0};let L0=(()=>{class n extends yp{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function VN(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>wS}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([jN]),g.qOj]}),n})(),Ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[ix]]}),n})(),WN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Ex]}),n})(),wx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Ex]}),n})(),Ix=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,l=null,h=null;return null!=r&&(function ZN(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new yD(o,{asyncValidators:h,updateOn:m,validators:l})}control(t,r,o){return new sT(t,r,o)}array(t,r,o){const l=t.map(h=>this._createControl(h));return new JS(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return rT(t)||mD(t)||ZS(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:wx}),n})();const KN=[{path:"",component:JR},{path:"create",component:(()=>{class n{constructor(t,r,o){this.postService=t,this.formBuilder=r,this.router=o,this.postForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){}onSubmit(){this.postService.createPost(this.postForm.value),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($C),g.Y36(Ix),g.Y36(ls))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-create"]],decls:17,vars:2,consts:[[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(g.TgZ(0,"h2",0),g._uU(1,"Component CREATE"),g.qZA(),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(3,"div",2)(4,"label",3),g._uU(5,"Title"),g.qZA(),g._UZ(6,"input",4),g.qZA(),g.TgZ(7,"div",2)(8,"label",3),g._uU(9,"Content"),g.qZA(),g._UZ(10,"input",5),g.qZA(),g.TgZ(11,"div",2)(12,"label",3),g._uU(13,"Author"),g.qZA(),g._UZ(14,"input",6),g.qZA(),g.TgZ(15,"button",7),g._uU(16,"Store"),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("formGroup",r.postForm),g.xp6(13),g.Q6J("disabled",!r.postForm.valid))},directives:[aT,WC,F0,R0,zC,_D,L0],styles:[""]}),n})()},{path:"edit/:id",component:(()=>{class n{constructor(t,r,o,l){this.postService=t,this.formBuilder=r,this.activeRoute=o,this.router=l,this.editForm=this.formBuilder.group({title:[""],content:[""],author:[""]})}ngOnInit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.getPostById(t).subscribe(r=>{this.postRef=r,this.editForm=this.formBuilder.group({title:[this.postRef.title],content:[this.postRef.content],author:[this.postRef.author]})})}onSubmit(){const t=this.activeRoute.snapshot.paramMap.get("id");this.postService.updatePost(this.editForm.value,t),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(g.Y36($C),g.Y36(Ix),g.Y36(fp),g.Y36(ls))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-edit"]],decls:17,vars:1,consts:[[1,"text-center"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label"],["formControlName","title","type","text","required","",1,"form-control"],["formControlName","content","type","text","required","",1,"form-control"],["formControlName","author","type","text","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(g.TgZ(0,"h2",0),g._uU(1,"Component EDIT"),g.qZA(),g.TgZ(2,"form",1),g.NdJ("ngSubmit",function(){return r.onSubmit()}),g.TgZ(3,"div",2)(4,"label",3),g._uU(5,"Title"),g.qZA(),g._UZ(6,"input",4),g.qZA(),g.TgZ(7,"div",2)(8,"label",3),g._uU(9,"Content"),g.qZA(),g._UZ(10,"input",5),g.qZA(),g.TgZ(11,"div",2)(12,"label",3),g._uU(13,"Author"),g.qZA(),g._UZ(14,"input",6),g.qZA(),g.TgZ(15,"button",7),g._uU(16,"Update"),g.qZA()()),2&t&&(g.xp6(2),g.Q6J("formGroup",r.editForm))},directives:[aT,WC,F0,R0,zC,_D,L0],styles:[""]}),n})()}];let YN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[[fS.forRoot(KN)],fS]}),n})(),QN=(()=>{class n{constructor(){this.title="crud-angular"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container"],[1,"row","align-items-md-stretch"],[1,"col-md-12"],[1,"h-100","p-4","text-white","bg-gradient","rounded-3","text-center"],["src","assets/img/angular.png","width","100","height","100"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),g._uU(5,"DAW2 Angular + Firebase CRUD"),g.qZA(),g._UZ(6,"img",4),g.qZA()(),g._UZ(7,"router-outlet"),g.qZA()())},directives:[kC],styles:[""]}),n})(),JN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[QN]}),n.\u0275inj=g.cJS({providers:[],imports:[[ua,YN,es.hO.initializeApp(aA_firebaseConfig),fy,Ox,WN,wx]]}),n})();(0,g.G48)(),rl().bootstrapModule(JN).catch(n=>console.error(n))},5867:(nt,Ce,k)=>{k.d(Ce,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=k(9681);(0,g.registerVersion)("firebase","9.6.10","app")},127:(nt,Ce,k)=>{k.d(Ce,{Z:()=>g.Z});var g=k(3942);g.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(nt,Ce,k)=>{k.r(Ce);var g=k(5861),K=k(3942),O=k(2090),oe=k(9681),J=k(655),pe=k(1877),ie=k(4859);const Me=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ke=new pe.Yd("@firebase/auth");function Ge(y,...d){Ke.logLevel<=pe.in.ERROR&&Ke.error(`Auth (${oe.SDK_VERSION}): ${y}`,...d)}function De(y,...d){throw Be(y,...d)}function _e(y,...d){return Be(y,...d)}function ve(y,d,p){const v=Object.assign(Object.assign({},Pe()),{[d]:p});return new O.LL("auth","Firebase",v).create(d,{appName:y.name})}function je(y,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&De(y,"argument-error"),ve(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...d){if("string"!=typeof y){const p=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return de.create(y,...d)}function te(y,d,...p){if(!y)throw Be(d,...p)}function z(y){const d="INTERNAL ASSERTION FAILED: "+y;throw Ge(d),new Error(d)}function ne(y,d){y||z(d)}const ge=new Map;function re(y){ne(y instanceof Function,"Expected a class definition");let d=ge.get(y);return d?(ne(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,ge.set(y,d),d)}function wt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Kt(){return"http:"===Tn()||"https:"===Tn()}function Tn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class ln{constructor(d,p){this.shortDelay=d,this.longDelay=p,ne(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function rt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Kt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(y,d){ne(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class _i{static initialize(d,p,v){this.fetchImpl=d,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hi=new ln(3e4,6e4);function Yt(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function Ut(y,d,p,v){return ir.apply(this,arguments)}function ir(){return(ir=(0,g.Z)(function*(y,d,p,v,T={}){return si(y,T,(0,g.Z)(function*(){let R={},G={};v&&("GET"===d?G=v:R={body:JSON.stringify(v)});const X=(0,O.xO)(Object.assign({key:y.config.apiKey},G)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),_i.fetch()(Rr(y,y.config.apiHost,p,X),Object.assign({method:d,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function si(y,d,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,g.Z)(function*(y,d,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},rn),d);try{const T=new Gi(y),R=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const G=yield R.json();if("needConfirmation"in G)throw qi(y,"account-exists-with-different-credential",G);if(R.ok&&!("errorMessage"in G))return G;{const X=R.ok?G.errorMessage:G.error.message,[ke,Ye]=X.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw qi(y,"credential-already-in-use",G);if("EMAIL_EXISTS"===ke)throw qi(y,"email-already-in-use",G);const ot=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw ve(y,ot,Ye);De(y,ot)}}catch(T){if(T instanceof O.ZR)throw T;De(y,"network-request-failed")}})).apply(this,arguments)}function Mr(y,d,p,v){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(y,d,p,v,T={}){const R=yield Ut(y,d,p,v,T);return"mfaPendingCredential"in R&&De(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Rr(y,d,p,v){const T=`${d}${p}?${v}`;return y.config.emulator?cn(y.config,T):`${y.config.apiScheme}://${T}`}class Gi{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Hi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qi(y,d,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=_e(y,d,v);return T.customData._tokenResponse=p,T}function Ur(){return(Ur=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function zn(y,d){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function oi(y,d){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function gn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Xo(){return(Xo=(0,g.Z)(function*(y,d=!1){const p=(0,O.m9)(y),v=yield p.getIdToken(d),T=et(v);te(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,G=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:gn(Bt(T.auth_time)),issuedAtTime:gn(Bt(T.iat)),expirationTime:gn(Bt(T.exp)),signInProvider:G||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Bt(y){return 1e3*Number(y)}function et(y){const[d,p,v]=y.split(".");if(void 0===d||void 0===p||void 0===v)return Ge("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Ge("Failed to decode base64 JWT payload"),null)}catch(T){return Ge("Caught error parsing JWT payload as JSON",T),null}}function sr(y,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,g.Z)(function*(y,d,p=!1){if(p)return d;try{return yield d}catch(v){throw v instanceof O.ZR&&Ft(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Gs{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),v)}iteration(){var d=this;return(0,g.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class vr{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=gn(this.lastLoginAt),this.creationTime=gn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function or(y){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y){var d;const p=y.auth,v=yield y.getIdToken(),T=yield sr(y,oi(p,{idToken:v}));te(null==T?void 0:T.users.length,p,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const G=(null===(d=R.providerUserInfo)||void 0===d?void 0:d.length)?be(R.providerUserInfo):[],X=qe(y.providerData,G),ot=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==X?void 0:X.length)),it={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:X,metadata:new vr(R.createdAt,R.lastLoginAt),isAnonymous:ot};Object.assign(y,it)})).apply(this,arguments)}function Ot(){return(Ot=(0,g.Z)(function*(y){const d=(0,O.m9)(y);yield or(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function qe(y,d){return[...y.filter(v=>!d.some(T=>T.providerId===v.providerId)),...d]}function be(y){return y.map(d=>{var{providerId:p}=d,v=(0,J._T)(d,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,g.Z)(function*(y,d){const p=yield si(y,{},(0,g.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,G=Rr(y,T,"/v1/token",`key=${R}`),X=yield y._getAdditionalHeaders();return X["Content-Type"]="application/x-www-form-urlencoded",_i.fetch()(G,{method:"POST",headers:X,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){te(d.idToken,"internal-error"),te(void 0!==d.idToken,"internal-error"),te(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function _t(y){const d=et(y);return te(d,"internal-error"),te(void 0!==d.exp,"internal-error"),te(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var v=this;return(0,g.Z)(function*(){return te(!v.accessToken||v.refreshToken,d,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var v=this;return(0,g.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:G}=yield function Ze(y,d){return ut.apply(this,arguments)}(d,p);v.updateTokensAndExpiration(T,R,Number(G))})()}updateTokensAndExpiration(d,p,v){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,p){const{refreshToken:v,accessToken:T,expirationTime:R}=p,G=new kt;return v&&(te("string"==typeof v,"internal-error",{appName:d}),G.refreshToken=v),T&&(te("string"==typeof T,"internal-error",{appName:d}),G.accessToken=T),R&&(te("number"==typeof R,"internal-error",{appName:d}),G.expirationTime=R),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return z("not implemented")}}function Rt(y,d){te("string"==typeof y||void 0===y,"internal-error",{appName:d})}class U{constructor(d){var{uid:p,auth:v,stsTokenManager:T}=d,R=(0,J._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new vr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,g.Z)(function*(){const v=yield sr(p,p.stsTokenManager.getToken(p.auth,d));return te(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(d){return function hs(y){return Xo.apply(this,arguments)}(this,d)}reload(){return function Er(y){return Ot.apply(this,arguments)}(this)}_assign(d){this!==d&&(te(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new U(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var v=this;return(0,g.Z)(function*(){let T=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),T=!0),p&&(yield or(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,g.Z)(function*(){const p=yield d.getIdToken();return yield sr(d,function st(y,d){return Ur.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var v,T,R,G,X,ke,Ye,ot;const it=null!==(v=p.displayName)&&void 0!==v?v:void 0,bn=null!==(T=p.email)&&void 0!==T?T:void 0,ei=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Po=null!==(G=p.photoURL)&&void 0!==G?G:void 0,pu=null!==(X=p.tenantId)&&void 0!==X?X:void 0,_a=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,Pl=null!==(Ye=p.createdAt)&&void 0!==Ye?Ye:void 0,Xh=null!==(ot=p.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:ao,emailVerified:kl,isAnonymous:ef,providerData:wd,stsTokenManager:Fl}=p;te(ao&&Fl,d,"internal-error");const tf=kt.fromJSON(this.name,Fl);te("string"==typeof ao,d,"internal-error"),Rt(it,d.name),Rt(bn,d.name),te("boolean"==typeof kl,d,"internal-error"),te("boolean"==typeof ef,d,"internal-error"),Rt(ei,d.name),Rt(Po,d.name),Rt(pu,d.name),Rt(_a,d.name),Rt(Pl,d.name),Rt(Xh,d.name);const Id=new U({uid:ao,auth:d,email:bn,emailVerified:kl,displayName:it,isAnonymous:ef,photoURL:Po,phoneNumber:ei,tenantId:pu,stsTokenManager:tf,createdAt:Pl,lastLoginAt:Xh});return wd&&Array.isArray(wd)&&(Id.providerData=wd.map(vy=>Object.assign({},vy))),_a&&(Id._redirectEventId=_a),Id}static _fromIdTokenResponse(d,p,v=!1){return(0,g.Z)(function*(){const T=new kt;T.updateFromServerResponse(p);const R=new U({uid:p.localId,auth:d,stsTokenManager:T,isAnonymous:v});return yield or(R),R})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,g.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,g.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function le(y,d,p){return`firebase:${y}:${d}:${p}`}class Y{constructor(d,p,v){this.persistence=d,this.auth=p,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,R),this.fullPersistenceKey=le("persistence",T.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,g.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?U._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,g.Z)(function*(){if(p.persistence===d)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,v="authUser"){return(0,g.Z)(function*(){if(!p.length)return new Y(re($),d,v);const T=(yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return Ye.apply(this,arguments)}}()))).filter(Ye=>Ye);let R=T[0]||re($);const G=le(v,d.config.apiKey,d.name);let X=null;for(const Ye of p)try{const ot=yield Ye._get(G);if(ot){const it=U._fromJSON(d,ot);Ye!==R&&(X=it),R=Ye;break}}catch(ot){}const ke=T.filter(Ye=>Ye._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],X&&(yield R._set(G,X.toJSON())),yield Promise.all(p.map(function(){var Ye=(0,g.Z)(function*(ot){if(ot!==R)try{yield ot._remove(G)}catch(it){}});return function(ot){return Ye.apply(this,arguments)}}())),new Y(R,d,v)):new Y(R,d,v)})()}}function Le(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(jt(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(pt(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(At(d))return"Blackberry";if(dn(d))return"Webos";if(qt(d))return"Safari";if((d.includes("chrome/")||wr(d))&&!d.includes("edge/"))return"Chrome";if(In(d))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function pt(y=(0,O.z$)()){return/firefox\//i.test(y)}function qt(y=(0,O.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function wr(y=(0,O.z$)()){return/crios\//i.test(y)}function jt(y=(0,O.z$)()){return/iemobile/i.test(y)}function In(y=(0,O.z$)()){return/android/i.test(y)}function At(y=(0,O.z$)()){return/blackberry/i.test(y)}function dn(y=(0,O.z$)()){return/webos/i.test(y)}function Zn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function zi(y=(0,O.z$)()){return Zn(y)||In(y)||dn(y)||At(y)||/windows phone/i.test(y)||jt(y)}function ta(y,d=[]){let p;switch(y){case"Browser":p=Le((0,O.z$)());break;case"Worker":p=`${Le((0,O.z$)())}-${y}`;break;default:p=y}const v=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${v}`}class ai{constructor(d,p,v){this.app=d,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(d,p){var v=this;return p&&(this._popupRedirectResolver=re(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield Y.create(v,d),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(G){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,g.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p)}})()}initializeCurrentUser(d){var p=this;return(0,g.Z)(function*(){var v;let T=yield p.assertedPersistence.getCurrentUser();if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const R=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,G=null==T?void 0:T._redirectEventId,X=yield p.tryRedirectSignIn(d);(!R||R===G)&&(null==X?void 0:X.user)&&(T=X.user)}return T?T._redirectEventId?(te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===T._redirectEventId?p.directlySetCurrentUser(T):p.reloadAndSetCurrentUserOrClear(T)):p.reloadAndSetCurrentUserOrClear(T):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(d){var p=this;return(0,g.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,g.Z)(function*(){try{yield or(d)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ft(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,g.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){const v=d?(0,O.m9)(d):null;return v&&te(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(d){var p=this;return(0,g.Z)(function*(){if(!p._deleted)return d&&te(p.tenantId===d.tenantId,p,"tenant-id-mismatch"),p.queue((0,g.Z)(function*(){yield p.directlySetCurrentUser(d),p.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,g.Z)(function*(){return(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null)})()}setPersistence(d){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(re(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new O.LL("auth","Firebase",d())}onAuthStateChanged(d,p,v){return this.registerStateListener(this.authStateSubscription,d,p,v)}onIdTokenChanged(d,p,v){return this.registerStateListener(this.idTokenSubscription,d,p,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var v=this;return(0,g.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===d?T.removeCurrentUser():T.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const v=d&&re(d)||p._popupRedirectResolver;te(v,p,"argument-error"),p.redirectPersistenceManager=yield Y.create(p,[re(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,g.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===d?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,g.Z)(function*(){if(d===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,v,T){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),G=this._isInitialized?Promise.resolve():this._initializationPromise;return te(G,this,"internal-error"),G.then(()=>R(this.currentUser)),"function"==typeof p?d.addObserver(p,v,T):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=ta(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,g.Z)(function*(){var p;const v={"X-Client-Version":d.clientVersion};d.app.options.appId&&(v["X-Firebase-gmpid"]=d.app.options.appId);const T=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Re(y){return(0,O.m9)(y)}class St{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function Pn(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class sn{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return z("not implemented")}_getIdTokenResponse(d){return z("not implemented")}_linkToIdToken(d,p){return z("not implemented")}_getReauthenticationResolver(d){return z("not implemented")}}function An(y,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:resetPassword",Yt(y,d))})).apply(this,arguments)}function Ct(y,d){return vo.apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function zs(y,d){return na.apply(this,arguments)}function na(){return(na=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:update",Yt(y,d))})).apply(this,arguments)}function ur(){return(ur=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithPassword",Yt(y,d))})).apply(this,arguments)}function Wi(y,d){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:sendOobCode",Yt(y,d))})).apply(this,arguments)}function vi(y,d){return on.apply(this,arguments)}function on(){return(on=(0,g.Z)(function*(y,d){return Wi(y,d)})).apply(this,arguments)}function ka(y,d){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,g.Z)(function*(y,d){return Wi(y,d)})).apply(this,arguments)}function Ei(y,d){return ui.apply(this,arguments)}function ui(){return(ui=(0,g.Z)(function*(y,d){return Wi(y,d)})).apply(this,arguments)}function Sc(y,d){return ms.apply(this,arguments)}function ms(){return(ms=(0,g.Z)(function*(y,d){return Wi(y,d)})).apply(this,arguments)}function Br(){return(Br=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,d))})).apply(this,arguments)}function xc(){return(xc=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithEmailLink",Yt(y,d))})).apply(this,arguments)}class Va extends sn{constructor(d,p,v,T=null){super("password",v),this._email=d,this._password=p,this._tenantId=T}static _fromEmailAndPassword(d,p){return new Va(d,p,"password")}static _fromEmailAndCode(d,p,v=null){return new Va(d,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function gs(y,d){return ur.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function La(y,d){return Br.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:De(d,"internal-error")}})()}_linkToIdToken(d,p){var v=this;return(0,g.Z)(function*(){switch(v.signInMethod){case"password":return Ct(d,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Th(y,d){return xc.apply(this,arguments)}(d,{idToken:p,email:v._email,oobCode:v._password});default:De(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function kn(y,d){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithIdp",Yt(y,d))})).apply(this,arguments)}class Ki extends sn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ki(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):De("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:T}=p,R=(0,J._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const G=new Ki(v,T);return G.idToken=R.idToken||void 0,G.accessToken=R.accessToken||void 0,G.secret=R.secret,G.nonce=R.nonce,G.pendingToken=R.pendingToken||null,G}_getIdTokenResponse(d){return kn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,kn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,kn(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,O.xO)(p)}return d}}function Ep(y,d){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:sendVerificationCode",Yt(y,d))})).apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,d))})).apply(this,arguments)}function Nc(){return(Nc=(0,g.Z)(function*(y,d){const p=yield Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,d));if(p.temporaryProof)throw qi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Ip={USER_NOT_FOUND:"user-not-found"};function Oc(){return(Oc=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithPhoneNumber",Yt(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Ip)})).apply(this,arguments)}class Eo extends sn{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new Eo({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new Eo({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function Wu(y,d){return ys.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function wp(y,d){return Nc.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Dp(y,d){return Oc.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}=d;return v||p||T||R?new Eo({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class Ws{constructor(d){var p,v,T,R,G,X;const ke=(0,O.zd)((0,O.pd)(d)),Ye=null!==(p=ke.apiKey)&&void 0!==p?p:null,ot=null!==(v=ke.oobCode)&&void 0!==v?v:null,it=function Zm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);te(Ye&&ot&&it,"argument-error"),this.apiKey=Ye,this.operation=it,this.code=ot,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(G=ke.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(X=ke.tenantId)&&void 0!==X?X:null}static parseLink(d){const p=function Ua(y){const d=(0,O.zd)((0,O.pd)(y)).link,p=d?(0,O.zd)((0,O.pd)(d)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||p||d||y}(d);try{return new Ws(p)}catch(v){return null}}}let Zu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return Va._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=Ws.parseLink(v);return te(T,"argument-error"),Va._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class _s{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class jr extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class wo extends jr{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return te("providerId"in p&&"signInMethod"in p,"argument-error"),Ki._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return te(d.idToken||d.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return wo.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return wo.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:G,providerId:X}=d;if(!v&&!T&&!p&&!R||!X)return null;try{return new wo(X)._credential({idToken:p,accessToken:v,nonce:G,pendingToken:R})}catch(ke){return null}}}let Zs=(()=>{class y extends jr{constructor(){super("facebook.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ra=(()=>{class y extends jr{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Pc=(()=>{class y extends jr{constructor(){super("github.com")}static credential(p){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Io extends sn{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return kn(d,this.buildRequest())}_linkToIdToken(d,p){const v=this.buildRequest();return v.idToken=p,kn(d,v)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,kn(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:T,pendingToken:R}=p;return v&&T&&R&&v===T?new Io(v,R):null}static _create(d,p){return new Io(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class li extends _s{constructor(d){te(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return li.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return li.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Io.fromJSON(d);return te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:v}=d;if(!p||!v)return null;try{return Io._create(v,p)}catch(T){return null}}}let Ba=(()=>{class y extends jr{constructor(){super("twitter.com")}static credential(p,v){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ja(y,d){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signUp",Yt(y,d))})).apply(this,arguments)}class lr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,v,T=!1){return(0,g.Z)(function*(){const R=yield U._fromIdTokenResponse(d,v,T),G=Sh(v);return new lr({user:R,providerId:G,_tokenResponse:v,operationType:p})})()}static _forOperation(d,p,v){return(0,g.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const T=Sh(v);return new lr({user:d,providerId:T,_tokenResponse:v,operationType:p})})()}}function Sh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function kc(){return(kc=(0,g.Z)(function*(y){var d;const p=Re(y);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new lr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield ja(p,{returnSecureToken:!0}),T=yield lr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ha extends O.ZR{constructor(d,p,v,T){var R;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ha.prototype),this.customData={appName:d.name,tenantId:null!==(R=d.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,p,v,T){return new Ha(d,p,v,T)}}function Ga(y,d,p,v){return("reauthenticate"===d?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ha._fromErrorAndOperation(y,R,d,v):R})}function Yi(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function Ku(){return(Ku=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y);yield Es(!0,p,d);const{providerUserInfo:v}=yield zn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),T=Yi(v||[]);return p.providerData=p.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function pn(y,d){return Do.apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(y,d,p=!1){const v=yield sr(y,d._linkToIdToken(y.auth,yield y.getIdToken()),p);return lr._forOperation(y,"link",v)})).apply(this,arguments)}function Es(y,d,p){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(y,d,p){yield or(d);const T=!1===y?"provider-already-linked":"no-such-provider";te(Yi(d.providerData).has(p)===y,d.auth,T)})).apply(this,arguments)}function Fc(y,d){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(y,d,p=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield sr(y,Ga(v,T,d,y),p);te(R.idToken,v,"internal-error");const G=et(R.idToken);te(G,v,"internal-error");const{sub:X}=G;return te(y.uid===X,v,"user-mismatch"),lr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&De(v,"user-mismatch"),R}})).apply(this,arguments)}function Ys(y,d){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,g.Z)(function*(y,d,p=!1){const v="signIn",T=yield Ga(y,v,d),R=yield lr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Sn(y,d){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,d){return Ys(Re(y),d)})).apply(this,arguments)}function wi(y,d){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y);return yield Es(!1,p,d.providerId),pn(p,d)})).apply(this,arguments)}function ws(y,d){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,g.Z)(function*(y,d){return Fc((0,O.m9)(y),d)})).apply(this,arguments)}function qa(y,d){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,d){return Mr(y,"POST","/v1/accounts:signInWithCustomToken",Yt(y,d))})).apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,d){const p=Re(y),v=yield qa(p,{token:d,returnSecureToken:!0}),T=yield lr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?za._fromServerResponse(d,p):De(d,"internal-error")}}class za extends lt{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new za(p)}}function oa(y,d,p){var v;te((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(te(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(te(p.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function Za(){return(Za=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:d};p&&oa(v,T,p),yield ka(v,T)})).apply(this,arguments)}function Yu(){return(Yu=(0,g.Z)(function*(y,d,p){yield An((0,O.m9)(y),{oobCode:d,newPassword:p})})).apply(this,arguments)}function we(){return(we=(0,g.Z)(function*(y,d){yield zs((0,O.m9)(y),{oobCode:d})})).apply(this,arguments)}function Nt(y,d){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y),v=yield An(p,{oobCode:d}),T=v.requestType;switch(te(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(v.mfaInfo,p,"internal-error");default:te(v.email,p,"internal-error")}let R=null;return v.mfaInfo&&(R=lt._fromServerResponse(Re(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(y,d){const{data:p}=yield Nt((0,O.m9)(y),d);return p.email})).apply(this,arguments)}function Gr(){return(Gr=(0,g.Z)(function*(y,d,p){const v=Re(y),T=yield ja(v,{returnSecureToken:!0,email:d,password:p}),R=yield lr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Lc(){return(Lc=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:d};te(p.handleCodeInApp,v,"argument-error"),p&&oa(v,T,p),yield Ei(v,T)})).apply(this,arguments)}function bs(){return(bs=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),T=Zu.credentialWithLink(d,p||wt());return te(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Sn(v,T)})).apply(this,arguments)}function cr(y,d){return ci.apply(this,arguments)}function ci(){return(ci=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:createAuthUri",Yt(y,d))})).apply(this,arguments)}function Cs(){return(Cs=(0,g.Z)(function*(y,d){const v={identifier:d,continueUri:Kt()?wt():"http://localhost"},{signinMethods:T}=yield cr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(y,d){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&oa(p.auth,T,d);const{email:R}=yield vi(p.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xa(){return(Xa=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};p&&oa(v.auth,R,p);const{email:G}=yield Sc(v.auth,R);G!==y.email&&(yield y.reload())})).apply(this,arguments)}function rl(y,d){return aa.apply(this,arguments)}function aa(){return(aa=(0,g.Z)(function*(y,d){return Ut(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function il(){return(il=(0,g.Z)(function*(y,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},G=yield sr(v,rl(v.auth,R));v.displayName=G.displayName||null,v.photoURL=G.photoUrl||null;const X=v.providerData.find(({providerId:ke})=>"password"===ke);X&&(X.displayName=v.displayName,X.photoURL=v.photoURL),yield v._updateTokensIfNecessary(G)})).apply(this,arguments)}function ol(y,d,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,g.Z)(function*(y,d,p){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(R.email=d),p&&(R.password=p);const G=yield sr(y,Ct(v,R));yield y._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Js{constructor(d,p,v={}){this.isNewUser=d,this.providerId=p,this.profile=v}}class Bc extends Js{constructor(d,p,v,T){super(d,p,v),this.username=T}}class jc extends Js{constructor(d,p){super(d,"facebook.com",p)}}class Xs extends Bc{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Ts extends Js{constructor(d,p){super(d,"google.com",p)}}class al extends Bc{constructor(d,p,v){super(d,"twitter.com",p,v)}}function br(y){const{user:d,_tokenResponse:p}=y;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Uc(y){var d,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const G=null===(p=null===(d=et(y.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(G)return new Js(R,"anonymous"!==G&&"custom"!==G?G:null)}if(!v)return null;switch(v){case"facebook.com":return new jc(R,T);case"github.com":return new Xs(R,T);case"google.com":return new Ts(R,T);case"twitter.com":return new al(R,T,y.screenName||null);case"custom":case"anonymous":return new Js(R,null);default:return new Js(R,v,T)}}(p)}class Ji{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new Ji("enroll",d)}static _fromMfaPendingCredential(d){return new Ji("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,v;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Ji._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return Ji._fromIdtoken(d.multiFactorSession.idToken)}return null}}class la{constructor(d,p,v){this.session=d,this.hints=p,this.signInResolver=v}static _fromError(d,p){const v=Re(d),T=p.customData._serverResponse,R=(T.mfaInfo||[]).map(X=>lt._fromServerResponse(v,X));te(T.mfaPendingCredential,v,"internal-error");const G=Ji._fromMfaPendingCredential(T.mfaPendingCredential);return new la(G,R,function(){var X=(0,g.Z)(function*(ke){const Ye=yield ke._process(v,G);delete T.mfaInfo,delete T.mfaPendingCredential;const ot=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(p.operationType){case"signIn":const it=yield lr._fromIdTokenResponse(v,p.operationType,ot);return yield v._updateCurrentUser(it.user),it;case"reauthenticate":return te(p.user,v,"internal-error"),lr._forOperation(p.user,p.operationType,ot);default:De(v,"internal-error")}});return function(ke){return X.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,g.Z)(function*(){return p.signInResolver(d)})()}}function Fn(y,d){return Ut(y,"POST","/v2/accounts/mfaEnrollment:start",Yt(y,d))}class Xi{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>lt._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new Xi(d)}getSession(){var d=this;return(0,g.Z)(function*(){return Ji._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var v=this;return(0,g.Z)(function*(){const T=d,R=yield v.getSession(),G=yield sr(v.user,T._process(v.user.auth,R,p));return yield v.user._updateTokensIfNecessary(G),v.user.reload()})()}unenroll(d){var p=this;return(0,g.Z)(function*(){const v="string"==typeof d?d:d.uid,T=yield p.user.getIdToken(),R=yield sr(p.user,function Cp(y,d){return Ut(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(y,d))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:G})=>G!==v),yield p.user._updateTokensIfNecessary(R);try{yield p.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const To=new WeakMap,cl="__sak";class eo{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(cl,"1"),this.storage.removeItem(cl),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const vn=(()=>{class y extends eo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gc(){const y=(0,O.z$)();return qt(y)||Zn(y)}()&&function jn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=zi(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&p(v,R,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((X,ke,Ye)=>{this.notifyListeners(X,Ye)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const X=this.storage.getItem(T);if(p.newValue!==X)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const R=()=>{const X=this.storage.getItem(T);!v&&this.localCache[T]===X||this.notifyListeners(T,X)},G=this.storage.getItem(T);!function ea(){return(0,O.w1)()&&10===document.documentMode}()||G===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,R=this;return(0,g.Z)(function*(){yield T().call(R,p,v),R.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,g.Z)(function*(){const R=yield v().call(T,p);return T.localCache[p]=JSON.stringify(R),R})()}_remove(p){var v=()=>super._remove,T=this;return(0,g.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),Qt=(()=>{class y extends eo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let qr=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(R=>R.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,g.Z)(function*(){const T=p,{eventId:R,eventType:G,data:X}=T.data,ke=v.handlersMap[G];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:G});const Ye=Array.from(ke).map(function(){var it=(0,g.Z)(function*(bn){return bn(T.origin,X)});return function(bn){return it.apply(this,arguments)}}()),ot=yield function gt(y){return Promise.all(y.map(function(){var d=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return d.apply(this,arguments)}}()))}(Ye);T.ports[0].postMessage({status:"done",eventId:R,eventType:G,response:ot})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ao(y="",d=10){let p="";for(let v=0;v<d;v++)p+=Math.floor(10*Math.random());return y+p}class ca{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,v=50){var T=this;return(0,g.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let G,X;return new Promise((ke,Ye)=>{const ot=Ao("",20);R.port1.start();const it=setTimeout(()=>{Ye(new Error("unsupported_event"))},v);X={messageChannel:R,onMessage(bn){const ei=bn;if(ei.data.eventId===ot)switch(ei.data.status){case"ack":clearTimeout(it),G=setTimeout(()=>{Ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),ke(ei.data.response);break;default:clearTimeout(it),clearTimeout(G),Ye(new Error("invalid_response"))}}},T.handlers.add(X),R.port1.addEventListener("message",X.onMessage),T.target.postMessage({eventType:d,eventId:ot,data:p},[R.port2])}).finally(()=>{X&&T.removeMessageHandler(X)})})()}}function nn(){return window}function yn(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}function It(){return(It=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const dl="firebaseLocalStorageDb",So="firebaseLocalStorage",ts="fbase_key";class Kn{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function xs(y,d){return y.transaction([So],d?"readwrite":"readonly").objectStore(So)}function Ms(){const y=indexedDB.open(dl,1);return new Promise((d,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(So,{keyPath:ts})}catch(T){p(T)}}),y.addEventListener("success",(0,g.Z)(function*(){const v=y.result;v.objectStoreNames.contains(So)?d(v):(v.close(),yield function Wr(){const y=indexedDB.deleteDatabase(dl);return new Kn(y).toPromise()}(),d(yield Ms()))}))})}function hl(y,d,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(function*(y,d,p){const v=xs(y,!0).put({[ts]:d,value:p});return new Kn(v).toPromise()})).apply(this,arguments)}function to(){return(to=(0,g.Z)(function*(y,d){const p=xs(y,!1).get(d),v=yield new Kn(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Rs(y,d){const p=xs(y,!0).delete(d);return new Kn(p).toPromise()}const Zr=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Ms()),p.db})()}_withRetries(p){var v=this;return(0,g.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield p(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return yn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=qr._getInstance(function qc(){return yn()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,g.Z)(function*(T,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,g.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function $n(){return It.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new ca(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,g.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Ap(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ms();return yield hl(p,cl,"1"),yield Rs(p,cl),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,g.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,g.Z)(function*(){return T._withPendingWrite((0,g.Z)(function*(){return yield T._withRetries(R=>hl(R,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,g.Z)(function*(){const T=yield v._withRetries(R=>function ns(y,d){return to.apply(this,arguments)}(R,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,g.Z)(function*(){return v._withPendingWrite((0,g.Z)(function*(){return yield v._withRetries(T=>Rs(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const v=yield p._withRetries(G=>{const X=xs(G,!1).getAll();return new Kn(X).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:G,value:X}of v)R.add(G),JSON.stringify(p.localCache[G])!==JSON.stringify(X)&&(p.notifyListeners(G,X),T.push(G));for(const G of Object.keys(p.localCache))p.localCache[G]&&!R.has(G)&&(p.notifyListeners(G,null),T.push(G));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const R of Array.from(T))R(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Rh(y,d){return Ut(y,"POST","/v2/accounts/mfaSignIn:start",Yt(y,d))}function di(){return(di=(0,g.Z)(function*(y){return(yield Ut(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ha(y){return new Promise((d,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=d,v.onerror=T=>{const R=_e("internal-error");R.customData=T,p(R)},v.type="text/javascript",v.charset="UTF-8",function Nh(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(v)})}function nu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ki=1e12;class Sp{constructor(d){this.auth=d,this.counter=ki,this._widgets=new Map}render(d,p){const v=this.counter;return this._widgets.set(v,new Zc(d,this.auth.name,p||{})),this.counter++,v}reset(d){var p;const v=d||ki;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(d){var p;return(null===(p=this._widgets.get(d||ki))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,g.Z)(function*(){var v;return null===(v=p._widgets.get(d||ki))||void 0===v||v.execute(),""})()}}class Zc{constructor(d,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof d?document.getElementById(d):d;te(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pa(y){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pl=nu("rcb"),Ym=new ln(3e4,6e4);class ye{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nn().grecaptcha}load(d,p=""){return te(function ga(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(nn().grecaptcha):new Promise((v,T)=>{const R=nn().setTimeout(()=>{T(_e(d,"network-request-failed"))},Ym.get());nn()[pl]=()=>{nn().clearTimeout(R),delete nn()[pl];const X=nn().grecaptcha;if(!X)return void T(_e(d,"internal-error"));const ke=X.render;X.render=(Ye,ot)=>{const it=ke(Ye,ot);return this.counter++,it},this.hostLanguage=p,v(X)},ha(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:pl,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),T(_e(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!nn().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gl{load(d){return(0,g.Z)(function*(){return new Sp(d)})()}clearedOneInstance(){}}const xt="recaptcha",Os={theme:"light",type:"image"};class Oh{constructor(d,p=Object.assign({},Os),v){this.parameters=p,this.type=xt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof d?document.getElementById(d):d;te(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gl:new ye,this.validateStartingState()}verify(){var d=this;return(0,g.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(p)||new Promise(R=>{const G=X=>{!X||(d.tokenChangeListeners.delete(G),R(X))};d.tokenChangeListeners.add(G),d.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof d)d(p);else if("string"==typeof d){const v=nn()[d];"function"==typeof v&&v(p)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,g.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,g.Z)(function*(){te(Kt()&&!yn(),d.auth,"internal-error"),yield function xp(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Wc(y){return di.apply(this,arguments)}(d.auth);te(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class no{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=Eo._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Wt(){return(Wt=(0,g.Z)(function*(y,d,p){const v=Re(y),T=yield Cr(v,d,(0,O.m9)(p));return new no(T,R=>Sn(v,R))})).apply(this,arguments)}function Ps(){return(Ps=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);yield Es(!1,v,"phone");const T=yield Cr(v.auth,d,(0,O.m9)(p));return new no(T,R=>wi(v,R))})).apply(this,arguments)}function ml(){return(ml=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y),T=yield Cr(v.auth,d,(0,O.m9)(p));return new no(T,R=>ws(v,R))})).apply(this,arguments)}function Cr(y,d,p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,d,p){var v;const T=yield p.verify();try{let R;if(te("string"==typeof T,y,"argument-error"),te(p.type===xt,y,"argument-error"),R="string"==typeof d?{phoneNumber:d}:d,"session"in R){const G=R.session;if("phoneNumber"in R)return te("enroll"===G.type,y,"internal-error"),(yield Fn(y,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{te("signin"===G.type,y,"internal-error");const X=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return te(X,y,"missing-multi-factor-info"),(yield Rh(y,{mfaPendingCredential:G.credential,mfaEnrollmentId:X,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield Ep(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return G}}finally{p._reset()}})).apply(this,arguments)}function ks(){return(ks=(0,g.Z)(function*(y,d){yield pn((0,O.m9)(y),d)})).apply(this,arguments)}let bi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=Re(p)}verifyPhoneNumber(p,v){return Cr(this.auth,p,(0,O.m9)(v))}static credential(p,v){return Eo._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Eo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Fi(y,d){return d?re(d):(te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Vn extends sn{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return kn(d,this._buildIdpRequest())}_linkToIdToken(d,p){return kn(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return kn(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function Mo(y){return Ys(y.auth,new Vn(y),y.bypassAuthState)}function yl(y){const{auth:d,user:p}=y;return te(p,d,"internal-error"),Fc(p,new Vn(y),y.bypassAuthState)}function Yc(y){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y){const{auth:d,user:p}=y;return te(p,d,"internal-error"),pn(p,new Vn(y),y.bypassAuthState)})).apply(this,arguments)}class dr{constructor(d,p,v,T,R=!1){this.auth=d,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,g.Z)(function*(v,T){d.pendingPromise={resolve:v,reject:T};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(R){d.reject(R)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,g.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:G,error:X,type:ke}=d;if(X)return void p.reject(X);const Ye={auth:p.auth,requestUri:v,sessionId:T,tenantId:G||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(Ye))}catch(ot){p.reject(ot)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return Mo;case"linkViaPopup":case"linkViaRedirect":return Yc;case"reauthViaPopup":case"reauthViaRedirect":return yl;default:De(this.auth,"internal-error")}}resolve(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ru=new ln(2e3,1e4);function Qc(){return(Qc=(0,g.Z)(function*(y,d,p){const v=Re(y);je(y,d,_s);const T=Fi(v,p);return new Yr(v,"signInViaPopup",d,T).executeNotNull()})).apply(this,arguments)}function iu(){return(iu=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,_s);const T=Fi(v.auth,p);return new Yr(v.auth,"reauthViaPopup",d,T,v).executeNotNull()})).apply(this,arguments)}function _l(){return(_l=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,_s);const T=Fi(v.auth,p);return new Yr(v.auth,"linkViaPopup",d,T,v).executeNotNull()})).apply(this,arguments)}let Yr=(()=>{class y extends dr{constructor(p,v,T,R,G){super(p,v,R,G),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const v=yield p.execute();return te(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,g.Z)(function*(){ne(1===p.filter.length,"Popup operations only handle one event");const v=Ao();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,ru.get())};p()}}return y.currentPopupAction=null,y})();const Nr=new Map;class vl extends dr{constructor(d,p,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,g.Z)(function*(){let v=Nr.get(p.auth._key());if(!v){try{const R=(yield function El(y,d){return wl.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}Nr.set(p.auth._key(),v)}return p.bypassAuthState||Nr.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,v=this;return(0,g.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(v,d);if("unknown"!==d.type){if(d.eventId){const T=yield v.auth._redirectUserForId(d.eventId);if(T)return v.user=T,p().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,g.Z)(function*(y,d){const p=b(d),v=D(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function io(y,d){return ya.apply(this,arguments)}function ya(){return(ya=(0,g.Z)(function*(y,d){return D(y)._set(b(d),"true")})).apply(this,arguments)}function D(y){return re(y._redirectPersistence)}function b(y){return le("pendingRedirect",y.config.apiKey,y.name)}function q(){return(q=(0,g.Z)(function*(y,d,p){const v=Re(y);je(y,d,_s);const T=Fi(v,p);return yield io(T,v),T._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function ze(){return(ze=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,_s);const T=Fi(v.auth,p);yield io(T,v.auth);const R=yield ou(v);return T._openRedirect(v.auth,d,"reauthViaRedirect",R)})).apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(y,d,p){const v=(0,O.m9)(y);je(v.auth,d,_s);const T=Fi(v.auth,p);yield Es(!1,v,d.providerId),yield io(T,v.auth);const R=yield ou(v);return T._openRedirect(v.auth,d,"linkViaRedirect",R)})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(y,d){return yield Re(y)._initializationPromise,Mn(y,d,!1)})).apply(this,arguments)}function Mn(y,d){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,g.Z)(function*(y,d,p=!1){const v=Re(y),T=Fi(v,d),G=yield new vl(v,T,p).execute();return G&&!p&&(delete G.user._redirectEventId,yield v._persistUserIfCurrent(G.user),yield v._setRedirectUser(null,d)),G})).apply(this,arguments)}function ou(y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,g.Z)(function*(y){const d=Ao(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class Li{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(p=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Rp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kh(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var v;if(d.error&&!kh(d)){const T=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const v=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rs(d))}saveEventToCache(d){this.cachedEventUids.add(rs(d)),this.lastProcessedEventTime=Date.now()}}function rs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function kh({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Il(y){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(y,d={}){return Ut(y,"GET","/v1/projects",d)})).apply(this,arguments)}const Np=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qm=/^https?/;function No(){return(No=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield Il(y);for(const p of d)try{if(Dl(p))return}catch(v){}De(y,"unauthorized-domain")})).apply(this,arguments)}function Dl(y){const d=wt(),{protocol:p,hostname:v}=new URL(d);if(y.startsWith("chrome-extension://")){const G=new URL(y);return""===G.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&G.hostname===v}if(!Qm.test(p))return!1;if(Np.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Xm=new ln(3e4,6e4);function ey(){const y=nn().___jsl;if(null==y?void 0:y.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Xc=null;function B0(y){return Xc=Xc||function Op(y){return new Promise((d,p)=>{var v,T,R;function G(){ey(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{ey(),p(_e(y,"network-request-failed"))},timeout:Xm.get()})}if(null===(T=null===(v=nn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)d(gapi.iframes.getContext());else{if(!(null===(R=nn().gapi)||void 0===R?void 0:R.load)){const X=nu("iframefcb");return nn()[X]=()=>{gapi.load?G():p(_e(y,"network-request-failed"))},ha(`https://apis.google.com/js/api.js?onload=${X}`).catch(ke=>p(ke))}G()}}).catch(d=>{throw Xc=null,d})}(y),Xc}const ed=new ln(5e3,15e3),au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uu(y){const d=y.config;te(d.authDomain,y,"auth-domain-config-required");const p=d.emulator?cn(d,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:y.name,v:oe.SDK_VERSION},T=Fh.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${p}?${(0,O.xO)(v).slice(1)}`}function td(){return td=(0,g.Z)(function*(y){const d=yield B0(y),p=nn().gapi;return te(p,y,"internal-error"),d.open({where:document.body,url:uu(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:au,dontclear:!0},v=>new Promise(function(){var T=(0,g.Z)(function*(R,G){yield v.restyle({setHideOnLeave:!1});const X=_e(y,"network-request-failed"),ke=nn().setTimeout(()=>{G(X)},ed.get());function Ye(){nn().clearTimeout(ke),R(v)}v.ping(Ye).then(Ye,()=>{G(X)})});return function(R,G){return T.apply(this,arguments)}}()))}),td.apply(this,arguments)}const ny={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vh{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Bh(y,d,p,v,T,R){te(y.config.authDomain,y,"auth-domain-config-required"),te(y.config.apiKey,y,"invalid-api-key");const G={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(d instanceof _s){d.setDefaultLanguage(y.languageCode),G.providerId=d.providerId||"",(0,O.xb)(d.getCustomParameters())||(G.customParameters=JSON.stringify(d.getCustomParameters()));for(const[ke,Ye]of Object.entries(R||{}))G[ke]=Ye}if(d instanceof jr){const ke=d.getScopes().filter(Ye=>""!==Ye);ke.length>0&&(G.scopes=ke.join(","))}y.tenantId&&(G.tid=y.tenantId);const X=G;for(const ke of Object.keys(X))void 0===X[ke]&&delete X[ke];return`${function Fp({config:y}){return y.emulator?cn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(X).slice(1)}`}const Ls="webStorageSupport";class sy extends class Lp{constructor(d){this.factorId=d}_process(d,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,v);case"signin":return this._finalizeSignIn(d,p.credential);default:return z("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new sy(d)}_finalizeEnroll(d,p,v){return function $c(y,d){return Ut(y,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(y,d))}(d,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function fl(y,d){return Ut(y,"POST","/v2/accounts/mfaSignIn:finalize",Yt(y,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Vp=(()=>{class y{constructor(){}static assertion(p){return sy._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var H0="@firebase/auth",oy="0.19.11";class ay{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(v=>{var T;d((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cu(){return window}function Cl(){return(Cl=(0,g.Z)(function*(y,d,p){var v;const{BuildInfo:T}=cu();ne(d.sessionId,"AuthEvent did not contain a session ID");const R=yield dy(d.sessionId),G={};return Zn()?G.ibi=T.packageName:In()?G.apn=T.packageName:De(y,"operation-not-supported-in-this-environment"),T.displayName&&(G.appDisplayName=T.displayName),G.sessionId=R,Bh(y,p,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,G)})).apply(this,arguments)}function is(){return(is=(0,g.Z)(function*(y){const{BuildInfo:d}=cu(),p={};Zn()?p.iosBundleId=d.packageName:In()?p.androidPackageName=d.packageName:De(y,"operation-not-supported-in-this-environment"),yield Il(y,p)})).apply(this,arguments)}function sd(){return(sd=(0,g.Z)(function*(y,d,p){const{cordova:v}=cu();let T=()=>{};try{yield new Promise((R,G)=>{let X=null;function ke(){var it;R();const bn=null===(it=v.plugins.browsertab)||void 0===it?void 0:it.close;"function"==typeof bn&&bn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ye(){X||(X=window.setTimeout(()=>{G(_e(y,"redirect-cancelled-by-user"))},2e3))}function ot(){"visible"===(null==document?void 0:document.visibilityState)&&Ye()}d.addPassiveListener(ke),document.addEventListener("resume",Ye,!1),In()&&document.addEventListener("visibilitychange",ot,!1),T=()=>{d.removePassiveListener(ke),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ot,!1),X&&window.clearTimeout(X)}})}finally{T()}})).apply(this,arguments)}function dy(y){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,g.Z)(function*(y){const d=hy(y),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hy(y){if(ne(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const d=new ArrayBuffer(y.length),p=new Uint8Array(d);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function ly(y){(0,oe._registerComponent)(new ie.wA("auth",(d,{options:p})=>{const v=d.getProvider("app").getImmediate(),T=d.getProvider("heartbeat"),{apiKey:R,authDomain:G}=v.options;return((X,ke)=>{te(R&&!R.includes(":"),"invalid-api-key",{appName:X.name}),te(!(null==G?void 0:G.includes(":")),"argument-error",{appName:X.name});const Ye={apiKey:R,authDomain:G,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ta(y)},ot=new ai(X,ke,Ye);return function se(y,d){const p=(null==d?void 0:d.persistence)||[],v=(Array.isArray(p)?p:[p]).map(re);(null==d?void 0:d.errorMap)&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(ot,p),ot})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,v)=>{d.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",d=>{const p=Re(d.getProvider("auth").getImmediate());return new ay(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(H0,oy,function uy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(H0,oy,"esm2017")}("Browser");class ad extends Li{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,g.Z)(function*(){yield d.initPromise})()}}function fy(y){return ld.apply(this,arguments)}function ld(){return(ld=(0,g.Z)(function*(y){const d=yield Tl()._get(du(y));return d&&(yield Tl()._remove(du(y))),d})).apply(this,arguments)}function py(){const y=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*d.length);y.push(d.charAt(v))}return y.join("")}function Tl(){return re(vn)}function du(y){return le("authEvent",y.config.apiKey,y.name)}function Oo(y){if(!(null==y?void 0:y.includes("?")))return{};const[d,...p]=y.split("?");return(0,O.zd)(p.join("?"))}function Bp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function vt(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function pd(y=(0,O.z$)()){return!("file:"!==vt()&&"ionic:"!==vt()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Or(){try{const y=self.localStorage,d=Ao();if(y)return y.setItem(d,"1"),y.removeItem(d),!function Sl(y=(0,O.z$)()){return function z0(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function jp(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return xl()&&(0,O.hl)()}return!1}function xl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function fd(){return"http:"===vt()||"https:"===vt()}()||(0,O.ru)()||pd())&&!function Al(){return(0,O.b$)()||(0,O.UG)()}()&&Or()&&!xl()}function hu(){return pd()&&"undefined"!=typeof document}function hi(){return(hi=(0,g.Z)(function*(){return!!hu()&&new Promise(y=>{const d=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),y(!0)})})})).apply(this,arguments)}const Ci={LOCAL:"local",NONE:"none",SESSION:"session"},fu=te,gd="persistence";function Ml(y){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,g.Z)(function*(y){yield y._initializationPromise;const d=Wh(),p=le(gd,y.config.apiKey,y.name);d&&d.setItem(p,y._getPersistence())})).apply(this,arguments)}function Wh(){var y;try{return(null===(y=function zh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(d){return null}}const Xr=te;class Vi{constructor(){this.browserResolver=re(class lu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qt,this._completeRedirectFn=Mn}_openPopup(d,p,v,T){var R=this;return(0,g.Z)(function*(){var G;ne(null===(G=R.eventManagers[d._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const X=Bh(d,p,v,wt(),T);return function iy(y,d,p,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),G=Math.max((window.screen.availWidth-v)/2,0).toString();let X="";const ke=Object.assign(Object.assign({},ny),{width:v.toString(),height:T.toString(),top:R,left:G}),Ye=(0,O.z$)().toLowerCase();p&&(X=wr(Ye)?"_blank":p),pt(Ye)&&(d=d||"http://localhost",ke.scrollbars="yes");const ot=Object.entries(ke).reduce((bn,[ei,Po])=>`${bn}${ei}=${Po},`,"");if(function Pa(y=(0,O.z$)()){var d;return Zn(y)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(Ye)&&"_self"!==X)return function j0(y,d){const p=document.createElement("a");p.href=y,p.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(d||"",X),new Vh(null);const it=window.open(d||"",X,ot);te(it,y,"popup-blocked");try{it.focus()}catch(bn){}return new Vh(it)}(d,X,Ao())})()}_openRedirect(d,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(d),function zr(y){nn().location.href=y}(Bh(d,p,v,wt(),T)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:T,promise:R}=this.eventManagers[p];return T?Promise.resolve(T):(ne(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(d);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(d){var p=this;return(0,g.Z)(function*(){const v=yield function ty(y){return td.apply(this,arguments)}(d),T=new Li(d);return v.register("authEvent",R=>(te(null==R?void 0:R.authEvent,d,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:T},p.iframes[d._key()]=v,T})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(Ls,{type:Ls},T=>{var R;const G=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[Ls];void 0!==G&&p(!!G),De(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Jm(y){return No.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return zi()||qt()||Zn()}}),this.cordovaResolver=re(class gy{constructor(){this._redirectPersistence=Qt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn}_initialize(d){var p=this;return(0,g.Z)(function*(){const v=d._key();let T=p.eventManagers.get(v);return T||(T=new ad(d),p.eventManagers.set(v,T),p.attachCallbackListeners(d,T)),T})()}_openPopup(d){De(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,v,T){var R=this;return(0,g.Z)(function*(){!function $h(y){var d,p,v,T,R,G,X,ke,Ye,ot;const it=cu();te("function"==typeof(null===(d=null==it?void 0:it.universalLinks)||void 0===d?void 0:d.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(void 0!==(null===(p=null==it?void 0:it.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te("function"==typeof(null===(R=null===(T=null===(v=null==it?void 0:it.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(ke=null===(X=null===(G=null==it?void 0:it.cordova)||void 0===G?void 0:G.plugins)||void 0===X?void 0:X.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te("function"==typeof(null===(ot=null===(Ye=null==it?void 0:it.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ot?void 0:ot.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const G=yield R._initialize(d);yield G.initialized(),G.resetRedirect(),function su(){Nr.clear()}(),yield R._originValidation(d);const X=function ud(y,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:py(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(d,v,T);yield function Up(y,d){return Tl()._set(du(y),d)}(d,X);const ke=yield function q0(y,d,p){return Cl.apply(this,arguments)}(d,X,p),Ye=yield function id(y){const{cordova:d}=cu();return new Promise(p=>{d.plugins.browsertab.isAvailable(v=>{let T=null;v?d.plugins.browsertab.openUrl(y):T=d.InAppBrowser.open(y,function qs(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(ke);return function jh(y,d,p){return sd.apply(this,arguments)}(d,G,Ye)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function cy(y){return is.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=cu(),G=setTimeout((0,g.Z)(function*(){yield fy(d),p.onEvent(Bp())}),500),X=function(){var ot=(0,g.Z)(function*(it){clearTimeout(G);const bn=yield fy(d);let ei=null;bn&&(null==it?void 0:it.url)&&(ei=function cd(y,d){var p,v;const T=function hd(y){const d=Oo(y),p=d.link?decodeURIComponent(d.link):void 0,v=Oo(p).link,T=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Oo(T).link||T||v||p||y}(d);if(T.includes("/__/auth/callback")){const R=Oo(T),G=R.firebaseError?function dd(y){try{return JSON.parse(y)}catch(d){return null}}(decodeURIComponent(R.firebaseError)):null,X=null===(v=null===(p=null==G?void 0:G.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],ke=X?_e(X):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(bn,it.url)),p.onEvent(ei||Bp())});return function(bn){return ot.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,X);const ke=T,Ye=`${R.packageName.toLowerCase()}://`;cu().handleOpenURL=function(){var ot=(0,g.Z)(function*(it){if(it.toLowerCase().startsWith(Ye)&&X({url:it}),"function"==typeof ke)try{ke(it)}catch(bn){console.error(bn)}});return function(it){return ot.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qt,this._completeRedirectFn=Mn}_initialize(d){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(d,p,v,T)})()}_openRedirect(d,p,v,T){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(d,p,v,T)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return hu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,g.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Jt(){return hi.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Pr(y){return y.unwrap()}function md(y){return Kh(y)}function Kh(y){const{_tokenResponse:d}=y instanceof O.ZR?y.customData:y;if(!d)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return bi.credentialFromResult(y);const p=d.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=ra;break;case"facebook.com":v=Zs;break;case"github.com":v=Pc;break;case"twitter.com":v=Ba;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:G,pendingToken:X,nonce:ke}=d;return R||G||T||X?X?p.startsWith("saml.")?Io._create(p,X):Ki._fromParams({providerId:p,signInMethod:p,pendingToken:X,idToken:T,accessToken:R}):new wo(p).credential({idToken:T,accessToken:R,rawNonce:ke}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function hr(y,d){return d.catch(p=>{throw p instanceof O.ZR&&function Zh(y,d){var p;const v=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new _y(y,function eu(y,d){var p;const v=(0,O.m9)(y),T=d;return te(d.customData.operationType,v,"argument-error"),te(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),la._fromError(v,T)}(y,d));else if(v){const T=Kh(d),R=d;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:md(p),additionalUserInfo:br(p),user:oo.getOrCreate(T)}})}function yd(y,d){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,g.Z)(function*(y,d){const p=yield d;return{verificationId:p.verificationId,confirm:v=>hr(y,p.confirm(v))}})).apply(this,arguments)}class _y{constructor(d,p){this.resolver=p,this.auth=function $p(y){return y.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return hr(Pr(this.auth),this.resolver.resolveSignIn(d))}}class oo{constructor(d){this._delegate=d,this.multiFactor=function Hc(y){const d=(0,O.m9)(y);return To.has(d)||To.set(d,Xi._fromUser(d)),To.get(d)}(d)}static getOrCreate(d){return oo.USER_MAP.has(d)||oo.USER_MAP.set(d,new oo(d)),oo.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,g.Z)(function*(){return hr(p.auth,wi(p._delegate,d))})()}linkWithPhoneNumber(d,p){var v=this;return(0,g.Z)(function*(){return yd(v.auth,function xo(y,d,p){return Ps.apply(this,arguments)}(v._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,g.Z)(function*(){return hr(p.auth,function Ph(y,d,p){return _l.apply(this,arguments)}(p._delegate,d,Vi))})()}linkWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield Ml(Re(p.auth)),function Je(y,d,p){return function mt(y,d,p){return Lt.apply(this,arguments)}(y,d,p)}(p._delegate,d,Vi)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,g.Z)(function*(){return hr(p.auth,ws(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return yd(this.auth,function Mp(y,d,p){return ml.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return hr(this.auth,function ro(y,d,p){return iu.apply(this,arguments)}(this._delegate,d,Vi))}reauthenticateWithRedirect(d){var p=this;return(0,g.Z)(function*(){return yield Ml(Re(p.auth)),function ee(y,d,p){return function Se(y,d,p){return ze.apply(this,arguments)}(y,d,p)}(p._delegate,d,Vi)})()}sendEmailVerification(d){return function Ii(y,d){return nl.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,g.Z)(function*(){return yield function ia(y,d){return Ku.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function sl(y,d){return ol((0,O.m9)(y),d,null)}(this._delegate,d)}updatePassword(d){return function Vc(y,d){return ol((0,O.m9)(y),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function Kc(y,d){return ks.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function ua(y,d){return il.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function Ja(y,d,p){return Xa.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oo.USER_MAP=new WeakMap;const Vs=te;let _d=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;Vs(T,"invalid-api-key",{appName:p.name}),Vs(T,"invalid-api-key",{appName:p.name});const R="undefined"!=typeof window?Vi:void 0;this._delegate=v.initialize({options:{persistence:Hp(T,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function hn(y,d,p){const v=Re(y);te(v._canInitEmulator,v,"emulator-config-failed"),te(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),R=ar(d),{host:G,port:X}=function fs(y){const d=ar(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Pn(v.substr(R.length+1))}}{const[R,G]=v.split(":");return{host:R,port:Pn(G)}}}(d);v.config.emulator={url:`${R}//${G}${null===X?"":`:${X}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:G,port:X,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Pi(){function y(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function Qu(y,d){return we.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Nt(this._delegate,p)}confirmPasswordReset(p,v){return function Ka(y,d,p){return Yu.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,g.Z)(function*(){return hr(T._delegate,function Co(y,d,p){return Gr.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Qa(y,d){return Cs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function tl(y,d){const p=Ws.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Vs(Hn(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Dt(y,d){return xn.apply(this,arguments)}(p._delegate,Vi);return v?hr(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function my(y,d){Re(y)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:R,error:G,complete:X}=vd(p,v,T);return this._delegate.onAuthStateChanged(R,G,X)}onIdTokenChanged(p,v,T){const{next:R,error:G,complete:X}=vd(p,v,T);return this._delegate.onIdTokenChanged(R,G,X)}sendSignInLinkToEmail(p,v){return function el(y,d,p){return Lc.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function Wa(y,d,p){return Za.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,g.Z)(function*(){let T;switch(function yy(y,d){fu(Object.values(Ci).includes(d),y,"invalid-persistence-type"),(0,O.b$)()?fu(d!==Ci.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?fu(d===Ci.NONE,y,"unsupported-persistence-type"):xl()?fu(d===Ci.NONE||d===Ci.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):fu(d===Ci.NONE||Or(),y,"unsupported-persistence-type")}(v._delegate,p),p){case Ci.SESSION:T=Qt;break;case Ci.LOCAL:T=(yield re(Zr)._isAvailable())?Zr:vn;break;case Ci.NONE:T=$;break;default:return De("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return hr(this._delegate,function $a(y){return kc.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return hr(this._delegate,Sn(this._delegate,p))}signInWithCustomToken(p){return hr(this._delegate,function Is(y,d){return Ds.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return hr(this._delegate,function Xu(y,d,p){return Sn((0,O.m9)(y),Zu.credential(d,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return hr(this._delegate,function Ya(y,d,p){return bs.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return yd(this._delegate,function Qn(y,d,p){return Wt.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,g.Z)(function*(){return Vs(Hn(),v._delegate,"operation-not-supported-in-this-environment"),hr(v._delegate,function Fs(y,d,p){return Qc.apply(this,arguments)}(v._delegate,p,Vi))})()}signInWithRedirect(p){var v=this;return(0,g.Z)(function*(){return Vs(Hn(),v._delegate,"operation-not-supported-in-this-environment"),yield Ml(v._delegate),function x(y,d,p){return function F(y,d,p){return q.apply(this,arguments)}(y,d,p)}(v._delegate,p,Vi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function mn(y,d){return bo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ci,y})();function vd(y,d,p){let v=y;"function"!=typeof y&&({next:v,error:d,complete:p}=y);const T=v;return{next:G=>T(G&&oo.getOrCreate(G)),error:d,complete:p}}function Hp(y,d){const p=function Nl(y,d){const p=Wh();if(!p)return[];const v=le(gd,y,d);switch(p.getItem(v)){case Ci.NONE:return[$];case Ci.LOCAL:return[Zr,Qt];case Ci.SESSION:return[Qt];default:return[]}}(y,d);if("undefined"!=typeof self&&!p.includes(Zr)&&p.push(Zr),"undefined"!=typeof window)for(const v of[vn,Qt])p.includes(v)||p.push(v);return p.includes($)||p.push($),p}class Yh{constructor(){this.providerId="phone",this._delegate=new bi(Pr(K.Z.auth()))}static credential(d,p){return bi.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Yh.PHONE_SIGN_IN_METHOD=bi.PHONE_SIGN_IN_METHOD,Yh.PROVIDER_ID=bi.PROVIDER_ID;const Gp=te;class Ed{constructor(d,p,v=K.Z.app()){var T;Gp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Oh(d,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jh(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new _d(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zu,FacebookAuthProvider:Zs,GithubAuthProvider:Pc,GoogleAuthProvider:ra,OAuthProvider:wo,SAMLAuthProvider:li,PhoneAuthProvider:Yh,PhoneMultiFactorGenerator:Vp,RecaptchaVerifier:Ed,TwitterAuthProvider:Ba,Auth:_d,AuthCredential:sn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.11")}(K.Z)},8306:(nt,Ce,k)=>{k.d(Ce,{y:()=>B});var g=k(2961),K=k(727),O=k(8822),oe=k(4671);var ie=k(2416),ce=k(576),ue=k(2806);let B=(()=>{class Te{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const de=new Te;return de.source=this,de.operator=Pe,de}subscribe(Pe,de,Ee){const Ke=function $e(Te){return Te&&Te instanceof g.Lv||function Q(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,K.Nn)(Te)}(Pe)?Pe:new g.Hp(Pe,de,Ee);return(0,ue.x)(()=>{const{operator:Ge,source:De}=this;Ke.add(Ge?Ge.call(Ke,De):De?this._subscribe(Ke):this._trySubscribe(Ke))}),Ke}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(de){Pe.error(de)}}forEach(Pe,de){return new(de=j(de))((Ee,Ke)=>{const Ge=new g.Hp({next:De=>{try{Pe(De)}catch(_e){Ke(_e),Ge.unsubscribe()}},error:Ke,complete:Ee});this.subscribe(Ge)})}_subscribe(Pe){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function pe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(Pe){return Te.reduce((de,Ee)=>Ee(de),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((de,Ee)=>{let Ke;this.subscribe(Ge=>Ke=Ge,Ge=>Ee(Ge),()=>de(Ke))})}}return Te.create=Me=>new Te(Me),Te})();function j(Te){var Me;return null!==(Me=null!=Te?Te:ie.v.Promise)&&void 0!==Me?Me:Promise}},7579:(nt,Ce,k)=>{k.d(Ce,{x:()=>ie});var g=k(8306),K=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),pe=k(2806);let ie=(()=>{class ue extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Q=new ce(this,this);return Q.operator=j,Q}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Q}=this;for(;Q.length;)Q.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Q,isStopped:$e,observers:Te}=this;return Q||$e?K.Lc:(this.currentObservers=null,Te.push(j),new K.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Q,thrownError:$e,isStopped:Te}=this;Q?j.error($e):Te&&j.complete()}asObservable(){const j=new g.y;return j.source=this,j}}return ue.create=(B,j)=>new ce(B,j),ue})();class ce extends ie{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Q||Q.call(j,B)}error(B){var j,Q;null===(Q=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Q||Q.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Q;return null!==(Q=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Q?Q:K.Lc}}},2961:(nt,Ce,k)=>{k.d(Ce,{Hp:()=>Pe,Lv:()=>Q});var g=k(576),K=k(727),O=k(2416),oe=k(7849);function J(){}const pe=ue("C",void 0,void 0);function ue(De,_e,ve){return{kind:De,value:_e,error:ve}}var B=k(3410),j=k(2806);class Q extends K.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,K.Nn)(_e)&&_e.add(this)):this.destination=Ge}static create(_e,ve,je){return new Pe(_e,ve,je)}next(_e){this.isStopped?Ke(function ce(De){return ue("N",De,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?Ke(function ie(De){return ue("E",void 0,De)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?Ke(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(De,_e){return $e.call(De,_e)}class Me{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(je){de(je)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(je){de(je)}else de(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){de(ve)}}}class Pe extends Q{constructor(_e,ve,je){let Be;if(super(),(0,g.m)(_e)||!_e)Be={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let te;this&&O.v.useDeprecatedNextContext?(te=Object.create(_e),te.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Te(_e.next,te),error:_e.error&&Te(_e.error,te),complete:_e.complete&&Te(_e.complete,te)}):Be=_e}this.destination=new Me(Be)}}function de(De){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(De):(0,oe.h)(De)}function Ke(De,_e){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(De,_e))}const Ge={closed:!0,next:J,error:function Ee(De){throw De},complete:J}},727:(nt,Ce,k)=>{k.d(Ce,{Lc:()=>pe,w0:()=>J,Nn:()=>ie});var g=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Q,$e)=>`${$e+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Q}=this;if((0,g.m)(Q))try{Q()}catch(Te){B=Te instanceof O?Te.errors:[Te]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Te of $e)try{ce(Te)}catch(Me){B=null!=B?B:[],Me instanceof O?B=[...B,...Me.errors]:B.push(Me)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const pe=J.EMPTY;function ie(ue){return ue instanceof J||ue&&"closed"in ue&&(0,g.m)(ue.remove)&&(0,g.m)(ue.add)&&(0,g.m)(ue.unsubscribe)}function ce(ue){(0,g.m)(ue)?ue():ue.unsubscribe()}},2416:(nt,Ce,k)=>{k.d(Ce,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(nt,Ce,k)=>{k.d(Ce,{E:()=>K});const K=new(k(8306).y)(J=>J.complete())},8996:(nt,Ce,k)=>{k.d(Ce,{D:()=>_e});var g=k(8421),K=k(5363),O=k(9468),pe=k(8306),ce=k(2202),ue=k(576),B=k(9672);function Q(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,B.f)(Be,je,()=>{const te=ve[Symbol.asyncIterator]();(0,B.f)(Be,je,()=>{te.next().then(z=>{z.done?Be.complete():Be.next(z.value)})},0,!0)})})}var $e=k(3670),Te=k(8239),Me=k(1144),Pe=k(6495),de=k(2206),Ee=k(4532),Ke=k(3260);function _e(ve,je){return je?function De(ve,je){if(null!=ve){if((0,$e.c)(ve))return function oe(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,K.Q)(je))}(ve,je);if((0,Me.z)(ve))return function ie(ve,je){return new pe.y(Be=>{let te=0;return je.schedule(function(){te===ve.length?Be.complete():(Be.next(ve[te++]),Be.closed||this.schedule())})})}(ve,je);if((0,Te.t)(ve))return function J(ve,je){return(0,g.Xf)(ve).pipe((0,O.R)(je),(0,K.Q)(je))}(ve,je);if((0,de.D)(ve))return Q(ve,je);if((0,Pe.T)(ve))return function j(ve,je){return new pe.y(Be=>{let te;return(0,B.f)(Be,je,()=>{te=ve[ce.h](),(0,B.f)(Be,je,()=>{let z,ne;try{({value:z,done:ne}=te.next())}catch(ge){return void Be.error(ge)}ne?Be.complete():Be.next(z)},0,!0)}),()=>(0,ue.m)(null==te?void 0:te.return)&&te.return()})}(ve,je);if((0,Ke.L)(ve))return function Ge(ve,je){return Q((0,Ke.Q)(ve),je)}(ve,je)}throw(0,Ee.z)(ve)}(ve,je):(0,g.Xf)(ve)}},8421:(nt,Ce,k)=>{k.d(Ce,{Xf:()=>$e});var g=k(655),K=k(1144),O=k(8239),oe=k(8306),J=k(3670),pe=k(2206),ie=k(4532),ce=k(6495),ue=k(3260),B=k(576),j=k(7849),Q=k(8822);function $e(De){if(De instanceof oe.y)return De;if(null!=De){if((0,J.c)(De))return function Te(De){return new oe.y(_e=>{const ve=De[Q.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,K.z)(De))return function Me(De){return new oe.y(_e=>{for(let ve=0;ve<De.length&&!_e.closed;ve++)_e.next(De[ve]);_e.complete()})}(De);if((0,O.t)(De))return function Pe(De){return new oe.y(_e=>{De.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,j.h)})}(De);if((0,pe.D)(De))return Ee(De);if((0,ce.T)(De))return function de(De){return new oe.y(_e=>{for(const ve of De)if(_e.next(ve),_e.closed)return;_e.complete()})}(De);if((0,ue.L)(De))return function Ke(De){return Ee((0,ue.Q)(De))}(De)}throw(0,ie.z)(De)}function Ee(De){return new oe.y(_e=>{(function Ge(De,_e){var ve,je,Be,te;return(0,g.mG)(this,void 0,void 0,function*(){try{for(ve=(0,g.KL)(De);!(je=yield ve.next()).done;)if(_e.next(je.value),_e.closed)return}catch(z){Be={error:z}}finally{try{je&&!je.done&&(te=ve.return)&&(yield te.call(ve))}finally{if(Be)throw Be.error}}_e.complete()})})(De,_e).catch(ve=>_e.error(ve))})}},6451:(nt,Ce,k)=>{k.d(Ce,{T:()=>pe});var g=k(8189),K=k(8421),O=k(515),oe=k(7669),J=k(8996);function pe(...ie){const ce=(0,oe.yG)(ie),ue=(0,oe._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,K.Xf)(B[0]):(0,g.J)(ue)((0,J.D)(B,ce)):O.E}},5403:(nt,Ce,k)=>{k.d(Ce,{x:()=>K});var g=k(2961);function K(oe,J,pe,ie,ce){return new O(oe,J,pe,ie,ce)}class O extends g.Lv{constructor(J,pe,ie,ce,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Q){J.error(Q)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Q){J.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(nt,Ce,k)=>{k.d(Ce,{U:()=>O});var g=k(4482),K=k(5403);function O(oe,J){return(0,g.e)((pe,ie)=>{let ce=0;pe.subscribe((0,K.x)(ie,ue=>{ie.next(oe.call(J,ue,ce++))}))})}},8189:(nt,Ce,k)=>{k.d(Ce,{J:()=>O});var g=k(5577),K=k(4671);function O(oe=1/0){return(0,g.z)(K.y,oe)}},5577:(nt,Ce,k)=>{k.d(Ce,{z:()=>ce});var g=k(4004),K=k(8421),O=k(4482),oe=k(9672),J=k(5403),ie=k(576);function ce(ue,B,j=1/0){return(0,ie.m)(B)?ce((Q,$e)=>(0,g.U)((Te,Me)=>B(Q,Te,$e,Me))((0,K.Xf)(ue(Q,$e))),j):("number"==typeof B&&(j=B),(0,O.e)((Q,$e)=>function pe(ue,B,j,Q,$e,Te,Me,Pe){const de=[];let Ee=0,Ke=0,Ge=!1;const De=()=>{Ge&&!de.length&&!Ee&&B.complete()},_e=je=>Ee<Q?ve(je):de.push(je),ve=je=>{Te&&B.next(je),Ee++;let Be=!1;(0,K.Xf)(j(je,Ke++)).subscribe((0,J.x)(B,te=>{null==$e||$e(te),Te?_e(te):B.next(te)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ee--;de.length&&Ee<Q;){const te=de.shift();Me?(0,oe.f)(B,Me,()=>ve(te)):ve(te)}De()}catch(te){B.error(te)}}))};return ue.subscribe((0,J.x)(B,_e,()=>{Ge=!0,De()})),()=>{null==Pe||Pe()}}(Q,$e,ue,j)))}},5363:(nt,Ce,k)=>{k.d(Ce,{Q:()=>oe});var g=k(9672),K=k(4482),O=k(5403);function oe(J,pe=0){return(0,K.e)((ie,ce)=>{ie.subscribe((0,O.x)(ce,ue=>(0,g.f)(ce,J,()=>ce.next(ue),pe),()=>(0,g.f)(ce,J,()=>ce.complete(),pe),ue=>(0,g.f)(ce,J,()=>ce.error(ue),pe)))})}},3099:(nt,Ce,k)=>{k.d(Ce,{B:()=>pe});var g=k(8996),K=k(5698),O=k(7579),oe=k(2961),J=k(4482);function pe(ce={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Q=!0}=ce;return $e=>{let Te=null,Me=null,Pe=null,de=0,Ee=!1,Ke=!1;const Ge=()=>{null==Me||Me.unsubscribe(),Me=null},De=()=>{Ge(),Te=Pe=null,Ee=Ke=!1},_e=()=>{const ve=Te;De(),null==ve||ve.unsubscribe()};return(0,J.e)((ve,je)=>{de++,!Ke&&!Ee&&Ge();const Be=Pe=null!=Pe?Pe:ue();je.add(()=>{de--,0===de&&!Ke&&!Ee&&(Me=ie(_e,Q))}),Be.subscribe(je),Te||(Te=new oe.Hp({next:te=>Be.next(te),error:te=>{Ke=!0,Ge(),Me=ie(De,B,te),Be.error(te)},complete:()=>{Ee=!0,Ge(),Me=ie(De,j),Be.complete()}}),(0,g.D)(ve).subscribe(Te))})($e)}}function ie(ce,ue,...B){return!0===ue?(ce(),null):!1===ue?null:ue(...B).pipe((0,K.q)(1)).subscribe(()=>ce())}},9468:(nt,Ce,k)=>{k.d(Ce,{R:()=>K});var g=k(4482);function K(O,oe=0){return(0,g.e)((J,pe)=>{pe.add(O.schedule(()=>J.subscribe(pe),oe))})}},5698:(nt,Ce,k)=>{k.d(Ce,{q:()=>oe});var g=k(515),K=k(4482),O=k(5403);function oe(J){return J<=0?()=>g.E:(0,K.e)((pe,ie)=>{let ce=0;pe.subscribe((0,O.x)(ie,ue=>{++ce<=J&&(ie.next(ue),J<=ce&&ie.complete())}))})}},8505:(nt,Ce,k)=>{k.d(Ce,{b:()=>J});var g=k(576),K=k(4482),O=k(5403),oe=k(4671);function J(pe,ie,ce){const ue=(0,g.m)(pe)||ie||ce?{next:pe,error:ie,complete:ce}:pe;return ue?(0,K.e)((B,j)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let $e=!0;B.subscribe((0,O.x)(j,Te=>{var Me;null===(Me=ue.next)||void 0===Me||Me.call(ue,Te),j.next(Te)},()=>{var Te;$e=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var Me;$e=!1,null===(Me=ue.error)||void 0===Me||Me.call(ue,Te),j.error(Te)},()=>{var Te,Me;$e&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(Me=ue.finalize)||void 0===Me||Me.call(ue)}))}):oe.y}},4408:(nt,Ce,k)=>{k.d(Ce,{o:()=>J});var g=k(727);class K extends g.w0{constructor(ie,ce){super()}schedule(ie,ce=0){return this}}const O={setInterval(pe,ie,...ce){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ie,...ce):setInterval(pe,ie,...ce)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class J extends K{constructor(ie,ce){super(ie,ce),this.scheduler=ie,this.work=ce,this.pending=!1}schedule(ie,ce=0){if(this.closed)return this;this.state=ie;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(ie,ce,ue=0){return O.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;O.clearInterval(ce)}execute(ie,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ce){let B,ue=!1;try{this.work(ie)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(ce,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,Ce,k)=>{k.d(Ce,{v:()=>O});var g=k(6063);class K{constructor(J,pe=K.now){this.schedulerActionCtor=J,this.now=pe}schedule(J,pe=0,ie){return new this.schedulerActionCtor(this,J).schedule(ie,pe)}}K.now=g.l.now;class O extends K{constructor(J,pe=K.now){super(J,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:pe}=this;if(this._active)return void pe.push(J);let ie;this._active=!0;do{if(ie=J.execute(J.state,J.delay))break}while(J=pe.shift());if(this._active=!1,ie){for(;J=pe.shift();)J.unsubscribe();throw ie}}}},4986:(nt,Ce,k)=>{k.d(Ce,{z:()=>O});var g=k(4408);const O=new(k(7565).v)(g.o)},6063:(nt,Ce,k)=>{k.d(Ce,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g={setTimeout(K,O,...oe){const{delegate:J}=g;return(null==J?void 0:J.setTimeout)?J.setTimeout(K,O,...oe):setTimeout(K,O,...oe)},clearTimeout(K){const{delegate:O}=g;return((null==O?void 0:O.clearTimeout)||clearTimeout)(K)},delegate:void 0}},2202:(nt,Ce,k)=>{k.d(Ce,{h:()=>K});const K=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,Ce,k)=>{k.d(Ce,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(nt,Ce,k)=>{k.d(Ce,{_6:()=>pe,jO:()=>oe,yG:()=>J});var g=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,g.m)(O(ie))?ie.pop():void 0}function J(ie){return function K(ie){return ie&&(0,g.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,ce){return"number"==typeof O(ie)?ie.pop():ce}},8737:(nt,Ce,k)=>{function g(K,O){if(K){const oe=K.indexOf(O);0<=oe&&K.splice(oe,1)}}k.d(Ce,{P:()=>g})},3888:(nt,Ce,k)=>{function g(K){const oe=K(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>g})},2806:(nt,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>O});var g=k(2416);let K=null;function O(J){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!K;if(pe&&(K={errorThrown:!1,error:null}),J(),pe){const{errorThrown:ie,error:ce}=K;if(K=null,ie)throw ce}}else J()}function oe(J){g.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=J)}},9672:(nt,Ce,k)=>{function g(K,O,oe,J=0,pe=!1){const ie=O.schedule(function(){oe(),pe?K.add(this.schedule(null,J)):this.unsubscribe()},J);if(K.add(ie),!pe)return ie}k.d(Ce,{f:()=>g})},4671:(nt,Ce,k)=>{function g(K){return K}k.d(Ce,{y:()=>g})},1144:(nt,Ce,k)=>{k.d(Ce,{z:()=>g});const g=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(nt,Ce,k)=>{k.d(Ce,{D:()=>K});var g=k(576);function K(O){return Symbol.asyncIterator&&(0,g.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(nt,Ce,k)=>{function g(K){return"function"==typeof K}k.d(Ce,{m:()=>g})},3670:(nt,Ce,k)=>{k.d(Ce,{c:()=>O});var g=k(8822),K=k(576);function O(oe){return(0,K.m)(oe[g.L])}},6495:(nt,Ce,k)=>{k.d(Ce,{T:()=>O});var g=k(2202),K=k(576);function O(oe){return(0,K.m)(null==oe?void 0:oe[g.h])}},8239:(nt,Ce,k)=>{k.d(Ce,{t:()=>K});var g=k(576);function K(O){return(0,g.m)(null==O?void 0:O.then)}},3260:(nt,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>O});var g=k(655),K=k(576);function O(J){return(0,g.FC)(this,arguments,function*(){const ie=J.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,g.qq)(ie.read());if(ue)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ce)}}finally{ie.releaseLock()}})}function oe(J){return(0,K.m)(null==J?void 0:J.getReader)}},4482:(nt,Ce,k)=>{k.d(Ce,{A:()=>K,e:()=>O});var g=k(576);function K(oe){return(0,g.m)(null==oe?void 0:oe.lift)}function O(oe){return J=>{if(K(J))return J.lift(function(pe){try{return oe(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(nt,Ce,k)=>{k.d(Ce,{h:()=>O});var g=k(2416),K=k(3410);function O(oe){K.z.setTimeout(()=>{const{onUnhandledError:J}=g.v;if(!J)throw oe;J(oe)})}},4532:(nt,Ce,k)=>{function g(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>g})},655:(nt,Ce,k)=>{function oe(z,ne){var ge={};for(var re in z)Object.prototype.hasOwnProperty.call(z,re)&&ne.indexOf(re)<0&&(ge[re]=z[re]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(re=Object.getOwnPropertySymbols(z);xe<re.length;xe++)ne.indexOf(re[xe])<0&&Object.prototype.propertyIsEnumerable.call(z,re[xe])&&(ge[re[xe]]=z[re[xe]])}return ge}function ce(z,ne,ge,re){return new(ge||(ge=Promise))(function(se,wt){function Kt(ft){try{rt(re.next(ft))}catch(ln){wt(ln)}}function Tn(ft){try{rt(re.throw(ft))}catch(ln){wt(ln)}}function rt(ft){ft.done?se(ft.value):function xe(se){return se instanceof ge?se:new ge(function(wt){wt(se)})}(ft.value).then(Kt,Tn)}rt((re=re.apply(z,ne||[])).next())})}function de(z){return this instanceof de?(this.v=z,this):new de(z)}function Ee(z,ne,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,re=ge.apply(z,ne||[]),se=[];return xe={},wt("next"),wt("throw"),wt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function wt(cn){re[cn]&&(xe[cn]=function(_i){return new Promise(function(rn,Hi){se.push([cn,_i,rn,Hi])>1||Kt(cn,_i)})})}function Kt(cn,_i){try{!function Tn(cn){cn.value instanceof de?Promise.resolve(cn.value.v).then(rt,ft):ln(se[0][2],cn)}(re[cn](_i))}catch(rn){ln(se[0][3],rn)}}function rt(cn){Kt("next",cn)}function ft(cn){Kt("throw",cn)}function ln(cn,_i){cn(_i),se.shift(),se.length&&Kt(se[0][0],se[0][1])}}function Ge(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ne=z[Symbol.asyncIterator];return ne?ne.call(z):(z=function Q(z){var ne="function"==typeof Symbol&&Symbol.iterator,ge=ne&&z[ne],re=0;if(ge)return ge.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&re>=z.length&&(z=void 0),{value:z&&z[re++],done:!z}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),ge={},re("next"),re("throw"),re("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function re(se){ge[se]=z[se]&&function(wt){return new Promise(function(Kt,Tn){!function xe(se,wt,Kt,Tn){Promise.resolve(Tn).then(function(rt){se({value:rt,done:Kt})},wt)}(Kt,Tn,(wt=z[se](wt)).done,wt.value)})}}}k.d(Ce,{FC:()=>Ee,KL:()=>Ge,_T:()=>oe,mG:()=>ce,qq:()=>de})},5e3:(nt,Ce,k)=>{k.d(Ce,{$8M:()=>nu,$Z:()=>Wd,AFp:()=>Yv,AaK:()=>ce,CHM:()=>Ju,CRH:()=>vm,CZH:()=>Sm,CqO:()=>us,EJc:()=>Xb,EpF:()=>m_,F4k:()=>JE,FYo:()=>ah,FiY:()=>Jr,G48:()=>PI,GfV:()=>lh,Gpc:()=>j,JOm:()=>X,LFG:()=>Je,LSH:()=>ss,Lbi:()=>yh,MGl:()=>Of,NdJ:()=>y_,OlP:()=>Ln,Oqu:()=>x_,PXZ:()=>uC,Q6J:()=>Af,QGY:()=>Au,Qsj:()=>sv,R0b:()=>fn,RDi:()=>Yi,Rgc:()=>hh,SBq:()=>zf,Sil:()=>Xv,Suo:()=>Sv,TTD:()=>Zs,TgZ:()=>$t,VLi:()=>xI,X6Q:()=>Ic,XFs:()=>st,Xpm:()=>Rt,Y36:()=>zd,YKP:()=>mc,YNc:()=>Cf,Yjl:()=>wr,Yz7:()=>rn,ZZ4:()=>Bm,_Bn:()=>Jw,_UZ:()=>kg,_Vd:()=>qf,_c5:()=>jI,_uU:()=>yw,aQg:()=>Ra,c2e:()=>ni,cJS:()=>Yt,cg1:()=>qg,dDg:()=>oC,deG:()=>ye,dqk:()=>Ft,eFA:()=>n0,ekj:()=>Ug,g9A:()=>Qv,h0i:()=>gc,hGG:()=>$I,iGM:()=>_m,ifc:()=>Bt,ip1:()=>Kv,kL8:()=>zg,lG2:()=>qt,n5z:()=>Nh,oAB:()=>Y,oxw:()=>tw,q4F:()=>am,qLn:()=>hr,qOj:()=>Tg,qZA:()=>Sf,sBO:()=>cC,sIi:()=>bu,s_b:()=>hm,soG:()=>Mm,tBr:()=>Qr,tb:()=>II,tp0:()=>rs,uIk:()=>Xl,vHH:()=>Me,vpe:()=>go,wAp:()=>yt,xp6:()=>tE,z2F:()=>r0,zSh:()=>Ky,zs3:()=>co});var g=k(7579),K=k(727),O=k(8306),oe=k(6451),J=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Q(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Me extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function Ee(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Me(-201,`No provider for ${Ee(i)} found${a}`)}function rt(i,s){null==i&&function ft(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function rn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ut(i){return ir(i,Ni)||ir(i,Gi)}function ir(i,s){return i.hasOwnProperty(s)?i[s]:null}function Mr(i){return i&&(i.hasOwnProperty(Rr)||i.hasOwnProperty(qi))?i[Rr]:null}const Ni=pe({\u0275prov:pe}),Rr=pe({\u0275inj:pe}),Gi=pe({ngInjectableDef:pe}),qi=pe({ngInjectorDef:pe});var st=(()=>((st=st||{})[st.Default=0]="Default",st[st.Host=1]="Host",st[st.Self=2]="Self",st[st.SkipSelf=4]="SkipSelf",st[st.Optional=8]="Optional",st))();let Ur;function Bn(i){const s=Ur;return Ur=i,s}function oi(i,s,a){const u=Ut(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&st.Optional?null:void 0!==s?s:void _e(ce(i),"Injector")}function gn(i){return{toString:i}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),Bt=(()=>{return(i=Bt||(Bt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Bt;var i})();const et="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=et||"undefined"!=typeof global&&global||_t||sr,or={},at=[],Er=pe({\u0275cmp:pe}),Ot=pe({\u0275dir:pe}),qe=pe({\u0275pipe:pe}),be=pe({\u0275mod:pe}),Ze=pe({\u0275fac:pe}),ut=pe({__NG_ELEMENT_ID__:pe});let kt=0;function Rt(i){return gn(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Bt.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,_=i.pipes;return u.id+=kt++,u.inputs=pt(i.inputs,a),u.outputs=pt(i.outputs),f&&f.forEach(E=>E(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,u})}function L(i){return jt(i)||function In(i){return i[Ot]||null}(i)}function $(i){return function At(i){return i[qe]||null}(i)}const le={};function Y(i){return gn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function pt(i,s){if(null==i)return or;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const qt=Rt;function wr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function jt(i){return i[Er]||null}function dn(i,s){const a=i[be]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function Ei(i){return Array.isArray(i)&&"object"==typeof i[1]}function ui(i){return Array.isArray(i)&&!0===i[1]}function Sc(i){return 0!=(8&i.flags)}function ms(i){return 2==(2&i.flags)}function La(i){return 1==(1&i.flags)}function Br(i){return null!==i.template}function Th(i){return 0!=(512&i[2])}function jr(i,s){return i.hasOwnProperty(Ze)?i[Ze]:null}class wo{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Zs(){return ra}function ra(i){return i.type.prototype.ngOnChanges&&(i.setInput=bp),Pc}function Pc(){const i=vs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===or)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function bp(i,s,a,u){const c=vs(i)||function li(i,s){return i[Io]=s}(i,{previous:or,current:null}),f=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];f[E]=new wo(I&&I.currentValue,s,_===or),i[u]=s}Zs.ngInherit=!0;const Io="__ngSimpleChanges__";function vs(i){return i[Io]||null}let Ga;function Yi(i){Ga=i}function pn(i){return!!i.listen}const Do={createRenderer:(i,s)=>function ia(){return void 0!==Ga?Ga:"undefined"!=typeof document?document:void 0}()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function Ys(i,s){return an(s[i])}function Ir(i,s){return an(s[i.index])}function sa(i,s){return i.data[s]}function Dr(i,s){const a=s[i];return Ei(a)?a:a[0]}function ws(i){return 4==(4&i[2])}function Qi(i){return 128==(128&i[2])}function Hr(i,s){return null==s?null:i[s]}function Is(i){i[18]=0}function Ds(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const lt={lFrame:Js(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ka(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function Nt(){return lt.lFrame.tView}function Ju(i){return lt.lFrame.contextLView=i,i[8]}function mn(){let i=bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function bo(){return lt.lFrame.currentTNode}function Gr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function Xu(){return lt.lFrame.isParent}function Ya(){return lt.isInCheckNoChangesMode}function bs(i){lt.isInCheckNoChangesMode=i}function Cs(){return lt.lFrame.bindingIndex++}function Xa(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,aa(s)}function aa(i){lt.lFrame.currentDirectiveIndex=i}function il(){return lt.lFrame.currentQueryIndex}function sl(i){lt.lFrame.currentQueryIndex=i}function Vc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ol(i,s,a){if(a&st.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&st.Host||(c=Vc(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=lt.lFrame=Uc();return u.currentTNode=s,u.lView=i,!0}function Qs(i){const s=Uc(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Uc(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Js(i):s}function Js(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Bc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const jc=Bc;function Xs(){const i=Bc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function br(){return lt.lFrame.selectedIndex}function As(i){lt.lFrame.selectedIndex=i}function Dn(){const i=lt.lFrame;return sa(i.tView,i.selectedIndex)}function Ji(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=f;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function la(i,s,a){$c(i,s,3,a)}function eu(i,s,a,u){(3&i[2])===a&&$c(i,s,a,u)}function Fn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function $c(i,s,a,u){const f=null!=u?u:-1,_=s.length-1;let E=0;for(let I=void 0!==u?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=u&&E>=u)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(Cp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Cp(i,s,a,u){const c=a[u]<0,f=a[u+1],E=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class To{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Ss(i,s,a){const u=pn(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const _=a[c++],E=a[c++],I=a[c++];u?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=f,E=a[++c];gt(_)?u&&i.setProperty(s,_,E):u?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Qt(i){return 3===i||4===i||6===i}function gt(i){return 64===i.charCodeAt(0)}function qr(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||Ao(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function Ao(i,s,a,u,c){let f=0,_=i.length;if(-1===s)_=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==_&&(i.splice(_,0,s),f=_+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function ca(i){return-1!==i}function nn(i){return 32767&i}function yn(i,s){let a=function zr(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let $n=!0;function It(i){const s=$n;return $n=i,s}let zc=0;function ts(i,s){const a=xs(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Kn(u.data,i),Kn(s,null),Kn(u.blueprint,null));const c=Wr(i,s),f=i.injectorIndex;if(ca(c)){const _=nn(c),E=yn(c,s),I=E[1].data;for(let A=0;A<8;A++)s[f+A]=E[_+A]|I[_+A]}return s[f+8]=c,f}function Kn(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xs(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Wr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],_=f.type;if(u=2===_?f.declTNode:1===_?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Ms(i,s,a){!function So(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(u=a[ut]),null==u&&(u=a[ut]=zc++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Di(i,s,a){if(a&st.Optional)return i;_e(s,"NodeInjector")}function ns(i,s,a,u){if(a&st.Optional&&void 0===u&&(u=null),0==(a&(st.Self|st.Host))){const c=i[9],f=Bn(void 0);try{return c?c.get(s,u,a&st.Optional):oi(s,u,a&st.Optional)}finally{Bn(f)}}return Di(u,s,a)}function to(i,s,a,u=st.Default,c){if(null!==i){const f=function Rh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:da:s}(a);if("function"==typeof f){if(!ol(s,i,u))return u&st.Host?Di(c,a,u):ns(s,a,u,c);try{const _=f(u);if(null!=_||u&st.Optional)return _;_e(a)}finally{jc()}}else if("number"==typeof f){let _=null,E=xs(i,s),I=-1,A=u&st.Host?s[16][6]:null;for((-1===E||u&st.SkipSelf)&&(I=-1===E?Wr(i,s):s[E+8],-1!==I&&Wc(u,!1)?(_=s[1],E=nn(I),s=yn(I,s)):E=-1);-1!==E;){const S=s[1];if(fl(f,E,S.data)){const P=Yn(E,s,a,_,u,A);if(P!==Rs)return P}I=s[E+8],-1!==I&&Wc(u,s[1].data[E+8]===A)&&fl(f,E,s)?(_=S,E=nn(I),s=yn(I,s)):E=-1}}}return ns(s,a,u,c)}const Rs={};function da(){return new di(mn(),we())}function Yn(i,s,a,u,c,f){const _=s[1],E=_.data[i+8],S=tu(E,_,a,null==u?ms(E)&&$n:u!=_&&0!=(3&E.type),c&st.Host&&f===E);return null!==S?Zr(s,_,S,E):Rs}function tu(i,s,a,u,c){const f=i.providerIndexes,_=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,V=c?E+S:i.directiveEnd;for(let W=u?E:E+S;W<V;W++){const me=_[W];if(W<I&&a===me||W>=I&&me.type===a)return W}if(c){const W=_[I];if(W&&Br(W)&&W.type===a)return I}return null}function Zr(i,s,a,u){let c=i[a];const f=s.data;if(function Hc(i){return i instanceof To}(c)){const _=c;_.resolving&&function Ke(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Me(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ee(f[a]));const E=It(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Bn(_.injectImpl):null;ol(i,u,st.Default);try{c=i[a]=_.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function ll(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const _=ra(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Bn(I),It(E),_.resolving=!1,jc()}}return c}function fl(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Wc(i,s){return!(i&st.Self||i&st.Host&&s)}class di{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return to(this._tNode,this._lView,s,u,a)}}function Nh(i){return gn(()=>{const s=i.prototype.constructor,a=s[Ze]||ha(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Ze]||ha(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function ha(i){return $e(i)?()=>{const s=ha(Q(i));return s&&s()}:jr(i)}function nu(i){return function hl(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(Qt(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(mn(),i)}const fa="__parameters__";function pa(i,s,a){return gn(()=>{const u=function Zc(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const _=new c(...f);return E.annotation=_,E;function E(I,A,S){const P=I.hasOwnProperty(fa)?I[fa]:Object.defineProperty(I,fa,{value:[]})[fa];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Ln{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ye=new Ln("AnalyzeForEntryComponents");function Cr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Cr(u,s)):s!==i&&s.push(u)}return s}function Kr(i,s){i.forEach(a=>Array.isArray(a)?Kr(a,s):s(a))}function Kc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function ks(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function dr(i,s,a){let u=Fs(i,s);return u>=0?i[1|u]=a:(u=~u,function Mo(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function ru(i,s){const a=Fs(i,s);if(a>=0)return i[1|a]}function Fs(i,s){return function ro(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),_=i[f<<a];if(s===_)return f<<a;_>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const io={},ya="__NG_DI_FLAG__",su="ngTempTokenPath",b=/\n/gm,F="__source",q=pe({provide:String,useValue:pe});let ee;function Se(i){const s=ee;return ee=i,s}function ze(i,s=st.Default){if(void 0===ee)throw new Me(203,"");return null===ee?oi(i,void 0,s):ee.get(i,s&st.Optional?null:void 0,s)}function Je(i,s=st.Default){return(function zn(){return Ur}()||ze)(Q(i),s)}const Lt=Je;function Dt(i){const s=[];for(let a=0;a<i.length;a++){const u=Q(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Me(900,"");let c,f=st.Default;for(let _=0;_<u.length;_++){const E=u[_],I=Mn(E);"number"==typeof I?-1===I?c=E.token:f|=I:c=E}s.push(Je(c,f))}else s.push(Je(u))}return s}function xn(i,s){return i[ya]=s,i.prototype[ya]=s,i}function Mn(i){return i[ya]}const Qr=xn(pa("Inject",i=>({token:i})),-1),Jr=xn(pa("Optional"),8),rs=xn(pa("SkipSelf"),4);class iy{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ls(i){return i instanceof iy?i.changingThisBreaksApplicationSecurity:i}const cu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,q0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Jn=(()=>((Jn=Jn||{})[Jn.NONE=0]="NONE",Jn[Jn.HTML=1]="HTML",Jn[Jn.STYLE=2]="STYLE",Jn[Jn.SCRIPT=3]="SCRIPT",Jn[Jn.URL=4]="URL",Jn[Jn.RESOURCE_URL=5]="RESOURCE_URL",Jn))();function ss(i){const s=function Sl(){const i=we();return i&&i[12]}();return s?s.sanitize(Jn.URL,i)||"":function lu(i,s){const a=function rd(i){return i instanceof iy&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ls(i):function Cl(i){return(i=String(i)).match(cu)||i.match(q0)?i:"unsafe:"+i}(de(i))}const hu="__ngContext__";function Jt(i,s){i[hu]=s}function zh(i){const s=function hi(i){return i[hu]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function md(i){return i.ngOriginalError}function Kh(i,...s){i.error(...s)}class hr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=function Zh(i){return i&&i.ngErrorLogger||Kh}(s);u(this._console,"ERROR",s),a&&u(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&md(s);for(;a&&md(a);)a=md(a);return a||null}}const Ed=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function p(i){return i instanceof Function?i():i}var X=(()=>((X=X||{})[X.Important=1]="Important",X[X.DashCase=2]="DashCase",X))();function Ye(i,s){return undefined(i,s)}function bn(i){const s=i[3];return ui(s)?s[3]:s}function pu(i){return Pl(i[13])}function _a(i){return Pl(i[4])}function Pl(i){for(;null!==i&&!ui(i);)i=i[4];return i}function ao(i,s,a,u,c){if(null!=u){let f,_=!1;ui(u)?f=u:Ei(u)&&(_=!0,u=u[0]);const E=an(u);0===i&&null!==a?null==c?qp(s,a,E):Ll(s,a,E,c||null,!0):1===i&&null!==a?Ll(s,a,E,c||null,!0):2===i?function Ty(i,s,a){const u=Dd(i,s);u&&function ID(i,s,a,u){pn(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=f&&function bD(i,s,a,u,c){const f=a[7];f!==an(a)&&ao(s,i,u,f,c);for(let E=10;E<a.length;E++){const I=a[E];af(I[1],I,i,s,u,f)}}(s,i,f,a,c)}}function Fl(i,s,a){if(pn(i))return i.createElement(s,a);{const u=null!==a?function Ha(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===u?i.createElement(s):i.createElementNS(u,s)}}function Tr(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ds(c,-1)),a.splice(u,1)}function Ar(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&Tr(c,u),s>0&&(i[a-1][4]=u[4]);const f=ks(i,10+s);!function tf(i,s){af(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const _=f[19];null!==_&&_.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function nf(i,s){if(!(256&s[2])){const a=s[11];pn(a)&&a.destroyNode&&af(i,s,a,3,null,null),function Ey(i){let s=i[13];if(!s)return rf(i[1],i);for(;s;){let a=null;if(Ei(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)Ei(s)&&rf(s[1],s),s=s[3];null===s&&(s=i),Ei(s)&&rf(s[1],s),a=s&&s[4]}s=a}}(s)}}function rf(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function wD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof To)){const f=a[u+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=c[f[_]],I=f[_+1];try{I.call(E)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function ED(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const _=a[f+1],E="function"==typeof _?_(s):an(s[_]),I=u[c=a[f+2]],A=a[f+3];"boolean"==typeof A?E.removeEventListener(a[f],I,A):A>=0?u[c=A]():u[c=-A].unsubscribe(),f+=2}else{const _=u[c=a[f+1]];a[f].call(_)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&pn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ui(s[3])){a!==s[3]&&Tr(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function Dy(i,s,a){return function W0(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Bt.None||c===Bt.Emulated)return null}return Ir(u,a)}(i,s.parent,a)}function Ll(i,s,a,u,c){pn(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function qp(i,s,a){pn(i)?i.appendChild(s,a):s.appendChild(a)}function zp(i,s,a,u,c){null!==u?Ll(i,s,a,u,c):qp(i,s,a)}function Dd(i,s){return pn(i)?i.parentNode(s):s.parentNode}let Wp=function sf(i,s,a){return 40&i.type?Ir(i,a):null};function Zp(i,s,a,u){const c=Dy(i,u,s),f=s[11],E=function K0(i,s,a){return Wp(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)zp(f,c,a[I],E,!1);else zp(f,c,a,E,!1)}function gu(i,s){if(null!==s){const a=s.type;if(3&a)return Ir(s,i);if(4&a)return Kp(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return gu(i,u);{const c=i[s.index];return ui(c)?Kp(-1,c):an(c)}}if(32&a)return Ye(s,i)()||an(i[s.index]);{const u=Cy(i,s);return null!==u?Array.isArray(u)?u[0]:gu(bn(i[16]),u):gu(i,s.next)}}return null}function Cy(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Kp(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return gu(u,c)}return s[7]}function bd(i,s,a,u,c,f,_){for(;null!=a;){const E=u[a.index],I=a.type;if(_&&0===s&&(E&&Jt(an(E),u),a.flags|=4),64!=(64&a.flags))if(8&I)bd(i,s,a.child,u,c,f,!1),ao(s,i,c,E,f);else if(32&I){const A=Ye(a,u);let S;for(;S=A();)ao(s,i,c,S,f);ao(s,i,c,E,f)}else 16&I?Vl(i,s,u,a,c,f):ao(s,i,c,E,f);a=_?a.projectionNext:a.next}}function af(i,s,a,u,c,f){bd(a,u,i.firstChild,s,c,f,!1)}function Vl(i,s,a,u,c,f){const _=a[16],I=_[6].projection[u.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)ao(s,i,c,I[A],f);else bd(i,s,I,_[3],c,f,!0)}function mu(i,s,a){pn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Yp(i,s,a){pn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function uf(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Cd="ng-template";function Y0(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==uf(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function fi(i){return 4===i.type&&i.value!==Cd}function Q0(i,s,a){return s===(4!==i.type||a?i.value:Cd)}function lf(i,s,a){let u=4;const c=i.attrs||[],f=function eE(i){for(let s=0;s<i.length;s++)if(Qt(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&u){if(u=2|1&u,""!==I&&!Q0(i,I,a)||""===I&&1===s.length){if(Ui(u))return!1;_=!0}}else{const A=8&u?I:s[++E];if(8&u&&null!==i.attrs){if(!Y0(i.attrs,A,a)){if(Ui(u))return!1;_=!0}continue}const P=J0(8&u?"class":I,c,fi(i),a);if(-1===P){if(Ui(u))return!1;_=!0;continue}if(""!==A){let V;V=P>f?"":c[P+1].toLowerCase();const W=8&u?V:null;if(W&&-1!==uf(W,A,0)||2&u&&A!==V){if(Ui(u))return!1;_=!0}}}}else{if(!_&&!Ui(u)&&!Ui(I))return!1;if(_&&Ui(I))continue;_=!1,u=I|1&u}}return Ui(u)||_}function Ui(i){return 0==(1&i)}function J0(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function cf(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function Qp(i,s,a=!1){for(let u=0;u<s.length;u++)if(lf(i,s[u],a))return!0;return!1}function Jp(i,s){return i?":not("+s.trim()+")":s}function Sy(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&u){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?c+="."+_:4&u&&(c+=" "+_);else""!==c&&!Ui(_)&&(s+=Jp(f,c),c=""),u=_,f=f||!Ui(u);a++}return""!==c&&(s+=Jp(f,c)),s}const Tt={};function tE(i){eg(Nt(),we(),br()+i,Ya())}function eg(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&la(s,f,a)}else{const f=i.preOrderHooks;null!==f&&eu(s,f,0,a)}As(a)}function Td(i,s){return i<<17|s<<2}function Us(i){return i>>17&32767}function My(i){return 2|i}function os(i){return(131068&i)>>2}function tg(i,s){return-131069&i|s<<2}function Ul(i){return 1|i}function lE(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const _=i.data[f];sl(c),_.contentQueries(2,s[f],f)}}}function _u(i,s,a,u,c,f,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,Is(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Fo(i,s,a,u,c){let f=i.data[s];if(null===f)f=function xd(i,s,a,u,c){const f=bo(),_=Xu(),I=i.data[s]=function hE(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(_?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,u,c),function nl(){return lt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const _=function Co(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Gr(f,!0),f}function vu(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function Md(i,s,a){Qs(s);try{const u=i.viewQuery;null!==u&&Uo(1,u,a);const c=i.template;null!==c&&cE(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&lE(i,s),i.staticViewQueries&&Uo(2,i.viewQuery,a);const f=i.components;null!==f&&function OD(i,s){for(let a=0;a<s.length;a++)qy(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Xs()}}function Lo(i,s,a,u){const c=s[2];if(256==(256&c))return;Qs(s);const f=Ya();try{Is(s),function Qa(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cE(i,s,a,2,u);const _=3==(3&c);if(!f)if(_){const A=i.preOrderCheckHooks;null!==A&&la(s,A,null)}else{const A=i.preOrderHooks;null!==A&&eu(s,A,0,null),Fn(s,0)}if(function Rd(i){for(let s=pu(i);null!==s;s=_a(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&Ds(f,1),c[2]|=1024}}}(s),function IE(i){for(let s=pu(i);null!==s;s=_a(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];Qi(u)&&Lo(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&lE(i,s),!f)if(_){const A=i.contentCheckHooks;null!==A&&la(s,A)}else{const A=i.contentHooks;null!==A&&eu(s,A,1),Fn(s,1)}!function Ny(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)As(~c);else{const f=c,_=a[++u],E=a[++u];Xa(_,f),E(2,s[f])}}}finally{As(-1)}}(i,s);const E=i.components;null!==E&&function ND(i,s){for(let a=0;a<s.length;a++)LD(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Uo(2,I,u),!f)if(_){const A=i.viewCheckHooks;null!==A&&la(s,A)}else{const A=i.viewHooks;null!==A&&eu(s,A,2),Fn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ds(s[3],-1))}finally{Xs()}}function yf(i,s,a,u){const c=s[10],f=!Ya(),_=ws(s);try{f&&!_&&c.begin&&c.begin(),_&&Md(i,s,u),Lo(i,s,a,u)}finally{f&&!_&&c.end&&c.end()}}function cE(i,s,a,u,c){const f=br(),_=2&u;try{As(-1),_&&s.length>20&&eg(i,s,20,Ya()),a(u,c)}finally{As(f)}}function dg(i,s,a){!Ka()||(function yE(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||ts(a,s),Jt(u,s);const _=a.initialInputs;for(let E=c;E<f;E++){const I=i.data[E],A=Br(I);A&&EE(s,a,I);const S=Zr(s,i,E,a);Jt(S,s),null!==_&&wE(0,E-c,S,I,0,_),A&&(Dr(a.index,s)[8]=S)}}(i,s,a,Ir(a,s)),128==(128&a.flags)&&function _E(i,s,a){const u=a.directiveStart,c=a.directiveEnd,_=a.index,E=function rl(){return lt.lFrame.currentDirectiveIndex}();try{As(_);for(let I=u;I<c;I++){const A=i.data[I],S=s[I];aa(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&pg(A,S)}}finally{As(-1),aa(E)}}(i,s,a))}function Oy(i,s,a=Ir){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const _=u[f+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function dE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=hg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function hg(i,s,a,u,c,f,_,E,I,A){const S=20+u,P=S+c,V=function PD(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Tt);return a}(S,P),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function _f(i,s,a,u){const c=Ne(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&er(i).push(u,c.length-1))}function Vo(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Ti(i,s,a,u,c,f,_,E){const I=Ir(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[u])?(Xe(i,a,S,u,c),ms(s)&&function vf(i,s){const a=Dr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function FD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=_?_(c,s.value||"",u):c,pn(f)?f.setProperty(I,u,c):gt(u)||(I.setProperty?I.setProperty(u,c):I[u]=c))}function Vy(i,s,a,u){let c=!1;if(Ka()){const f=function By(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const _=u[f];Qp(a,_.selectors,!1)&&(c||(c=[]),Ms(ts(a,s),i,_.type),Br(_)?(jy(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===u?null:{"":-1};if(null!==f){c=!0,$y(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,A=vu(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=qr(a.mergedAttrs,P.hostAttrs),Eu(i,a,s,A,P),vE(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function fE(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<u;A++){const S=c[A],P=S.inputs,V=null===f||fi(s)?null:yg(P,f);_.push(V),E=Vo(P,A,E),I=Vo(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function gg(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Me(-301,!1);u.push(s[c],f)}}}(a,u,_)}return a.mergedAttrs=qr(a.mergedAttrs,a.attrs),c}function Uy(i,s,a,u,c,f){const _=f.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Ef(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(u,c,_)}}function pg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function jy(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function vE(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Br(s)&&(a[""]=i)}}function $y(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Eu(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=jr(c.type)),_=new To(f,Br(c),null);i.blueprint[u]=_,a[u]=_,Uy(i,s,0,u,vu(i,a,c.hostVars,Tt),c)}function EE(i,s,a){const u=Ir(s,i),c=dE(a),f=i[10],_=_g(i,_u(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=_}function uo(i,s,a,u,c,f){const _=Ir(i,s);!function mg(i,s,a,u,c,f,_){if(null==f)pn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?de(f):_(f,u||"",c);pn(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,f,i.value,a,u,c)}function wE(i,s,a,u,c,f){const _=f[s];if(null!==_){const E=u.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],P=_[I++];null!==E?u.setInput(a,P,A,S):a[S]=P}}}function yg(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function Hy(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function LD(i,s){const a=Dr(s,i);if(Qi(a)){const u=a[1];80&a[2]?Lo(u,a,u.template,a[8]):a[5]>0&&Gy(a)}}function Gy(i){for(let u=pu(i);null!==u;u=_a(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const _=f[1];Lo(_,f,_.template,f[8])}else f[5]>0&&Gy(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=Dr(a[u],i);Qi(c)&&c[5]>0&&Gy(c)}}function qy(i,s){const a=Dr(s,i),u=a[1];(function VD(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),Md(u,a,a[8])}function _g(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function vg(i){for(;i;){i[2]|=64;const s=bn(i);if(Th(i)&&!s)return i;i=s}return null}function zy(i,s,a){const u=s[10];u.begin&&u.begin();try{Lo(i,s,i.template,a)}catch(c){throw Eg(s,c),c}finally{u.end&&u.end()}}function Wy(i){!function Nd(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=zh(a),c=u[1];yf(c,u,c.template,a)}}(i[8])}function Uo(i,s,a){sl(0),s(i,a)}const BD=(()=>Promise.resolve(null))();function Ne(i){return i[7]||(i[7]=[])}function er(i){return i.cleanup||(i.cleanup=[])}function Eg(i,s){const a=i[9],u=a?a.get(hr,null):null;u&&u.handleError(s)}function Xe(i,s,a,u,c){for(let f=0;f<a.length;){const _=a[f++],E=a[f++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,u,E):I[E]=c}}function dt(i,s,a){const u=Ys(s,i);!function ef(i,s,a){pn(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function wg(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?f=E:1==f?c=ue(c,E):2==f&&(u=ue(u,E+": "+s[++_]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const fr=new Ln("INJECTOR",-1);class Zy{get(s,a=io){if(a===io){const u=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw u.name="NullInjectorError",u}return a}}const Ky=new Ln("Set Injector scope."),wf={},jD={};let Yy;function bE(){return void 0===Yy&&(Yy=new Zy),Yy}function Qy(i,s=null,a=null,u){const c=CE(i,s,a,u);return c._resolveInjectorDefTypes(),c}function CE(i,s=null,a=null,u){return new ET(i,a,s||bE(),u)}class ET{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&Kr(a,E=>this.processProvider(E,s,a)),Kr([s],E=>this.processInjectorType(E,[],f)),this.records.set(fr,lo(void 0,this));const _=this.records.get(Ky);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=io,u=st.Default){this.assertNotDestroyed();const c=Se(this),f=Bn(void 0);try{if(!(u&st.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function Xt(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ln}(s)&&Ut(s);E=I&&this.injectableDefInScope(I)?lo(Ai(s),wf):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&st.Self?bE():this.parent).get(s,a=u&st.Optional&&a===io?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[su]=_[su]||[]).unshift(ce(s)),c)throw _;return function Ro(i,s,a,u){const c=i[su];throw s[F]&&c.unshift(s[F]),i.message=function ou(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let f=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[su]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Bn(f),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(s,a,u){if(!(s=Q(s)))return!1;let c=Mr(s);const f=null==c&&s.ngModule||void 0,_=void 0===f?s:f,E=-1!==u.indexOf(_);if(void 0!==f&&(c=Mr(f)),null==c)return!1;if(null!=c.imports&&!E){let S;u.push(_);try{Kr(c.imports,P=>{this.processInjectorType(P,a,u)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:W}=S[P];Kr(W,me=>this.processProvider(me,V,W||at))}}this.injectorDefTypes.add(_);const I=jr(_)||(()=>new _);this.records.set(_,lo(I,wf));const A=c.providers;if(null!=A&&!E){const S=s;Kr(A,P=>this.processProvider(P,S,A))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=Hl(s=Q(s))?s:Q(s&&s.provide);const f=function TE(i,s,a){return Jy(i)?lo(void 0,i.useValue):lo(Vt(i),wf)}(s);if(Hl(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=lo(void 0,wf,!0),_.factory=()=>Dt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===wf&&(a.value=jD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function If(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Ai(i){const s=Ut(i),a=null!==s?s.factory:jr(i);if(null!==a)return a;if(i instanceof Ln)throw new Me(204,!1);if(i instanceof Function)return function $D(i){const s=i.length;if(s>0)throw function bi(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Me(204,!1);const a=function si(i){const s=i&&(i[Ni]||i[Gi]);if(s){const a=function ds(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Me(204,!1)}function Vt(i,s,a){let u;if(Hl(i)){const c=Q(i);return jr(c)||Ai(c)}if(Jy(i))u=()=>Q(i.useValue);else if(function Et(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Dt(i.deps||[]));else if(function tr(i){return!(!i||!i.useExisting)}(i))u=()=>Je(Q(i.useExisting));else{const c=Q(i&&(i.useClass||i.provide));if(!function AE(i){return!!i.deps}(i))return jr(c)||Ai(c);u=()=>new c(...Dt(i.deps))}return u}function lo(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Jy(i){return null!==i&&"object"==typeof i&&q in i}function Hl(i){return"function"==typeof i}let co=(()=>{class i{static create(a,u){var c;if(Array.isArray(a))return Qy({name:""},u,a,"");{const f=null!==(c=a.name)&&void 0!==c?c:"";return Qy({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=io,i.NULL=new Zy,i.\u0275prov=rn({token:i,providedIn:"any",factory:()=>Je(fr)}),i.__NG_ELEMENT_ID__=-1,i})();function n_(i,s){Ji(zh(i)[1],mn())}function Tg(i){let s=function r_(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(Br(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Me(903,"");c=s.\u0275dir}if(c){if(a){u.push(c);const _=i;_.inputs=Ql(i.inputs),_.declaredInputs=Ql(i.declaredInputs),_.outputs=Ql(i.outputs);const E=c.hostBindings;E&&PE(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&NE(i,I),A&&OE(i,A),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Br(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(i),E===Tg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Ag(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=qr(c.hostAttrs,a=qr(a,c.hostAttrs))}}(u)}function Ql(i){return i===or?{}:i===at?[]:i}function NE(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function OE(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function PE(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let Jl=null;function Du(){if(!Jl){const i=Ft.Symbol;if(i&&i.iterator)Jl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Jl=u)}}}return Jl}function bu(i){return!!i_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Du()in i)}function i_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function gi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Xl(i,s,a,u){const c=we();return gi(c,Cs(),s)&&(Nt(),uo(Dn(),c,i,s,a,u)),Xl}function Ta(i,s,a,u){return gi(i,Cs(),a)?s+de(a)+u:Tt}function Cf(i,s,a,u,c,f,_,E){const I=we(),A=Nt(),S=i+20,P=A.firstCreatePass?function jd(i,s,a,u,c,f,_,E,I){const A=s.consts,S=Fo(s,i,4,_||null,Hr(A,E));Vy(s,a,S,Hr(A,I)),Ji(s,S);const P=S.tViews=hg(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,u,c,f,_):A.data[S];Gr(P,!1);const V=I[11].createComment("");Zp(A,I,V,P),Jt(V,I),_g(I,I[S]=Hy(V,I,V,P)),La(P)&&dg(A,I,P),null!=_&&Oy(I,P,E)}function zd(i,s=st.Default){const a=we();return null===a?Je(i,s):to(mn(),a,Q(i),s)}function Wd(){throw new Error("invalid")}function Af(i,s,a){const u=we();return gi(u,Cs(),s)&&Ti(Nt(),Dn(),u,i,s,u[11],a,!1),Af}function g_(i,s,a,u,c){const _=c?"class":"style";Xe(i,a,s.inputs[_],_,u)}function $t(i,s,a,u){const c=we(),f=Nt(),_=20+i,E=c[11],I=c[_]=Fl(E,s,function Km(){return lt.lFrame.currentNamespace}()),A=f.firstCreatePass?function yr(i,s,a,u,c,f,_){const E=s.consts,A=Fo(s,i,2,c,Hr(E,f));return Vy(s,a,A,Hr(E,_)),null!==A.attrs&&wg(A,A.attrs,!1),null!==A.mergedAttrs&&wg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,f,c,0,s,a,u):f.data[_];Gr(A,!0);const S=A.mergedAttrs;null!==S&&Ss(E,I,S);const P=A.classes;null!==P&&Yp(E,I,P);const V=A.styles;return null!==V&&mu(E,I,V),64!=(64&A.flags)&&Zp(f,c,I,A),0===function oa(){return lt.lFrame.elementDepthCount}()&&Jt(I,c),function Wa(){lt.lFrame.elementDepthCount++}(),La(A)&&(dg(f,c,A),function Xn(i,s,a){if(Sc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const _=i.data[f];_.contentQueries&&_.contentQueries(1,a[f],f)}}}(f,A,c)),null!==u&&Oy(c,A),$t}function Sf(){let i=mn();Xu()?function el(){lt.lFrame.isParent=!1}():(i=i.parent,Gr(i,!1));const s=i;!function Za(){lt.lFrame.elementDepthCount--}();const a=Nt();return a.firstCreatePass&&(Ji(a,i),Sc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Mh(i){return 0!=(16&i.flags)}(s)&&g_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Tp(i){return 0!=(32&i.flags)}(s)&&g_(a,s,we(),s.stylesWithoutHost,!1),Sf}function kg(i,s,a,u){return $t(i,s,a,u),Sf(),kg}function m_(){return we()}function Au(i){return!!i&&"function"==typeof i.then}function JE(i){return!!i&&"function"==typeof i.subscribe}const us=JE;function y_(i,s,a,u){const c=we(),f=Nt(),_=mn();return function XE(i,s,a,u,c,f,_,E){const I=La(u),S=i.firstCreatePass&&er(i),P=s[8],V=Ne(s);let W=!0;if(3&u.type||E){const Ue=Ir(u,s),Qe=E?E(Ue):Ue,Ie=V.length,ct=E?Mt=>E(an(Mt[u.index])):u.index;if(pn(a)){let Mt=null;if(!E&&I&&(Mt=function xf(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===a&&c[f+1]===u){const E=s[7],I=c[f+2];return E.length>I?E[I]:null}"string"==typeof _&&(f+=2)}return null}(i,s,c,u.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=f,Mt.__ngLastListenerFn__=f,W=!1;else{f=un(u,s,P,f,!1);const Pt=a.listen(Qe,c,f);V.push(f,Pt),S&&S.push(c,ct,Ie,Ie+1)}}else f=un(u,s,P,f,!0),Qe.addEventListener(c,f,_),V.push(f),S&&S.push(c,ct,Ie,_)}else f=un(u,s,P,f,!1);const me=u.outputs;let Oe;if(W&&null!==me&&(Oe=me[c])){const Ue=Oe.length;if(Ue)for(let Qe=0;Qe<Ue;Qe+=2){const _n=s[Oe[Qe]][Oe[Qe+1]].subscribe(f),ju=V.length;V.push(f,_n),S&&S.push(c,u.index,ju,-(ju+1))}}}(f,c,c[11],_,i,s,!!a,u),y_}function ew(i,s,a,u){try{return!1!==a(u)}catch(c){return Eg(i,c),!1}}function un(i,s,a,u,c){return function f(_){if(_===Function)return u;const E=2&i.flags?Dr(i.index,s):s;0==(32&s[2])&&vg(E);let I=ew(s,0,u,_),A=f.__ngNextListenerFn__;for(;A;)I=ew(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function tw(i=1){return function Ts(i){return(lt.lFrame.contextLView=function al(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function Of(i,s,a,u,c){const f=we(),_=Ta(f,s,a,u);return _!==Tt&&Ti(Nt(),Dn(),f,i,_,f[11],c,!1),Of}function xr(i,s,a,u,c){const f=i[a+1],_=null===s;let E=u?Us(f):os(f),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];I_(i[E],s)&&(I=!0,i[E+1]=u?Ul(S):My(S)),E=u?Us(S):os(S)}I&&(i[a+1]=u?My(f):Ul(f))}function I_(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Fs(i,s)>=0}function Ug(i,s){return function mi(i,s,a,u){const c=we(),f=Nt(),_=function Ii(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function cw(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[br()],_=function lw(i,s){return s>=i.expandoStartIndex}(i,a);(function mw(i,s){return 0!=(i.flags&(s?16:32))})(f,u)&&null===s&&!_&&(s=!1),s=function rb(i,s,a,u){const c=function ua(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=xi(a=Bg(null,i,s,a,u),s.attrs,u),f=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Bg(c,i,s,a,u),null===f){let I=function dw(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==os(u))return i[Us(u)]}(i,s,u);void 0!==I&&Array.isArray(I)&&(I=Bg(null,i,s,I[1],u),I=xi(I,s.attrs,u),function Fr(i,s,a,u){i[Us(a?s.classBindings:s.styleBindings)]=u}(i,s,u,I))}else f=function ib(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=xi(u,i[f].hostAttrs,a);return xi(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function ow(i,s,a,u,c,f){let _=f?s.classBindings:s.styleBindings,E=Us(_),I=os(_);i[u]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Fs(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=Us(i[E+1]);i[u+1]=Td(V,E),0!==V&&(i[V+1]=tg(i[V+1],u)),i[E+1]=function nE(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=Td(E,0),0!==E&&(i[E+1]=tg(i[E+1],u)),E=u;else i[u+1]=Td(I,0),0===E?E=u:i[I+1]=tg(i[I+1],u),I=u;A&&(i[u+1]=My(i[u+1])),xr(i,S,u,!0),xr(i,S,u,!1),function JD(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Fs(f,s)>=0&&(a[u+1]=Ul(a[u+1]))}(s,S,i,u,f),_=Td(E,I),f?s.classBindings=_:s.styleBindings=_}(c,f,s,a,_,u)}}(f,i,_,u),s!==Tt&&gi(c,_,s)&&function pw(i,s,a,u,c,f,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];jg(function ff(i){return 1==(1&i)}(A)?gw(I,s,a,c,os(A),_):void 0)||(jg(f)||function xy(i){return 2==(2&i)}(A)&&(f=gw(I,null,a,c,E,_)),function CD(i,s,a,u,c){const f=pn(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:X.DashCase;if(null==c)f?i.removeStyle(a,u,_):a.style.removeProperty(u);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=X.Important),f?i.setStyle(a,u,c,_):a.style.setProperty(u,c,E?"important":"")}}}(u,_,Ys(br(),a),c,f))}(f,f.data[br()],c,c[11],i,c[_+1]=function sb(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(Ls(i)))),i}(s,a),u,_)}(i,s,null,!0),Ug}function Bg(i,s,a,u,c){let f=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(f=s[E],u=xi(u,f.hostAttrs,c),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function xi(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const _=s[f];"number"==typeof _?c=_:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dr(i,_,!!a||s[++f]))}return void 0===i?null:i}function gw(i,s,a,u,c,f){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,P=null===S;let V=a[c+1];V===Tt&&(V=P?at:void 0);let W=P?ru(V,u):S===u?V:void 0;if(A&&!jg(W)&&(W=ru(I,u)),jg(W)&&(E=W,_))return E;const me=i[c+1];c=_?Us(me):os(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=ru(I,u))}return E}function jg(i){return void 0!==i}function yw(i,s=""){const a=we(),u=Nt(),c=i+20,f=u.firstCreatePass?Fo(u,c,1,s,null):u.data[c],_=a[c]=function kl(i,s){return pn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Zp(u,a,_,f),Gr(f,!1)}function x_(i){return M_("",i,""),x_}function M_(i,s,a){const u=we(),c=Ta(u,i,s,a);return c!==Tt&&dt(u,br(),c),M_}const Mu=void 0;var L_=["en",[["a","p"],["AM","PM"],Mu],[["AM","PM"],Mu,Mu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Mu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Mu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Mu,"{1} 'at' {0}",Mu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function F_(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let uc={};function qg(i){const s=function Rw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Jd(s);if(a)return a;const u=s.split("-")[0];if(a=Jd(u),a)return a;if("en"===u)return L_;throw new Error(`Missing locale data for the locale "${i}".`)}function zg(i){return qg(i)[yt.PluralCase]}function Jd(i){return i in uc||(uc[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),uc[i]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Wg="en-US";let Nw=Wg;function fc(i,s,a,u,c){if(i=Q(i),Array.isArray(i))for(let f=0;f<i.length;f++)fc(i[f],s,a,u,c);else{const f=Nt(),_=we();let E=Hl(i)?i:Q(i.provide),I=Vt(i);const A=mn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(Hl(i)||!i.multi){const W=new To(I,c,zd),me=Hf(E,s,c?S:S+V,P);-1===me?(Ms(ts(A,_),f,E),sh(f,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[me]=W,_[me]=W)}else{const W=Hf(E,s,S+V,P),me=Hf(E,s,S,S+V),Oe=W>=0&&a[W],Ue=me>=0&&a[me];if(c&&!Ue||!c&&!Oe){Ms(ts(A,_),f,E);const Qe=function Qw(i,s,a,u,c){const f=new To(i,a,zd);return f.multi=[],f.index=s,f.componentProviders=0,im(f,c,u&&!a),f}(c?Yw:nv,a.length,c,u,I);!c&&Ue&&(a[me].providerFactory=Qe),sh(f,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else sh(f,i,W>-1?W:me,im(a[c?me:W],I,!c&&u));!c&&u&&Ue&&a[me].componentProviders++}}}function sh(i,s,a,u){const c=Hl(s),f=function Gl(i){return!!i.useClass}(s);if(c||f){const I=(f?Q(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[u,I]):A[S+1].push(u,I)}else A.push(a,I)}}}function im(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Hf(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function nv(i,s,a,u){return rv(this.multi,[])}function Yw(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Zr(a,a[1],this.providerFactory.index,u);f=E.slice(0,_),rv(c,f);for(let I=_;I<E.length;I++)f.push(E[I])}else f=[],rv(c,f);return f}function rv(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Jw(i,s=[]){return a=>{a.providersResolver=(u,c)=>function rm(i,s,a){const u=Nt();if(u.firstCreatePass){const c=Br(i);fc(a,u.data,u.blueprint,c,!0),fc(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class Xw{}class iv{resolveComponentFactory(s){throw function eI(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let qf=(()=>{class i{}return i.NULL=new iv,i})();function xb(){return oh(mn(),we())}function oh(i,s){return new zf(Ir(i,s))}let zf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=xb,i})();function Mb(i){return i instanceof zf?i.nativeElement:i}class ah{}let sv=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function ov(){const i=we(),a=Dr(mn().index,i);return function uh(i){return i[11]}(Ei(a)?a:i)}(),i})(),om=(()=>{class i{}return i.\u0275prov=rn({token:i,providedIn:"root",factory:()=>null}),i})();class lh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const am=new lh("13.3.1"),um={};function ch(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(an(f)),ui(f))for(let E=10;E<f.length;E++){const I=f[E],A=I[1].firstChild;null!==A&&ch(I[1],I,A,u)}const _=a.type;if(8&_)ch(i,s,a.child,u);else if(32&_){const E=Ye(a,s);let I;for(;I=E();)u.push(I)}else if(16&_){const E=Cy(s,a);if(Array.isArray(E))u.push(...E);else{const I=bn(s[16]);ch(I[1],I,E,u,!0)}}a=c?a.projectionNext:a.next}return u}class pc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ch(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ui(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Ar(s,u),ks(a,u))}this._attachedToViewContainer=!1}nf(this._lView[1],this._lView)}onDestroy(s){_f(this._lView[1],this._lView,null,s)}markForCheck(){vg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){zy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function ti(i,s,a){bs(!0);try{zy(i,s,a)}finally{bs(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vy(i,s){af(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=s}}class Pu extends pc{constructor(s){super(s),this._view=s}detectChanges(){Wy(this._view)}checkNoChanges(){!function Od(i){bs(!0);try{Wy(i)}finally{bs(!1)}}(this._view)}get context(){return null}}class av extends qf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=jt(s);return new Wf(a,this.ngModule)}}function tI(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Wf extends Xw{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Xp(i){return i.map(Sy).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return tI(this.componentDef.inputs)}get outputs(){return tI(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function Rb(i,s){return{get:(a,u,c)=>{const f=i.get(a,um,c);return f!==um||u===um?f:s.get(a,u,c)}}}(s,c.injector):s,_=f.get(ah,Do),E=f.get(om,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=u?function ky(i,s,a){if(pn(i))return i.selectRootElement(s,a===Bt.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(I,u,this.componentDef.encapsulation):Fl(_.createRenderer(null,this.componentDef),A,function uv(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function Yl(i,s){return{components:[],scheduler:i||Ed,clean:BD,playerHandler:s||null,flags:0}}(),W=hg(0,null,null,1,0,null,null,null,null,null),me=_u(null,W,V,P,null,null,_,I,E,f);let Oe,Ue;Qs(me);try{const Qe=function Kl(i,s,a,u,c,f){const _=a[1];a[20]=i;const I=Fo(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(wg(I,A,!0),null!==i&&(Ss(c,i,A),null!==I.classes&&Yp(c,i,I.classes),null!==I.styles&&mu(c,i,I.styles)));const S=u.createRenderer(i,s),P=_u(a,dE(s),null,s.onPush?64:16,a[20],I,u,S,f||null,null);return _.firstCreatePass&&(Ms(ts(I,a),_,s.type),jy(_,I),$y(I,a.length,1)),_g(a,P),a[20]=P}(S,this.componentDef,me,_,I);if(S)if(u)Ss(I,S,["ng-version",am.full]);else{const{attrs:Ie,classes:ct}=function df(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!Ui(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&Ss(I,S,Ie),ct&&ct.length>0&&Yp(I,S,ct.join(" "))}if(Ue=sa(W,20),void 0!==a){const Ie=Ue.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const Mt=a[ct];Ie.push(null!=Mt?Array.from(Mt):null)}}Oe=function bg(i,s,a,u,c){const f=a[1],_=function fg(i,s,a){const u=mn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Eu(i,u,s,vu(i,s,1,null),a));const c=Zr(s,i,u.directiveStart,u);Jt(c,s);const f=Ir(u,s);return f&&Jt(f,s),c}(f,a,s);if(u.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=mn();s.contentQueries(1,_,I.directiveStart)}const E=mn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(As(E.index),Uy(a[1],E,0,E.directiveStart,E.directiveEnd,s),pg(s,_)),_}(Qe,this.componentDef,me,V,[n_]),Md(W,me,null)}finally{Xs()}return new lm(this.componentType,Oe,oh(Ue,me),me,Ue)}}class lm extends class Sb{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Pu(c),this.componentType=s}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class gc{}class mc{}const ku=new Map;class aI extends gc{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new av(this);const u=dn(s);this._bootstrapComponents=p(u.bootstrap),this._r3Injector=CE(s,a,[{provide:gc,useValue:this},{provide:qf,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=co.THROW_IF_NOT_FOUND,u=st.Default){return s===co||s===gc||s===fr?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Zf extends mc{constructor(s){super(),this.moduleType=s,null!==dn(s)&&function iI(i){const s=new Set;!function a(u){const c=dn(u,!0),f=c.id;null!==f&&(function rI(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(f,ku.get(f),u),ku.set(f,u));const _=p(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new aI(this.moduleType,s)}}function wv(i){return s=>{setTimeout(i,void 0,s)}}const go=class Ev extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,_;let E=s,I=a||(()=>null),A=u;if(s&&"object"==typeof s){const P=s;E=null===(c=P.next)||void 0===c?void 0:c.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(I=wv(I),E&&(E=wv(E)),A&&(A=wv(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof K.w0&&s.add(S),S}};function Ub(){return this._results[Du()]()}class cm{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Du(),u=cm.prototype;u[a]||(u[a]=Ub)}get changes(){return this._changes||(this._changes=new go)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Cr(s);(this._changesDetected=!function ml(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let hh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Bb,i})();const cI=hh,dI=class extends cI{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=_u(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),Md(a,u,s),new pc(u)}};function Bb(){return dm(mn(),we())}function dm(i,s){return 4&i.type?new dI(s,i,oh(i,s)):null}let hm=(()=>{class i{}return i.__NG_ELEMENT_ID__=jb,i})();function jb(){return gm(mn(),we())}const Iv=hm,fm=class extends Iv{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){const s=Wr(this._hostTNode,this._hostLView);if(ca(s)){const a=yn(s,this._hostLView),u=nn(s);return new di(a[1].data[u+8],a)}return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=pm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const _=s&&!function Ps(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const P=a||{};E=P.index,u=P.injector,c=P.projectableNodes,f=P.ngModuleRef}const I=_?s:new Wf(jt(s)),A=u||this.parentInjector;if(!f&&null==I.ngModule){const V=(_?A:this.parentInjector).get(gc,null);V&&(f=V)}const S=I.create(A,c,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const u=s._lView,c=u[1];if(function qa(i){return ui(i[3])}(u)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=u[3],V=new fm(P,P[6],P[3]);V.detach(V.indexOf(s))}}const f=this._adjustIndex(a),_=this._lContainer;!function wy(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],Kc(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function Iy(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,u,_,f);const E=Kp(f,_),I=u[11],A=Dd(I,_[7]);return null!==A&&function Id(i,s,a,u,c,f){u[0]=c,u[6]=s,af(i,u,a,1,c,f)}(c,_[6],I,u,A,E),s.attachToViewContainerRef(),Kc(Dv(_),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=pm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Ar(this._lContainer,a);u&&(ks(Dv(this._lContainer),a),nf(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Ar(this._lContainer,a);return u&&null!=ks(Dv(this._lContainer),a)?new pc(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function pm(i){return i[8]}function Dv(i){return i[8]||(i[8]=[])}function gm(i,s){let a;const u=s[i.index];if(ui(u))a=u;else{let c;if(8&i.type)c=an(u);else{const f=s[11];c=f.createComment("");const _=Ir(i,s);Ll(f,Dd(f,_),c,function Z0(i,s){return pn(i)?i.nextSibling(s):s.nextSibling}(f,_),!1)}s[i.index]=a=Hy(u,s,c,i),_g(s,a)}return new fm(a,i,s)}class Kf{constructor(s){this.queryList=s,this.matches=null}clone(){return new Kf(this.queryList)}setDirty(){this.queryList.setDirty()}}class mm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const _=a.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new mm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==fI(s,a).matches&&this.queries[a].setDirty()}}class hI{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class Yf{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new Yf(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Cv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Cv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,Tv(a,f)),this.matchTNodeWithReadOption(s,a,tu(a,s,f,!1,!1))}else u===hh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,tu(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===zf||c===hm||c===hh&&4&a.type)this.addMatch(a.index,-2);else{const f=tu(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Tv(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function Av(i,s,a,u){return-1===a?function Gb(i,s){return 11&i.type?oh(i,s):4&i.type?dm(i,s):null}(s,i):-2===a?function qb(i,s,a){return a===zf?oh(s,i):a===hh?dm(s,i):a===hm?gm(s,i):void 0}(i,s,u):Zr(i,i[1],a,s)}function ym(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:Av(s,f[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Qf(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const _=ym(i,s,c,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)u.push(_[E/2]);else{const A=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&Qf(V[1],V,A,u)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const W=P[V];Qf(W[1],W,A,u)}}}}}return u}function _m(i){const s=we(),a=Nt(),u=il();sl(u+1);const c=fI(a,u);if(i.dirty&&ws(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Qf(a,s,u,[]):ym(a,s,c,u);i.reset(f,Mb),i.notifyOnChanges()}return!0}return!1}function Sv(i,s,a,u){const c=Nt();if(c.firstCreatePass){const f=mn();(function Wo(i,s,a){null===i.queries&&(i.queries=new Yf),i.queries.track(new Cv(s,a))})(c,new hI(s,a,u),f.index),function xv(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Em(i,s,a){const u=new cm(4==(4&a));_f(i,s,u,u.destroy),null===s[19]&&(s[19]=new mm),s[19].queries.push(new Kf(u))}(c,we(),a)}function vm(){return function zb(i,s){return i[19].queries[s].queryList}(we(),il())}function fI(i,s){return i.queries.getByIndex(s)}function np(...i){}const Kv=new Ln("Application Initializer");let Sm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=np,this.reject=np,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Au(f))a.push(f);else if(us(f)){const _=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Je(Kv,8))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Yv=new Ln("AppId",{providedIn:"root",factory:function rp(){return`${xm()}${xm()}${xm()}`}});function xm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Qv=new Ln("Platform Initializer"),yh=new Ln("Platform ID"),II=new Ln("appBootstrapListener");let ni=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const Mm=new Ln("LocaleId",{providedIn:"root",factory:()=>Lt(Mm,st.Optional|st.SkipSelf)||function Zo(){return"undefined"!=typeof $localize&&$localize.locale||Wg}()}),Xb=new Ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Xv=(()=>{class i{compileModuleSync(a){return new Zf(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),f=p(dn(a).declarations).reduce((_,E)=>{const I=jt(E);return I&&_.push(new Wf(I)),_},[]);return new nC(u,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const On=(()=>Promise.resolve(0))();function DI(i){"undefined"==typeof Zone?On.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class fn{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new go(!1),this.onMicrotaskEmpty=new go(!1),this.onStable=new go(!1),this.onError=new go(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function FT(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function CI(i){const s=()=>{!function iC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,t0(i),i.isCheckStableRunning=!0,e0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),t0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,_,E)=>{try{return TI(i),a.invokeTask(c,f,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),AI(i)}},onInvoke:(a,u,c,f,_,E,I)=>{try{return TI(i),a.invoke(c,f,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),AI(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,t0(i),e0(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,s,bI,np,np);try{return f.runTask(_,a,u)}finally{f.cancelTask(_)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const bI={};function e0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function t0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function TI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function AI(i){i._nesting--,e0(i)}class sC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new go,this.onMicrotaskEmpty=new go,this.onStable=new go,this.onError=new go}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let oC=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fn.assertNotInAngularZone(),DI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())DI(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Je(fn))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})(),SI=(()=>{class i{constructor(){this._applications=new Map,mo.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return mo.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();class aC{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function xI(i){mo=i}let Ko,mo=new aC;const MI=new Ln("AllowMultipleToken");class uC{constructor(s,a){this.name=s,this.token=a}}function n0(i,s,a=[]){const u=`Platform: ${s}`,c=new Ln(u);return(f=[])=>{let _=Lu();if(!_||_.injector.get(MI,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const E=a.concat(f).concat({provide:c,useValue:!0},{provide:Ky,useValue:"platform"});!function RI(i){if(Ko&&!Ko.destroyed&&!Ko.injector.get(MI,!1))throw new Me(400,"");Ko=i.get(ip);const s=i.get(Qv,null);s&&s.forEach(a=>a())}(co.create({providers:E,name:u}))}return function Nm(i){const s=Lu();if(!s)throw new Me(401,"");return s}()}}function Lu(){return Ko&&!Ko.destroyed?Ko:null}let ip=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const E=function sp(i,s){let a;return a="noop"===i?new sC:("zone.js"===i?void 0:i)||new fn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),I=[{provide:fn,useValue:E}];return E.run(()=>{const A=co.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(hr,null);if(!P)throw new Me(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{P.handleError(W)}});S.onDestroy(()=>{s0(this._modules,S),V.unsubscribe()})}),function NI(i,s,a){try{const u=a();return Au(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(P,E,()=>{const V=S.injector.get(Sm);return V.runInitializers(),V.donePromise.then(()=>(function V_(i){rt(i,"Expected localeId to be defined"),"string"==typeof i&&(Nw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Mm,Wg)||Wg),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=Om({},u);return function Yo(i,s,a){const u=new Zf(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(r0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Me(403,"");a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Je(co))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function Om(i,s){return Array.isArray(s)?s.reduce(Om,i):Object.assign(Object.assign({},i),s)}let r0=(()=>{class i{constructor(a,u,c,f,_){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{fn.assertNotInAngularZone(),DI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{fn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),P.unsubscribe()}});this.isStable=(0,oe.T)(E,I.pipe((0,J.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Me(405,"");let c;c=a instanceof Xw?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function Rm(i){return i.isBoundToModule}(c)?void 0:this._injector.get(gc),E=c.create(co.NULL,[],u||c.selector,f),I=E.location.nativeElement,A=E.injector.get(oC,null),S=A&&E.injector.get(SI);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),s0(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;s0(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(II,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Je(fn),Je(co),Je(hr),Je(qf),Je(Sm))},i.\u0275prov=rn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function s0(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Pm=!0,a0=!1;function Ic(){return a0=!0,Pm}function PI(){if(a0)throw new Error("Cannot enable prod mode after platform setup.");Pm=!1}let cC=(()=>{class i{}return i.__NG_ELEMENT_ID__=Fm,i})();function Fm(i){return function Lm(i,s,a){if(ms(i)&&!a){const u=Dr(i.index,s);return new pc(u,u)}return 47&i.type?new pc(s[16],s):null}(mn(),we(),16==(16&i))}class FI{constructor(){}supports(s){return bu(s)}create(s){return new gC(s)}}const LI=(i,s)=>s;class gC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||LI}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const _=!u||a&&a.currentIndex<p0(u,c,f)?a:u,E=p0(_,c,f),I=_.currentIndex;if(_===u)c--,u=u._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{f||(f=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<f.length?f[V]:f[V]=0,me=W+V;S<=me&&me<A&&(f[V]=W+1)}f[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!bu(s))throw new Me(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,_,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],_=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,f,_,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,_,E),u=!0),a=a._next}else c=0,function FE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Du()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(u&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new mC(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new f0),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new f0),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class mC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class VI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class f0{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new VI,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function p0(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class g0{constructor(){}supports(s){return s instanceof Map||i_(s)}create(){return new m0}}class m0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||i_(s)))throw new Me(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const u=new Um(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class Um{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UI(){return new Bm([new FI])}let Bm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||UI()),deps:[[i,new rs,new Jr]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Me(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:UI}),i})();function BI(){return new Ra([new g0])}let Ra=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||BI()),deps:[[i,new rs,new Jr]]}}find(a){const u=this.factories.find(f=>f.supports(a));if(u)return u;throw new Me(901,"")}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:BI}),i})();const jI=n0(null,"core",[{provide:yh,useValue:"unknown"},{provide:ip,deps:[co]},{provide:SI,deps:[]},{provide:ni,deps:[]}]);let $I=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Je(r0))},i.\u0275mod=Y({type:i}),i.\u0275inj=Yt({}),i})()},3942:(nt,Ce,k)=>{k.d(Ce,{Z:()=>Me});var g=k(2090),K=k(4859),O=k(9681),oe=k(1877);class J{constructor(de,Ee){this._delegate=de,this.firebase=Ee,(0,O._addComponent)(de,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(de,Ee=O._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Ge=this._delegate.container.getProvider(de);return!Ge.isInitialized()&&"EXPLICIT"===(null===(Ke=Ge.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Ge.initialize(),Ge.getImmediate({identifier:Ee})}_removeServiceInstance(de,Ee=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(Ee)}_addComponent(de){(0,O._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,O._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Pe=function ce(Pe){const de={},Ee={__esModule:!0,initializeApp:function De(Be,te={}){const z=O.initializeApp(Be,te);if((0,g.r3)(de,z.name))return de[z.name];const ne=new Pe(z,Ee);return de[z.name]=ne,ne},app:Ge,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const te=Be.name,z=te.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const ne=(ge=Ge())=>{if("function"!=typeof ge[z])throw ie.create("invalid-app-argument",{appName:te});return ge[z]()};void 0!==Be.serviceProps&&(0,g.ZB)(ne,Be.serviceProps),Ee[z]=ne,Pe.prototype[z]=function(...ge){return this._getService.bind(this,te).apply(this,Be.multipleInstances?ge:[])}}return"PUBLIC"===Be.type?Ee[z]:null},removeApp:function Ke(Be){delete de[Be]},useAsService:function je(Be,te){return"serverAuth"===te?null:te},modularAPIs:O}};function Ge(Be){if(!(0,g.r3)(de,Be=Be||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Be});return de[Be]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function _e(){return Object.keys(de).map(Be=>de[Be])}}),Ge.App=Pe,Ee}(J);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function de(Ee){(0,g.ZB)(Pe,Ee)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Pe}(),j=new oe.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=B;!function Te(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.21",Pe)}()},9681:(nt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>Tn,_addComponent:()=>cn,_addOrOverwriteComponent:()=>_i,_apps:()=>ft,_clearComponents:()=>Ut,_components:()=>ln,_getProvider:()=>Hi,_registerComponent:()=>rn,_removeServiceInstance:()=>Yt,deleteApp:()=>qi,getApp:()=>Rr,getApps:()=>Gi,initializeApp:()=>Ni,onLog:()=>zn,registerVersion:()=>Ur,setLogLevel:()=>Bn});var g=k(5861),K=k(4859),O=k(1877),oe=k(2090);class J{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Ze=>{if(function pe(qe){const be=qe.getComponent();return"VERSION"===(null==be?void 0:be.type)}(Ze)){const ut=Ze.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ze=>Ze).join(" ")}}const ie="@firebase/app",ue=new O.Yd("@firebase/app"),Tn="[DEFAULT]",rt={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ft=new Map,ln=new Map;function cn(qe,be){try{qe.container.addComponent(be)}catch(Ze){ue.debug(`Component ${be.name} failed to register with FirebaseApp ${qe.name}`,Ze)}}function _i(qe,be){qe.container.addOrOverwriteComponent(be)}function rn(qe){const be=qe.name;if(ln.has(be))return ue.debug(`There were multiple attempts to register component ${be}.`),!1;ln.set(be,qe);for(const Ze of ft.values())cn(Ze,qe);return!0}function Hi(qe,be){const Ze=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Ze&&Ze.triggerHeartbeat(),qe.container.getProvider(be)}function Yt(qe,be,Ze=Tn){Hi(qe,be).clearInstance(Ze)}function Ut(){ln.clear()}const si=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ds{constructor(be,Ze,ut){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Ze),this._name=Ze.name,this._automaticDataCollectionEnabled=Ze.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}const Mr="9.6.10";function Ni(qe,be={}){"object"!=typeof be&&(be={name:be});const Ze=Object.assign({name:Tn,automaticDataCollectionEnabled:!1},be),ut=Ze.name;if("string"!=typeof ut||!ut)throw si.create("bad-app-name",{appName:String(ut)});const kt=ft.get(ut);if(kt){if((0,oe.vZ)(qe,kt.options)&&(0,oe.vZ)(Ze,kt.config))return kt;throw si.create("duplicate-app",{appName:ut})}const Rt=new K.H0(ut);for(const L of ln.values())Rt.addComponent(L);const U=new ds(qe,Ze,Rt);return ft.set(ut,U),U}function Rr(qe=Tn){const be=ft.get(qe);if(!be)throw si.create("no-app",{appName:qe});return be}function Gi(){return Array.from(ft.values())}function qi(qe){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(qe){const be=qe.name;ft.has(be)&&(ft.delete(be),yield Promise.all(qe.container.getProviders().map(Ze=>Ze.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function Ur(qe,be,Ze){var ut;let kt=null!==(ut=rt[qe])&&void 0!==ut?ut:qe;Ze&&(kt+=`-${Ze}`);const Rt=kt.match(/\s|\//),U=be.match(/\s|\//);if(Rt||U){const L=[`Unable to register library "${kt}" with version "${be}":`];return Rt&&L.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Rt&&U&&L.push("and"),U&&L.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}rn(new K.wA(`${kt}-version`,()=>({library:kt,version:be}),"VERSION"))}function zn(qe,be){if(null!==qe&&"function"!=typeof qe)throw si.create("invalid-log-argument");(0,O.Am)(qe,be)}function Bn(qe){(0,O.Ub)(qe)}const gn="firebase-heartbeat-store";let Wn=null;function hs(){return Wn||(Wn=(0,oe.X3)("firebase-heartbeat-database",1,(qe,be)=>{0===be&&qe.createObjectStore(gn)}).catch(qe=>{throw si.create("storage-open",{originalErrorMessage:qe.message})})),Wn}function Bt(){return(Bt=(0,g.Z)(function*(qe){try{return(yield hs()).transaction(gn).objectStore(gn).get(sr(qe))}catch(be){throw si.create("storage-get",{originalErrorMessage:be.message})}})).apply(this,arguments)}function et(qe,be){return _t.apply(this,arguments)}function _t(){return(_t=(0,g.Z)(function*(qe,be){try{const ut=(yield hs()).transaction(gn,"readwrite");return yield ut.objectStore(gn).put(be,sr(qe)),ut.complete}catch(Ze){throw si.create("storage-set",{originalErrorMessage:Ze.message})}})).apply(this,arguments)}function sr(qe){return`${qe.name}!${qe.options.appId}`}class Gs{constructor(be){this.container=be,this._heartbeatsCache=null;const Ze=this.container.getProvider("app").getImmediate();this._storage=new at(Ze),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var be=this;return(0,g.Z)(function*(){const ut=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=vr();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==kt&&!be._heartbeatsCache.heartbeats.some(Rt=>Rt.date===kt))return be._heartbeatsCache.heartbeats.push({date:kt,agent:ut}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Rt=>{const U=new Date(Rt.date).valueOf();return Date.now()-U<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,g.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Ze=vr(),{heartbeatsToSend:ut,unsentEntries:kt}=function or(qe,be=1024){const Ze=[];let ut=qe.slice();for(const kt of qe){const Rt=Ze.find(U=>U.agent===kt.agent);if(Rt){if(Rt.dates.push(kt.date),Er(Ze)>be){Rt.dates.pop();break}}else if(Ze.push({agent:kt.agent,dates:[kt.date]}),Er(Ze)>be){Ze.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ze,unsentEntries:ut}}(be._heartbeatsCache.heartbeats),Rt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return be._heartbeatsCache.lastSentHeartbeatDate=Ze,kt.length>0?(be._heartbeatsCache.heartbeats=kt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Rt})()}}function vr(){return(new Date).toISOString().substring(0,10)}class at{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,g.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function Xo(qe){return Bt.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const Rt=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Rt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Ze=this;return(0,g.Z)(function*(){var ut;if(yield Ze._canUseIndexedDBPromise){const Rt=yield Ze.read();return et(Ze.app,{lastSentHeartbeatDate:null!==(ut=be.lastSentHeartbeatDate)&&void 0!==ut?ut:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...be.heartbeats]})}})()}}function Er(qe){return(0,oe.L)(JSON.stringify({version:2,heartbeats:qe})).length}!function Ot(qe){rn(new K.wA("platform-logger",be=>new J(be),"PRIVATE")),rn(new K.wA("heartbeat",be=>new Gs(be),"PRIVATE")),Ur(ie,"0.7.20",qe),Ur(ie,"0.7.20","esm2017"),Ur("fire-js","")}("")},4859:(nt,Ce,k)=>{k.d(Ce,{H0:()=>ce,wA:()=>O});var g=k(5861),K=k(2090);class O{constructor(B,j,Q){this.name=B,this.instanceFactory=j,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Q=new K.BH;if(this.instancesDeferred.set(j,Q),this.isInitialized(j)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:j});$e&&Q.resolve($e)}catch($e){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),$e=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Q]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});Q.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...j.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Q,options:j});for(const[Te,Me]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Te)&&Me.resolve($e);return $e}onInit(B,j){var Q;const $e=this.normalizeInstanceIdentifier(j),Te=null!==(Q=this.onInitCallbacks.get($e))&&void 0!==Q?Q:new Set;Te.add(B),this.onInitCallbacks.set($e,Te);const Me=this.instances.get($e);return Me&&B(Me,$e),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Q=this.onInitCallbacks.get(j);if(Q)for(const $e of Q)try{$e(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Q),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch($e){}var ue;return Q||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(nt,Ce,k)=>{k.d(Ce,{Am:()=>ue,Ub:()=>ce,Yd:()=>ie,in:()=>K});const g=[];var K=(()=>{return(B=K||(K={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",K;var B})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},oe=K.INFO,J={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},pe=(B,j,...Q)=>{if(j<B.logLevel)return;const $e=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${$e}]  ${B.name}:`,...Q)};class ie{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in K))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...j),this._logHandler(this,K.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...j),this._logHandler(this,K.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,K.INFO,...j),this._logHandler(this,K.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,K.WARN,...j),this._logHandler(this,K.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...j),this._logHandler(this,K.ERROR,...j)}}function ce(B){g.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Q of g){let $e=null;j&&j.level&&($e=O[j.level]),Q.userLogHandler=null===B?null:(Te,Me,...Pe)=>{const de=Pe.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch(Ke){return null}}).filter(Ee=>Ee).join(" ");Me>=(null!=$e?$e:Te.logLevel)&&B({level:K[Me].toLowerCase(),message:de,args:Pe,type:Te.name})}}}},5861:(nt,Ce,k)=>{function g(O,oe,J,pe,ie,ce,ue){try{var B=O[ce](ue),j=B.value}catch(Q){return void J(Q)}B.done?oe(j):Promise.resolve(j).then(pe,ie)}function K(O){return function(){var oe=this,J=arguments;return new Promise(function(pe,ie){var ce=O.apply(oe,J);function ue(j){g(ce,pe,ie,ue,B,"next",j)}function B(j){g(ce,pe,ie,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>K})}},nt=>{nt(nt.s=6884)}]);